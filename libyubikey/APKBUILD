# Contributor: Daniel Everett <deverett@gmail.com>
# Maintainer: Daniel Everett <deverett@gmail.com>
pkgname=libyubikey
pkgver=1.13
pkgrel=0
pkgdesc="YubiKey C low-level library"
url="https://github.com/dae3/alpine-libyubikey"
arch="all"
license="BSD-2-Clause"
depends=""
makedepends="automake autoconf libtool asciidoc"
install=""
subpackages="$pkgname-dev $pkgname-doc"
source="https://github.com/Yubico/yubico-c/archive/libyubikey-1.13.tar.gz"
builddir="$srcdir/yubico-c-$pkgname-$pkgver"

build() {
	cd "$builddir"
	autoreconf --install

	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

check() {
	cd "$builddir"
	make check
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="5f172263d67f262003caf5ac3135a05e45a8e443ffe4662855cb427620babe8dda954c93fc57cff1fd711f92660e223acd4e928c0902c949c6523f28e9553d19  libyubikey-1.13.tar.gz"
