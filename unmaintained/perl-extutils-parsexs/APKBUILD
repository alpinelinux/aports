# Automatically generated by apkbuild-cpan, template 1
# Contributor: Francesco Colista <francesco.colista@gmail.com>
# Maintainer: Francesco Colista <francesco.colista@gmail.com>
pkgname=perl-extutils-parsexs
_pkgreal=ExtUtils-ParseXS
pkgver=3.22
pkgrel=0
pkgdesc="converts Perl XS code into C code"
url="http://search.cpan.org/dist/ExtUtils-ParseXS/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends=""
cpanmakedepends=""
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/S/SM/SMUELLER/$_pkgreal-$pkgver.tar.gz"

_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	make && make test
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="bf1c862d9b9806eb85408bc6c64583d2  ExtUtils-ParseXS-3.22.tar.gz"
sha256sums="04e57d4f080f71b4ea1e213c9bbf5391d5652f77ac82f3c5dbc480545d1f290e  ExtUtils-ParseXS-3.22.tar.gz"
sha512sums="ef303f5b77e66e9ca4c8c000857a0dc87432b4d53fd70b80ade53c4dd1bcb2bb75cb736c1c2dfdea3233979148c8e157003a7d5d4cb83f1fff4cc2692d13f852  ExtUtils-ParseXS-3.22.tar.gz"
