# Automatically generated by apkbuild-cpan, template 2
# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=netdisco
_pkgreal=App-Netdisco
_pkgver=2.036012_003
pkgver=${_pkgver/_/p}
pkgrel=4
pkgdesc="An open source web-based network management tool."
url="https://metacpan.org/release/App-Netdisco/"
arch="" # perl-starman
license="BSD-3-Clause"
cpandepends="perl-dancer-plugin-passphrase perl-data-printer perl-plack perl-ldap
	perl-file-sharedir perl-starman perl-socket6 perl-json-xs perl-netaddr-mac
	perl-anyevent perl-uri perl-dancer-plugin-dbic perl-template-plugin-csv
	perl-try-tiny perl-snmp-info perl-list-moreutils perl-dbix-class
	perl-anyevent-dns-etchosts perl-daemon-control perl-file-slurper perl-moo
	perl-io-socket-ssl perl-role-tiny perl-algorithm-cron perl-sereal
	perl-template-plugin-number-format perl-json perl-dbix-class-helpers
	perl-dancer-plugin-auth-extensible perl-sql-translator perl-path-class
	perl-template-toolkit perl-url-encode perl-dancer perl-plack-middleware-reverseproxy
	perl-namespace-clean perl-cgi-expand perl-html-parser perl-net-dns
	perl-dancer-session-cookie perl-yaml-libyaml perl-netaddr-ip perl-aliased
	perl-guard perl-mce perl-plack-middleware-expires perl-dbd-pg"
# perl-app-local-lib-helper perl-app-cpanminus
cpanmakedepends=""
cpancheckdepends="perl-env-path"
depends="perl-term-ui perl-archive-extract $cpandepends"
makedepends="perl-dev perl-module-build $cpanmakedepends"
checkdepends="$cpancheckdepends"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/O/OL/OLIVER/$_pkgreal-$_pkgver.tar.gz
	"
builddir="$srcdir/$_pkgreal-$_pkgver"

prepare() {
	default_prepare

	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	perl Build.PL installdirs=vendor
}

build() {
	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	./Build
}

package() {
	cd "$builddir"
	./Build install destdir="$pkgdir"
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

check() {
	cd "$builddir"
	./Build test
}

sha512sums="4c0f5dcd6f6174f5531399f1bc6aafb3a650e4abe4ff97c39fdeb6ce982e7a7c95cd205e53f871b56aafa98a9cd4d5b6812aea8415e3ef5a2ca06c1f9576ae3f  App-Netdisco-2.036012_003.tar.gz"
