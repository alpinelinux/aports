# Contributor: Daniel Everett <deverett@gmail.com>
# Maintainer: Daniel Everett <deverett@gmail.com>
pkgname=yubikey-personalization
pkgver=1.19.0
pkgrel=0
pkgdesc="YubiKey Personalization cross-platform library and tool"
url="https://github.com/dae3/alpine-yubikey-personalization"
arch="all"
license="BSD-2-Clause"
depends="libyubikey libusb asciidoc"
makedepends="autoconf automake libtool libyubikey-dev libusb-dev"
install=""
subpackages="$pkgname-dev $pkgname-doc"
source="$pkgname-$pkgver.tar.gz::http://github.com/Yubico/yubikey-personalization/archive/v1.19.0.tar.gz
10-test_args_to_config.c.patch"
builddir="$srcdir/$pkgname-$pkgver"

prepare() {
	default_prepare
}

build() {
	cd "$builddir"
	autoreconf --install
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

check() {
	cd "$builddir"
	make check
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="413f81325782f0d71501d3dbf5aaaf646bd5dc02d87308a7f650044dfe860dc13b7cef11afa8794df3049c729e10da33ffad86e3f148ac429ee64685bf0fe56e  yubikey-personalization-1.19.0.tar.gz
dea7b136f7fe2653ba13d8fc18c9fdc3b48c7fd38e057a9be5c89c4f78ca67be1f70ed2db413acbd8c8f5fa5f29fd132b1a3ececf4e98d69bb9fc3b985087d4f  10-test_args_to_config.c.patch"
