# Maintainer: Oliver Smith <ollieparanoid@postmarketos.org>
pkgname=mobile-config-firefox
pkgver=5.1.0
pkgrel=0
pkgdesc="Firefox tweaks for mobile and privacy"
url="https://gitlab.postmarketos.org/postmarketOS/mobile-config-firefox"
arch="noarch"
license="GPL-3.0-or-later"
subpackages="$pkgname-librewolf"
source="https://gitlab.postmarketos.org/postmarketOS/mobile-config-firefox/-/archive/$pkgver/mobile-config-firefox-$pkgver.tar.gz"
options="!check" # No tests

package() {
	make DESTDIR="$pkgdir" FIREFOX_DIR=/usr/lib/firefox install
	make DESTDIR="$pkgdir" FIREFOX_DIR=/usr/lib/firefox-developer-edition install
	make DESTDIR="$pkgdir" FIREFOX_DIR=/usr/lib/firefox-esr install
	make DESTDIR="$pkgdir" FIREFOX_DIR=/usr/lib/librewolf install
}

librewolf() {
	depends="librewolf"
	amove /usr/lib/librewolf

	# Librewolf already ships a policies.json file, which does similar
	# things. Avoid the conflict.
	rm "$subpkgdir"/usr/lib/librewolf/distribution/policies.json
}

sha512sums="
f4f5386dd978a09bc8eebecdc29cd9a423e72e86dea5f10bfe4271124eaff4e569e2d60d1554099f26787c38b88b388721c2197695cff99566da20501c8baeed  mobile-config-firefox-5.1.0.tar.gz
"
