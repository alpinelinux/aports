# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=pg-gvm
pkgver=22.4.0
#PostgreSQL version
_pgver=15
pkgrel=1
pkgdesc="Greenbone Library for helper functions in PostgreSQL"
url="https://github.com/greenbone/pg-gvm"
arch="all"
license="GPL-3.0"
options="!check" # no check available
makedepends="cmake glib libical-dev gvm-libs-dev postgresql$_pgver-dev ninja"
source="$pkgname-$pkgver.tar.gz::https://github.com/greenbone/pg-gvm/archive/refs/tags/v$pkgver.tar.gz"

build() {
	cmake -B build -G Ninja \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DPostgreSQL_INCLUDE_DIRS=/usr/include/postgresql/$_pgver/ \
		-DPostgreSQL_TYPE_INCLUDE_DIR=/usr/include/postgresql/$_pgver/
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
ce268c48fdfeb408d7cfc2aaf7ce84417ea6d3f489ae25c6812e26d368e74991bdfcb714a85691d07666573d3d7eaee5d811551413b9f8289ae91a64c6d20358  pg-gvm-22.4.0.tar.gz
"
