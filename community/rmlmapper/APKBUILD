# Contributor: Dylan Van Assche <dylan@postmarketos.org>
# Maintainer: Dylan Van Assche <dylan@postmarketos.org>
pkgname=rmlmapper
pkgver=8.0.0
pkgrel=1
pkgdesc="Generate RDF from (semi-)structured data sources with RML rules."
url="https://github.com/RMLio/rmlmapper-java"
# Blocked by java-jdk
arch="all !x86 !armhf !armv7 !riscv64"
options="!check" # testsuite needs proprietary Oracle DB jar
license="MIT"
depends="openjdk21 java-jre-headless"
makedepends="maven java-jdk"
source="$pkgname-$pkgver.tar.gz::https://github.com/RMLio/rmlmapper-java/archive/v$pkgver/rmlmapper-java-$pkgver.tar.gz
	rmlmapper.sh
	"
builddir="$srcdir/$pkgname-java-$pkgver"

build() {
	mvn install -DskipTests=true -Dmaven.buildNumber.skip=true
}

package() {
	install -Dm644 "$srcdir/$pkgname-java-$pkgver/target/$pkgname-$pkgver-"*-all.jar \
		"$pkgdir"/usr/share/java/$pkgname.jar
	install -Dm755 "$srcdir"/rmlmapper.sh \
		"$pkgdir"/usr/bin/rmlmapper
}

sha512sums="
b103af45562a43c591cd70e1a546332275b975cf05586b23ee948f61bc31a91b0b1c5f38f7d342b542441b81ba132a4687c7db8b92d6459f97d90237c408b3c9  rmlmapper-8.0.0.tar.gz
3c8033a4b5adffb1c15cac1e626a293f1727bf91f5dac649237805eecb74eb9d52193f29f0597c2ae888d841a75a5b30fca8bab6f78c6f645ef40c3c0f452c38  rmlmapper.sh
"
