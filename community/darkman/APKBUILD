maintainer="Hugo Osvaldo Barrera <hugo@whynothugo.nl>"
pkgname=darkman
pkgver=2.3.1
pkgrel=0
pkgdesc="Daemon for dark-mode and light-mode transitions on Unix-like desktop"
url="https://darkman.whynothugo.nl/"
arch="all"
license="ISC"
makedepends="go scdoc"
subpackages="
	$pkgname-doc
	$pkgname-bash-completion
	$pkgname-fish-completion
	$pkgname-zsh-completion
	$pkgname-openrc
	$pkgname-systemd
	"
source="https://gitlab.com/WhyNotHugo/darkman/-/archive/v$pkgver/darkman-v$pkgver.tar.gz"
builddir="$srcdir/$pkgname-v$pkgver"
options="!check net"

export GOCACHE="${GOCACHE:-"$srcdir/go-cache"}"
export GOTMPDIR="${GOTMPDIR:-"$srcdir"}"
export GOMODCACHE="${GOMODCACHE:-"$srcdir/go"}"
# tarballs lack git version metadata required for buildling
export VERSION="$pkgver"

build() {
	make build
}

package() {
	make DESTDIR="$pkgdir/" PREFIX=/usr/ install
}

sha512sums="
d23ffeecc3f7f060664b36ee023c65dcd939fa8ac50720b757ddcbc998070666194253c26c46a5f5c36dc9e8bb1865f3e0ee872cd393366f8912767c8a13aaa1  darkman-v2.3.1.tar.gz
"
