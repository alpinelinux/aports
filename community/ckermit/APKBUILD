# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=ckermit
pkgver=9.0.302
pkgrel=0
pkgdesc="Portable scriptable network and serial communication software"
url="http://www.columbia.edu/kermit/ck90.html"
arch="all"
license="custom"
depends=""
makedepends="ncurses-dev"
install=""
subpackages="$pkgname-doc"
source="http://www.kermitproject.org/ftp/kermit/archives/cku${pkgver/9.0./}.tar.gz"
builddir="$srcdir"
build() {
	cd "$builddir"
	chmod -R og-rwx ./
	sed -i -e "6057s/\-DUSE_STRERROR/\-DUSE_STRERROR\ -DNOARROWKEYS/" makefile
	make linux
}

package() {
	cd "$builddir"
	mkdir -m 0755 -p $pkgdir/usr/bin
	mkdir -m 0755 -p $pkgdir/usr/share/man/man1

	install -Dm644 COPYING.TXT $pkgdir/usr/share/licenses/custom/$pkgname/COPYING.txt
	install -m 755 wermit $pkgdir/usr/bin/ckermit
	install -m 644 ckuker.nr $pkgdir/usr/share/man/man1/ckermit.1

	echo "#!/usr/bin/ckermit" > _tmp.ini
	cat ckermit.ini >> _tmp.ini
	install -m 755 _tmp.ini $pkgdir/usr/bin/ckermit.ini
}

sha512sums="2cfc264e5262d29618fdf218fd3407fd9049b16110972cdddb03d114703b7a0ea13c4b0a354f50c2a9f70d4727732fe4d1920b5c656f969bc56c1eb9dc3c43fa  cku302.tar.gz"
