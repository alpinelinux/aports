Upstream-Status: https://github.com/ReactiveX/RxPY/pull/749

From 8276c08b542e249aa7428c23a00f8e277b0547e4 Mon Sep 17 00:00:00 2001
From: LN Liberda <lauren@selfisekai.rocks>
Date: Fri, 28 Nov 2025 07:55:38 +0100
Subject: [PATCH] Call gi.require_version before importing, instead of after

---
 examples/timeflies/timeflies_gtk.py                     | 4 ++--
 tests/test_scheduler/test_mainloop/test_gtkscheduler.py | 4 +---
 2 files changed, 3 insertions(+), 5 deletions(-)

diff --git a/examples/timeflies/timeflies_gtk.py b/examples/timeflies/timeflies_gtk.py
index ef9c7ea8..586489cc 100644
--- a/examples/timeflies/timeflies_gtk.py
+++ b/examples/timeflies/timeflies_gtk.py
@@ -1,4 +1,6 @@
 import gi
+
+gi.require_version("Gtk", "3.0")
 from gi.repository import Gdk, GLib, Gtk
 
 import reactivex
@@ -6,8 +8,6 @@ from reactivex import operators as ops
 from reactivex.scheduler.mainloop import GtkScheduler
 from reactivex.subject import Subject
 
-gi.require_version("Gtk", "3.0")
-
 
 class Window(Gtk.Window):
     def __init__(self):
diff --git a/tests/test_scheduler/test_mainloop/test_gtkscheduler.py b/tests/test_scheduler/test_mainloop/test_gtkscheduler.py
index 4d2815f8..3ec95b54 100644
--- a/tests/test_scheduler/test_mainloop/test_gtkscheduler.py
+++ b/tests/test_scheduler/test_mainloop/test_gtkscheduler.py
@@ -10,10 +10,8 @@ from reactivex.internal.basic import default_now
 from reactivex.scheduler.mainloop import GtkScheduler
 
 gi = pytest.importorskip("gi")
-from gi.repository import GLib, Gtk  # isort: skip
-
-
 gi.require_version("Gtk", "3.0")
+from gi.repository import GLib, Gtk  # isort: skip
 
 
 # Removing GNOME_DESKTOP_SESSION_ID from environment
