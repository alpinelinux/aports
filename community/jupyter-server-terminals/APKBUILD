# Contributor: Aiden Grossman <agrossman154@yahoo.com>
maintainer="Achill Gilgenast <achill@achill.org>"
pkgname=jupyter-server-terminals
pkgver=0.5.4
pkgrel=0
pkgdesc="Jupyter server extension for terminals"
url="https://github.com/jupyter-server/jupyter_server_terminals"
arch="noarch"
license="BSD-3-Clause"
depends="py3-terminado"
makedepends="py3-gpep517 py3-hatchling"
checkdepends="py3-pytest jupyter-server"
subpackages="$pkgname-pyc"
source="$pkgname-$pkgver.tar.gz::https://github.com/jupyter-server/jupyter_server_terminals/archive/refs/tags/v$pkgver.tar.gz"
builddir="$srcdir/jupyter_server_terminals-$pkgver"
options="!check" # circular dependency on jupyter-server

build() {
	gpep517 build-wheel \
		--wheel-dir .dist \
		--output-fd 3 3>&1 >&2
}

check() {
	pytest
}

package() {
	python3 -m installer -d "$pkgdir" \
		.dist/*.whl
}

sha512sums="
1d8a36086b1b465bbdc3b8307b04c0469c5c52e6ebe2c3bc7c062c9b4cb8566901e55aa019635a744c1beaa7e72bed28536f7d24fa1fdf9e121920db31199736  jupyter-server-terminals-0.5.4.tar.gz
"
