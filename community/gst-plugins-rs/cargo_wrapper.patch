--- a/cargo_wrapper.py
+++ b/cargo_wrapper.py
@@ -260,9 +260,9 @@ if __name__ == '__main__':
         if run_clippy:
             cargo_cmd += ["clippy"]
         elif opts.bin or opts.examples:
-            cargo_cmd += ['build']
+            cargo_cmd += ['auditable', 'build']
         else:
-            cargo_cmd += ['cbuild']
+            cargo_cmd += ['cbuild', '--library-type=cdylib']
             if not opts.disable_doc:
                 features += ['doc']
 
@@ -272,6 +272,7 @@ if __name__ == '__main__':
 
         if opts.target == 'release':
             cargo_cmd.append('--release')
+            cargo_cmd.append('--locked')
     elif opts.command == 'test':
         # Set up library paths for test execution
         setup_library_paths_for_tests(env, opts.root_dir, logfile)
