# Contributor: Saijin-Naib <Saijin-Naib_package-maintenance@outlook.com>
# Maintainer: Saijin-Naib <Saijin-Naib_package-maintenance@outlook.com>
pkgname=parole
pkgver=4.20.0
pkgrel=0
case $pkgver in
	*.*.*.*) _branch=${pkgver%.*.*};;
	*.*.*) _branch=${pkgver%.*};;
esac
pkgdesc="Media player for the Xfce desktop"
url="https://docs.xfce.org/apps/parole/start"
arch="all"
license="GPL-2.0-or-later"
depends="gst-plugins-good"
depends_dev="
	dbus-glib-dev
	gettext
	gst-plugins-base-dev
	gstreamer-dev
	libnotify-dev
	libsm-dev
	libxfce4ui-dev
	libxfce4util-dev
	taglib-dev
	"
makedepends="$depends_dev linux-headers meson xfce4-dev-tools"
subpackages="$pkgname-dev $pkgname-lang"
source="https://archive.xfce.org/src/apps/parole/$_branch/parole-$pkgver.tar.xz"
options="!check" # no tests

build() {
	abuild-meson \
		output .
	meson compile -C output
}

check() {
	meson test --print-errorlogs -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

sha512sums="
a39438cf3684dee84406fce5aed7c4b30e0fd726e9c7399a015a67f32d7a1ca9af1a543147a96e13113545996e27c44586daf4df013fb81df4b8c4c348bf93a6  parole-4.20.0.tar.xz
"
