# Contributor: David Huffman <storedbox@outlook.com>
# Maintainer: Integral <integral@member.fsf.org>
pkgname=gosu
pkgver=1.18
pkgrel=1
pkgdesc="Simple Go-based setuid+setgid+setgroups+exec"
url="https://github.com/tianon/gosu"
arch="all"
license="Apache-2.0"
makedepends="coreutils go"
source="$pkgname-$pkgver.tar.gz::https://github.com/tianon/gosu/archive/refs/tags/$pkgver.tar.gz"
options="!check net" # require docker to run tests, go

export GOCACHE="${GOCACHE:-"$srcdir/go-cache"}"
export GOTMPDIR="${GOTMPDIR:-"$srcdir"}"
export GOMODCACHE="${GOMODCACHE:-"$srcdir/go"}"

build() {
	go build -v
}

package() {
	install -Dm755 gosu -t "$pkgdir"/usr/bin/
}

sha512sums="
2f2d10a3443126dbf52cd0d5919d6e501afcda35d24900059e8cfb3428f9d3d5b94a8d9017ab1e1c663b0d4a8be7cc837d4c35c6e16dd637fdbb5c9d80f84945  gosu-1.18.tar.gz
"
