# Contributor: William Pitcock <nenolod@dereferenced.org>
# Maintainer: William Pitcock <nenolod@dereferenced.org>
pkgname=mpdscribble
pkgver=0.22
pkgrel=1
pkgdesc="last.fm client for mpd"
url="http://mpd.wikia.com/wiki/Client:Mpdscribble"
arch="all"
license="GPL"
depends=""
depends_dev=""
makedepends="$depends_dev libmpdclient-dev curl-dev glib-dev"
install=""
subpackages="$pkgname-doc"
source="https://www.musicpd.org/download/mpdscribble/${pkgver}/mpdscribble-${pkgver}.tar.bz2
	mpdscribble.initd"

builddir="$srcdir"/mpdscribble-$pkgver
prepare() {
	local i
	cd "$builddir"
	update_config_sub
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i;;
		esac
	done
}

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--localstatedir=/var
	make
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
	install -D -m755 "$srcdir"/mpdscribble.initd "$pkgdir"/etc/init.d/mpdscribble
}

sha512sums="bedd93392a4d5a0609dcaf7aefeeff3851f3084da8c34a4fc1f8fde51c2ba10b8370ac52cc8d55f0c9a96fffed975827a0935087c2c51880b7bfef8d79182dc8  mpdscribble-0.22.tar.bz2
b82d3e5678aba145a5c8d172ebf74960d164e3e934426cc755948d795743bb07158f502705d40c1730a40b6a6d73e84c5792419adaf6ab83ec7c33756f0abb43  mpdscribble.initd"
