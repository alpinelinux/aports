# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=emacs-lingva
pkgver=0_git20250208
_gitrev=de11bdbd90c73106ce272e60ac030d2a9a2d5f5b
pkgrel=0
_pkgreal=lingva
pkgdesc="Basic interface to Lingva (Google Translate alternative front-end)"
url="https://codeberg.org/martianh/lingva.el"
arch="noarch"
license="GPL-3.0-or-later"
depends="cmd:emacs"
makedepends="emacs-nox"
source="$pkgname-$_gitrev.tar.gz::https://codeberg.org/martianh/lingva.el/archive/$_gitrev.tar.gz"
builddir="$srcdir/lingva.el"
options="!check" # no tests provided

build() {
	emacs -batch -q -no-site-file -L . \
		-eval '(setq byte-compile-error-on-warn t)' \
		-f batch-byte-compile \
		./*.el
}

package() {
	install -Dvm644 ./*.el ./*.elc \
		-t "$pkgdir"/usr/share/emacs/site-lisp/

	cd "$pkgdir"/usr/share/emacs/site-lisp
	emacs -batch -q -no-site-file \
		-eval "(loaddefs-generate \".\" \"$_pkgreal-loaddefs.el\")"
}

sha512sums="
5c1a2916c8c5ef0956fc3d7f7146b1bb8354a6dac4d0ec0006d4458a914f5acca0803e414aa9131785f5bdea7442267062d22ced7f5880230f06d179f05ddc46  emacs-lingva-de11bdbd90c73106ce272e60ac030d2a9a2d5f5b.tar.gz
"
