# Contributor: Bart Ribbers <bribbers@disroot.org>
# Maintainer: Bart Ribbers <bribbers@disroot.org>
pkgname=waydroid-sensors
pkgver=0.2.0
pkgrel=2
pkgdesc="Waydroid sensors"
url="https://github.com/waydroid/waydroid-sensors"
arch="all"
license="GPL-3.0-only"
depends="sensorfw"
makedepends="
	cmake
	glib-dev
	libgbinder-dev
	libglibutil-dev
	samurai
	"
subpackages="$pkgname-systemd"
source="https://github.com/waydroid/waydroid-sensors/archive/$pkgver/waydroid-sensors-$pkgver.tar.gz
	systemd-service.patch
	"
options="!check" # No tests

build() {
	cmake3.5 -B build \
		-DCMAKE_BUILD_TYPE=None \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
0371f4a204127624c95aabf5139efc53ea53878b639bb2868d23f2e34a559ffaea54dcc157e8fc1e200444806beb6d6b914660997a9c7d8cf4e616889d85d0af  waydroid-sensors-0.2.0.tar.gz
2d9f627f2bdca817825b2a8817bf98238e4e1eff6cf0398381f28659b708e039d468cb09a48787ee48a5d0d112f3dc6e0c21cfee945953ba6d5fdc5345d891b6  systemd-service.patch
"
