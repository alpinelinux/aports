# Contributor: Bart Ribbers <bribbers@disroot.org>
# Maintainer: Bart Ribbers <bribbers@disroot.org>
pkgname=waydroid-sensors
pkgver=0.2.0
pkgrel=1
pkgdesc="Waydroid sensors"
url="https://github.com/waydroid/waydroid-sensors"
arch="all"
license="GPL-3.0-only"
depends="sensorfw"
makedepends="
	cmake
	glib-dev
	libgbinder-dev
	libglibutil-dev
	samurai
	"
subpackages="$pkgname-systemd"
source="https://github.com/waydroid/waydroid-sensors/archive/$pkgver/waydroid-sensors-$pkgver.tar.gz
	systemd-service.patch
	"
options="!check" # No tests

build() {
	cmake3.5 -B build \
		-DCMAKE_BUILD_TYPE=None \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
0371f4a204127624c95aabf5139efc53ea53878b639bb2868d23f2e34a559ffaea54dcc157e8fc1e200444806beb6d6b914660997a9c7d8cf4e616889d85d0af  waydroid-sensors-0.2.0.tar.gz
c0a382257c17d0cd814be86c897eb27fb537d0fef835cf8188d29d60bf02a509908b44d9ed1c85b84523cb91299577c985e0ca98492251a75d1b0b7f05f5a72d  systemd-service.patch
"
