# Automatically generated by apkbuild-cpan, template 1
# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=perl-class-load-xs
_pkgreal=Class-Load-XS
pkgver=0.09
pkgrel=1
pkgdesc="XS implementation of parts of Class::Load"
url="http://search.cpan.org/dist/Class-Load-XS/"
arch="all"
license="Artistic-2"
cpandepends="perl-class-load"
cpanmakedepends="  perl-test-requires perl-test-fatal perl-module-implementation "
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/E/ET/ETHER/$_pkgreal-$pkgver.tar.gz"

_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	make && make test
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="98eb8daf7f23c872fc7f503a7e34f598  Class-Load-XS-0.09.tar.gz"
sha256sums="bbec3b916df9e48827950a297bf53ef4dd59ed6376142099504307a42b553baa  Class-Load-XS-0.09.tar.gz"
sha512sums="9b24637cf7b035ba369f05e42c0bd5a8590e001f2395b46df078635a50bb3df58ad57850be0010d092ae2530d9a545bbcc5f0055f6ae7f166c93905c022d469d  Class-Load-XS-0.09.tar.gz"
