# Automatically generated by apkbuild-cpan, template 1
# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=perl-class-factory-util
_pkgreal=Class-Factory-Util
pkgver=1.7
pkgrel=0
pkgdesc="Perl module for Class-Factory-Util"
url="http://search.cpan.org/dist/Class-Factory-Util/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends=""
cpanmakedepends="perl-module-build perl-test-pod-coverage perl-test-pod"
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/D/DR/DROLSKY/$_pkgreal-$pkgver.tar.gz"
builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	default_prepare || return 1

	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make && make test
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="aebd79da361b676a7ecd3245fc3d1b3f  Class-Factory-Util-1.7.tar.gz"
sha256sums="6c516b445b44f87363fb3a148431d31e9ecb5e6f21fb6481c89b2406b6692e26  Class-Factory-Util-1.7.tar.gz"
sha512sums="8b8af36f1100805a9f59bd8745bc41455ebc20af9ff9cedd8a36370f66e0fb63a761918ae4f268d5546aeeecdd4ca7de448aca36e84f27b8f0932f34db68982e  Class-Factory-Util-1.7.tar.gz"
