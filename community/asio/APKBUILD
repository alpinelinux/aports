# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=asio
pkgver=1.12.0
_ver=${pkgver//./-}
pkgrel=2
pkgdesc="A cross-platform C++ library for network programming"
url="https://think-async.com"
arch="all"
license="BSL-1.0"
depends=""
depends_dev="boost-dev libressl-dev"
makedepends="$depends_dev autoconf automake libtool"
install=""
subpackages="$pkgname-dev"
source="http://downloads.sourceforge.net/sourceforge/asio/$pkgname-$pkgver.tar.bz2"

builddir="$srcdir/$pkgname-$pkgver"

prepare() {
	cd "$builddir"
	update_config_sub
}

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--mandir=/usr/share/man \
		--enable-shared
	make
}

check() {
	cd "$builddir"
	make check
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="30e31f09831a7119611c517bdfeda3489e900052460b6c1793a7e5a7587723db22525af8475d5b95ef777fc17d1f041fdf0faaae05f4d8c7902c58b90f8f6ed2  asio-1.12.0.tar.bz2"
