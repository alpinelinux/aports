# Contributor: Bart≈Çomiej Piotrowski <nospam@bpiotrowski.pl>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=vnstat
pkgver=2.4
pkgrel=0
pkgdesc="Console-based network traffic monitor"
url="http://humdi.net/vnstat"
arch="all"
license="GPL-2.0-or-later"
install="$pkgname.pre-install"
makedepends="sqlite-dev"
subpackages="$pkgname-doc $pkgname-openrc"
source="http://humdi.net/vnstat/vnstat-$pkgver.tar.gz
	vnstatd.initd
	vnstatd.confd"

build() {
	./configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info
	make
}

package() {
	make DESTDIR="$pkgdir" install

	install -D -m0755 "$srcdir"/vnstatd.initd \
		"$pkgdir"/etc/init.d/vnstatd
	install -D -m0644 "$srcdir"/vnstatd.confd \
		"$pkgdir"/etc/conf.d/vnstatd

	install -D -m0755 examples/vnstat.cgi \
		"$pkgdir"/usr/share/doc/vnstat/examples/vnstat.cgi
}

sha512sums="e2f23b375a6afcd9e51770769c741d3a5fc139aec22e535bc98da09e4a6677a0c820fb04727a79f23569be29f031e9ee897b6d569146c42ed917f5f83399b7b6  vnstat-2.4.tar.gz
2aba0dd07cd347b711e9aa1becf170fe24dfafe67adc972b70c90767cb23d930e77b705f24186e20581716b12bec4f86762546c126f6cff4d9d23a2048c40a63  vnstatd.initd
d645817913d5b52e928561b3d6a0e869d8ae5db81b97af91c1ebfc6a8cd2df666c1653e6dc5f91c0a890033a89692f77eaf081c1cae5590446c69a70ea263946  vnstatd.confd"
