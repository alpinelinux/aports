# Contributor: Alan Lacerda <alacerda@alpinelinux.org>
# Maintainer: Alan Lacerda <alacerda@alpinelinux.org>
pkgname=libmateweather
pkgver=1.28.0
pkgrel=1
pkgdesc="Library to access weather information from online services for numerous locations"
url="https://github.com/mate-desktop/libmateweather"
arch="all"
license="GPL-2.0-or-later"
depends="mate-common"
makedepends="
	autoconf
	automake
	autoconf-archive
	gtk+3.0-dev
	intltool
	libsoup3-dev
	libtool
	libxml2-utils
	tzdata
	gtk-doc
	"
subpackages="$pkgname-dev $pkgname-doc $pkgname-lang"
source="https://pub.mate-desktop.org/releases/${pkgver%.*}/libmateweather-$pkgver.tar.xz
	libsoup3.patch
	"

prepare() {
	default_prepare
	# libsoup3.patch
	autoreconf -vfi
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--with-zoneinfo-dir
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
ee89bd159beba2893b334fb603de2b852d97c382670628d8892eb2a74907950afe485455218ae4c6dc41338218b67dc78003da8ace61d1952451ae55e7e5e6d0  libmateweather-1.28.0.tar.xz
df22e9ed417282abfe9372ed1073b5741cf08f2de7e7e69b0eb7fed666828a1d68ab8a653bc93f1091e1b1d7fb5000105641214a125da7685c37fd3543385b5f  libsoup3.patch
"
