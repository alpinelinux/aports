# Contributor: Fabian Affolter <fabian@affolter-engineering.ch>
# Maintainer: Fabian Affolter <fabian@affolter-engineering.ch>
pkgname=chntpw
pkgver=140201
pkgrel=1
pkgdesc="Change passwords in Windows SAM files"
url="http://pogostick.net/~pnh/ntpasswd/"
arch="all"
license="GPL-2.0"
makedepends="libressl-dev"
source="http://pogostick.net/~pnh/ntpasswd/$pkgname-source-$pkgver.zip
	stdint.patch"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	make CC="${CC:-gcc}" CFLAGS="$CFLAGS -DUSEOPENSSL" LIBS="-lcrypto" \
		chntpw cpnt reged
}

package() {
	cd "$builddir"
	install -d "$pkgdir"/usr/bin
	install chntpw cpnt reged "$pkgdir"/usr/bin/
}

sha512sums="a26d747f6e077d1bb3e9b8077781f8c37dd978e07b7426495862f15c9004572b706c34736fc4d1ed8856b1a43335d726b4d87c688f7f9a11fd6cc3a74d71a7fa  chntpw-source-140201.zip
3ed747119d125b3e4dc8dbb2a697d411ef2f4403ec84c60177d8e35389bc695bb0c65f7aa4314ca320ffceec87e60e2a0c81d52544b90463fe23aa7d4a50df67  stdint.patch"
