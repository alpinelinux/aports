From eca03217c09cd6317047bc422d6790f8738562bf Mon Sep 17 00:00:00 2001
From: Seong Yong-ju <sei40kr@gmail.com>
Date: Wed, 24 Dec 2025 13:34:56 +0900
Subject: [PATCH] feat: align menu key and label spacing (#476)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

* feat: align menu key and label spacing

Improve menu display by aligning keys and labels in columns. Keys
are right-padded to match the longest key in each column.

When multiple key bindings are grouped for the same operation (e.g.,
"k/up" or "ctrl+k/ctrl+up"), the maximum width is calculated based
on the combined string length.

Before:
```
 Y Show Refs              b Branch
 k/up Up                  c Commit
 ctrl+k/ctrl+up Up line   h/? Help
```

After:
```
 Y              Show Refs   b   Branch
 k/up           Up          c   Commit
 ctrl+k/ctrl+up Up line     h/? Help
```

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>

* refactor: extract duplicate padding logic in menu rendering

- Extract key string formatting into helper functions with shared macro
- Extract padding calculation into dedicated function
- Eliminate duplicate iteration by collecting grouped bindings once
- Improve code maintainability while preserving functionality

* refactor: use layout system for menu key-label alignment

Replace manual padding calculation with layout system's automatic
column width alignment. Introduces `layout_keybinds_table` helper
function that uses horizontal layout with two vertical columns
(keys and labels) separated by gap(1).

Key improvements:
- Removed `calc_padding` function and max width calculations
- Use `partition` to efficiently split bindings by type
- Use `into_iter` instead of `iter` where ownership can be moved
- Extract common key-value table pattern into helper function
- Let layout system handle column alignment automatically
- Fix `layout_line` to properly merge Line and Span styles

The visual output remains unchanged.

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>

* fix: update Line iteration to use IntoIterator

Use Line's IntoIterator implementation instead of directly accessing
the spans field, following ratatui API updates.

---------

Co-authored-by: Claude Sonnet 4.5 <noreply@anthropic.com>
---
 src/git/parse/status/mod.rs                   |   6 +-
 src/tests/remote.rs                           |   2 +-
 .../gitu__tests__branch__branch_menu.snap     |   8 +-
 .../gitu__tests__commit__commit_menu.snap     |  16 +-
 ...enu_existing_push_remote_and_upstream.snap |  12 +-
 ..._fetch_menu_no_remote_or_upstream_set.snap |  12 +-
 .../snapshots/gitu__tests__help_menu.snap     |  30 +--
 .../gitu__tests__log__grep_prompt.snap        |   8 +-
 .../gitu__tests__log__grep_set_example.snap   |   8 +-
 .../gitu__tests__log__limit_prompt.snap       |   8 +-
 .../gitu__tests__log__limit_set_10.snap       |   8 +-
 .../gitu__tests__merge__merge_menu.snap       |  10 +-
 ...enu_existing_push_remote_and_upstream.snap |  10 +-
 ...__pull_menu_no_remote_or_upstream_set.snap |  10 +-
 ...__tests__pull__pull_setup_push_remote.snap |  10 +-
 ...itu__tests__pull__pull_setup_upstream.snap |  10 +-
 ...ull__pull_setup_upstream_same_as_head.snap |  10 +-
 ...push__open_push_menu_after_dash_input.snap |  12 +-
 ...enu_existing_push_remote_and_upstream.snap |  12 +-
 ...__push_menu_no_remote_or_upstream_set.snap |  12 +-
 ...__tests__push__push_setup_push_remote.snap |  12 +-
 ...itu__tests__push__push_setup_upstream.snap |  12 +-
 ...ush__push_setup_upstream_same_as_head.snap |  12 +-
 .../gitu__tests__rebase__rebase_menu.snap     |  18 +-
 .../gitu__tests__remote__remote_menu.snap     |   6 +-
 .../gitu__tests__reset__reset_menu.snap       |   6 +-
 .../snapshots/gitu__tests__revert_menu.snap   |  10 +-
 .../gitu__tests__stash__stash_menu.snap       |  14 +-
 src/ui/menu.rs                                | 207 ++++++++++--------
 29 files changed, 268 insertions(+), 243 deletions(-)

diff --git a/src/git/parse/status/mod.rs b/src/git/parse/status/mod.rs
index 5595ca1..8929d79 100644
--- a/src/git/parse/status/mod.rs
+++ b/src/git/parse/status/mod.rs
@@ -703,10 +703,12 @@ R  old.rs -> new.rs
             for c2 in &status_chars {
                 input.push(*c1);
                 input.push(*c2);
+                let c1_str = c1.to_string();
+                let c2_str = c2.to_string();
                 input.push_str(&format!(
                     " file_{}_{}.txt\n",
-                    if *c1 == ' ' { "space" } else { &c1.to_string() },
-                    if *c2 == ' ' { "space" } else { &c2.to_string() }
+                    if *c1 == ' ' { "space" } else { &c1_str },
+                    if *c2 == ' ' { "space" } else { &c2_str }
                 ));
                 count += 1;
             }
diff --git a/src/tests/remote.rs b/src/tests/remote.rs
index 7a81a50..0ac14f5 100644
--- a/src/tests/remote.rs
+++ b/src/tests/remote.rs
@@ -1,6 +1,6 @@
 use git2::{Buf, Error, Repository};
 
-use crate::{git::remote::*, repo_setup_clone, setup_clone, tests::helpers::RepoTestContext};
+use crate::{git::remote::*, repo_setup_clone, tests::helpers::RepoTestContext};
 
 use super::*;
 
diff --git a/src/tests/snapshots/gitu__tests__branch__branch_menu.snap b/src/tests/snapshots/gitu__tests__branch__branch_menu.snap
index fbde699..c93124f 100644
--- a/src/tests/snapshots/gitu__tests__branch__branch_menu.snap
+++ b/src/tests/snapshots/gitu__tests__branch__branch_menu.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
  Branch                                                                         |
- b Checkout branch/revision                                                     |
- c Checkout new branch                                                          |
- s Spinoff branch                                                               |
- K Delete branch                                                                |
+ b     Checkout branch/revision                                                 |
+ c     Checkout new branch                                                      |
+ s     Spinoff branch                                                           |
+ K     Delete branch                                                            |
  q/esc Quit/Close                                                               |
 styles_hash: a06534dee707ba43
diff --git a/src/tests/snapshots/gitu__tests__commit__commit_menu.snap b/src/tests/snapshots/gitu__tests__commit__commit_menu.snap
index f366ab9..c0663a3 100644
--- a/src/tests/snapshots/gitu__tests__commit__commit_menu.snap
+++ b/src/tests/snapshots/gitu__tests__commit__commit_menu.snap
@@ -15,11 +15,11 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Commit                Arguments                                                |
- c Commit              -a Stage all modified and deleted files (--all)          |
- a amend               -e Allow empty commit (--allow-empty)                    |
- e extend              -n Disable hooks (--no-verify)                           |
- q/esc Quit/Close      -R Claim authorship and reset author date (--reset-author|
-                       -s Add Signed-off-by line (--signoff)                    |
-                       -v Show diff of changes to be committed (--verbose)      |
-styles_hash: ba02efdf8fdd8ed9
+ Commit             Arguments                                                   |
+ c     Commit       -a Stage all modified and deleted files (--all)             |
+ a     amend        -e Allow empty commit (--allow-empty)                       |
+ e     extend       -n Disable hooks (--no-verify)                              |
+ q/esc Quit/Close   -R Claim authorship and reset author date (--reset-author)  |
+                    -s Add Signed-off-by line (--signoff)                       |
+                    -v Show diff of changes to be committed (--verbose)         |
+styles_hash: 76a5f2a964e77056
diff --git a/src/tests/snapshots/gitu__tests__fetch__fetch_menu_existing_push_remote_and_upstream.snap b/src/tests/snapshots/gitu__tests__fetch__fetch_menu_existing_push_remote_and_upstream.snap
index 9a15445..10e7afa 100644
--- a/src/tests/snapshots/gitu__tests__fetch__fetch_menu_existing_push_remote_and_upstream.snap
+++ b/src/tests/snapshots/gitu__tests__fetch__fetch_menu_existing_push_remote_and_upstream.snap
@@ -16,10 +16,10 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Fetch                   Arguments                                              |
- a from all remotes      -p Prune deleted branches (--prune)                    |
- p from origin           -t Fetch all tags (--tags)                             |
- u from origin                                                                  |
- e from elsewhere                                                               |
+ Fetch                    Arguments                                             |
+ a     from all remotes   -p Prune deleted branches (--prune)                   |
+ p     from origin        -t Fetch all tags (--tags)                            |
+ u     from origin                                                              |
+ e     from elsewhere                                                           |
  q/esc Quit/Close                                                               |
-styles_hash: 18a7cc7f75e12761
+styles_hash: 17731e0c232c3b88
diff --git a/src/tests/snapshots/gitu__tests__fetch__fetch_menu_no_remote_or_upstream_set.snap b/src/tests/snapshots/gitu__tests__fetch__fetch_menu_no_remote_or_upstream_set.snap
index 8022425..3bd4e8e 100644
--- a/src/tests/snapshots/gitu__tests__fetch__fetch_menu_no_remote_or_upstream_set.snap
+++ b/src/tests/snapshots/gitu__tests__fetch__fetch_menu_no_remote_or_upstream_set.snap
@@ -16,10 +16,10 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Fetch                                Arguments                                 |
- a from all remotes                   -p Prune deleted branches (--prune)       |
- p from pushRemote, setting that      -t Fetch all tags (--tags)                |
- u from upstream, setting that                                                  |
- e from elsewhere                                                               |
+ Fetch                                 Arguments                                |
+ a     from all remotes                -p Prune deleted branches (--prune)      |
+ p     from pushRemote, setting that   -t Fetch all tags (--tags)               |
+ u     from upstream, setting that                                              |
+ e     from elsewhere                                                           |
  q/esc Quit/Close                                                               |
-styles_hash: 231fc72475674896
+styles_hash: fbb28b712f78e61e
diff --git a/src/tests/snapshots/gitu__tests__help_menu.snap b/src/tests/snapshots/gitu__tests__help_menu.snap
index 86dbb36..474e2a7 100644
--- a/src/tests/snapshots/gitu__tests__help_menu.snap
+++ b/src/tests/snapshots/gitu__tests__help_menu.snap
@@ -8,18 +8,18 @@ expression: ctx.redact_buffer()
  Recent commits                                                                 |
  b66a0bf main origin/main add initial-file                                      |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Help                            Submenu    On branch main                      |
- Y Show Refs                     b Branch   tab Fold                            |
- k/up Up                         c Commit                                       |
- j/down Down                     f Fetch                                        |
- ctrl+k/ctrl+up Up line          h/? Help                                       |
- ctrl+j/ctrl+down Down line      l Log                                          |
- alt+k/alt+up Prev section       m Merge                                        |
- alt+j/alt+down Next section     M Remote                                       |
- alt+h/alt+left Parent section   F Pull                                         |
- ctrl+u Half page up             P Push                                         |
- ctrl+d Half page down           r Rebase                                       |
- g Refresh                       X Reset                                        |
- q/esc Quit/Close                V Revert                                       |
-                                 z Stash                                        |
-styles_hash: e5088595db7cec4a
+ Help                              Submenu      On branch main                  |
+ Y                Show Refs        b   Branch   tab Fold                        |
+ k/up             Up               c   Commit                                   |
+ j/down           Down             f   Fetch                                    |
+ ctrl+k/ctrl+up   Up line          h/? Help                                     |
+ ctrl+j/ctrl+down Down line        l   Log                                      |
+ alt+k/alt+up     Prev section     m   Merge                                    |
+ alt+j/alt+down   Next section     M   Remote                                   |
+ alt+h/alt+left   Parent section   F   Pull                                     |
+ ctrl+u           Half page up     P   Push                                     |
+ ctrl+d           Half page down   r   Rebase                                   |
+ g                Refresh          X   Reset                                    |
+ q/esc            Quit/Close       V   Revert                                   |
+                                   z   Stash                                    |
+styles_hash: 43322e31c74e471
diff --git a/src/tests/snapshots/gitu__tests__log__grep_prompt.snap b/src/tests/snapshots/gitu__tests__log__grep_prompt.snap
index ddf980f..cef1f07 100644
--- a/src/tests/snapshots/gitu__tests__log__grep_prompt.snap
+++ b/src/tests/snapshots/gitu__tests__log__grep_prompt.snap
@@ -16,10 +16,10 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Log                   Arguments                                                |
- l current             -F Search messages (--grep)                              |
- o other               -n Limit number of commits (-n=256)                      |
+ Log                Arguments                                                   |
+ l     current      -F Search messages (--grep)                                 |
+ o     other        -n Limit number of commits (-n=256)                         |
  q/esc Quit/Close                                                               |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
 ? Search messages: â€º â–ˆ                                                          |
-styles_hash: 8bbd58cf95926e31
+styles_hash: 30915effaeaeb2e3
diff --git a/src/tests/snapshots/gitu__tests__log__grep_set_example.snap b/src/tests/snapshots/gitu__tests__log__grep_set_example.snap
index dafafb1..2bfcca8 100644
--- a/src/tests/snapshots/gitu__tests__log__grep_set_example.snap
+++ b/src/tests/snapshots/gitu__tests__log__grep_set_example.snap
@@ -18,8 +18,8 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Log                   Arguments                                                |
- l current             -F Search messages (--grep=example)                      |
- o other               -n Limit number of commits (-n=256)                      |
+ Log                Arguments                                                   |
+ l     current      -F Search messages (--grep=example)                         |
+ o     other        -n Limit number of commits (-n=256)                         |
  q/esc Quit/Close                                                               |
-styles_hash: 366dca045c7a9617
+styles_hash: 5877b9adb59fe24d
diff --git a/src/tests/snapshots/gitu__tests__log__limit_prompt.snap b/src/tests/snapshots/gitu__tests__log__limit_prompt.snap
index 4696bc0..cdca916 100644
--- a/src/tests/snapshots/gitu__tests__log__limit_prompt.snap
+++ b/src/tests/snapshots/gitu__tests__log__limit_prompt.snap
@@ -16,10 +16,10 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Log                   Arguments                                                |
- l current             -F Search messages (--grep)                              |
- o other               -n Limit number of commits (-n)                          |
+ Log                Arguments                                                   |
+ l     current      -F Search messages (--grep)                                 |
+ o     other        -n Limit number of commits (-n)                             |
  q/esc Quit/Close                                                               |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
 ? Limit number of commits (default 256): â€º â–ˆ                                    |
-styles_hash: b4309e2cafba9450
+styles_hash: 99ca458c7c196a27
diff --git a/src/tests/snapshots/gitu__tests__log__limit_set_10.snap b/src/tests/snapshots/gitu__tests__log__limit_set_10.snap
index 5e8e1ea..073a41d 100644
--- a/src/tests/snapshots/gitu__tests__log__limit_set_10.snap
+++ b/src/tests/snapshots/gitu__tests__log__limit_set_10.snap
@@ -18,8 +18,8 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Log                   Arguments                                                |
- l current             -F Search messages (--grep)                              |
- o other               -n Limit number of commits (-n=10)                       |
+ Log                Arguments                                                   |
+ l     current      -F Search messages (--grep)                                 |
+ o     other        -n Limit number of commits (-n=10)                          |
  q/esc Quit/Close                                                               |
-styles_hash: 24bffc7cbab76703
+styles_hash: 195bb974698466ed
diff --git a/src/tests/snapshots/gitu__tests__merge__merge_menu.snap b/src/tests/snapshots/gitu__tests__merge__merge_menu.snap
index 199aca3..9e38853 100644
--- a/src/tests/snapshots/gitu__tests__merge__merge_menu.snap
+++ b/src/tests/snapshots/gitu__tests__merge__merge_menu.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Merge                   Arguments                                              |
- m merge                 -f Fast-forward only (--ff-only)                       |
- a abort                 -n No fast-forward (--no-ff)                           |
- c continue                                                                     |
+ Merge                Arguments                                                 |
+ m       merge        -f Fast-forward only (--ff-only)                          |
+ a       abort        -n No fast-forward (--no-ff)                              |
+ c       continue                                                               |
  q/<esc> Quit/Close                                                             |
-styles_hash: 7181b0552cf22b20
+styles_hash: 7b86e45a0c70a078
diff --git a/src/tests/snapshots/gitu__tests__pull__pull_menu_existing_push_remote_and_upstream.snap b/src/tests/snapshots/gitu__tests__pull__pull_menu_existing_push_remote_and_upstream.snap
index f0efad3..4a334ac 100644
--- a/src/tests/snapshots/gitu__tests__pull__pull_menu_existing_push_remote_and_upstream.snap
+++ b/src/tests/snapshots/gitu__tests__pull__pull_menu_existing_push_remote_and_upstream.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Pull                    Arguments                                              |
- p from origin           -r Rebase local commits (--rebase)                     |
- u from origin/main                                                             |
- e from elsewhere                                                               |
+ Pull                     Arguments                                             |
+ p     from origin        -r Rebase local commits (--rebase)                    |
+ u     from origin/main                                                         |
+ e     from elsewhere                                                           |
  q/esc Quit/Close                                                               |
-styles_hash: 3f7c442ccf1f172a
+styles_hash: 921d63089e120af4
diff --git a/src/tests/snapshots/gitu__tests__pull__pull_menu_no_remote_or_upstream_set.snap b/src/tests/snapshots/gitu__tests__pull__pull_menu_no_remote_or_upstream_set.snap
index aece7e6..e9eb2ee 100644
--- a/src/tests/snapshots/gitu__tests__pull__pull_menu_no_remote_or_upstream_set.snap
+++ b/src/tests/snapshots/gitu__tests__pull__pull_menu_no_remote_or_upstream_set.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Pull                            Arguments                                      |
- p pushRemote, setting that      -r Rebase local commits (--rebase)             |
- u upstream, setting that                                                       |
- e from elsewhere                                                               |
+ Pull                             Arguments                                     |
+ p     pushRemote, setting that   -r Rebase local commits (--rebase)            |
+ u     upstream, setting that                                                   |
+ e     from elsewhere                                                           |
  q/esc Quit/Close                                                               |
-styles_hash: 6fd466ac1fbe9075
+styles_hash: c5e18172f3d27bf5
diff --git a/src/tests/snapshots/gitu__tests__pull__pull_setup_push_remote.snap b/src/tests/snapshots/gitu__tests__pull__pull_setup_push_remote.snap
index f0efad3..4a334ac 100644
--- a/src/tests/snapshots/gitu__tests__pull__pull_setup_push_remote.snap
+++ b/src/tests/snapshots/gitu__tests__pull__pull_setup_push_remote.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Pull                    Arguments                                              |
- p from origin           -r Rebase local commits (--rebase)                     |
- u from origin/main                                                             |
- e from elsewhere                                                               |
+ Pull                     Arguments                                             |
+ p     from origin        -r Rebase local commits (--rebase)                    |
+ u     from origin/main                                                         |
+ e     from elsewhere                                                           |
  q/esc Quit/Close                                                               |
-styles_hash: 3f7c442ccf1f172a
+styles_hash: 921d63089e120af4
diff --git a/src/tests/snapshots/gitu__tests__pull__pull_setup_upstream.snap b/src/tests/snapshots/gitu__tests__pull__pull_setup_upstream.snap
index ba66793..e5a25f5 100644
--- a/src/tests/snapshots/gitu__tests__pull__pull_setup_upstream.snap
+++ b/src/tests/snapshots/gitu__tests__pull__pull_setup_upstream.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Pull                            Arguments                                      |
- p pushRemote, setting that      -r Rebase local commits (--rebase)             |
- u from main                                                                    |
- e from elsewhere                                                               |
+ Pull                             Arguments                                     |
+ p     pushRemote, setting that   -r Rebase local commits (--rebase)            |
+ u     from main                                                                |
+ e     from elsewhere                                                           |
  q/esc Quit/Close                                                               |
-styles_hash: 3c9a2e6435b89607
+styles_hash: 7bc7b0fa946fd8ec
diff --git a/src/tests/snapshots/gitu__tests__pull__pull_setup_upstream_same_as_head.snap b/src/tests/snapshots/gitu__tests__pull__pull_setup_upstream_same_as_head.snap
index 90e2bcd..0670604 100644
--- a/src/tests/snapshots/gitu__tests__pull__pull_setup_upstream_same_as_head.snap
+++ b/src/tests/snapshots/gitu__tests__pull__pull_setup_upstream_same_as_head.snap
@@ -14,12 +14,12 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Pull                            Arguments                                      |
- p pushRemote, setting that      -r Rebase local commits (--rebase)             |
- u upstream, setting that                                                       |
- e from elsewhere                                                               |
+ Pull                             Arguments                                     |
+ p     pushRemote, setting that   -r Rebase local commits (--rebase)            |
+ u     upstream, setting that                                                   |
+ e     from elsewhere                                                           |
  q/esc Quit/Close                                                               |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
 $ git branch --set-upstream-to new-branch                                       |
 warning: not setting branch 'new-branch' as its own upstream                    |
-styles_hash: fb7ae43341290226
+styles_hash: 44bba4e4bc54ab4f
diff --git a/src/tests/snapshots/gitu__tests__push__open_push_menu_after_dash_input.snap b/src/tests/snapshots/gitu__tests__push__open_push_menu_after_dash_input.snap
index f1c477f..c6ce1b1 100644
--- a/src/tests/snapshots/gitu__tests__push__open_push_menu_after_dash_input.snap
+++ b/src/tests/snapshots/gitu__tests__push__open_push_menu_after_dash_input.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Push                            Arguments                                      |
- p pushRemote, setting that      -n Dry run (--dry-run)                         |
- u to origin/main                -F Force (--force)                             |
- e to elsewhere                  -f Force with lease (--force-with-lease)       |
- q/esc Quit/Close                -h Disable hooks (--no-verify)                 |
-styles_hash: d5c0d8b34b47a416
+ Push                             Arguments                                     |
+ p     pushRemote, setting that   -n Dry run (--dry-run)                        |
+ u     to origin/main             -F Force (--force)                            |
+ e     to elsewhere               -f Force with lease (--force-with-lease)      |
+ q/esc Quit/Close                 -h Disable hooks (--no-verify)                |
+styles_hash: 423a5e46d8d37364
diff --git a/src/tests/snapshots/gitu__tests__push__push_menu_existing_push_remote_and_upstream.snap b/src/tests/snapshots/gitu__tests__push__push_menu_existing_push_remote_and_upstream.snap
index 258df34..8999c23 100644
--- a/src/tests/snapshots/gitu__tests__push__push_menu_existing_push_remote_and_upstream.snap
+++ b/src/tests/snapshots/gitu__tests__push__push_menu_existing_push_remote_and_upstream.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Push                  Arguments                                                |
- p to origin           -n Dry run (--dry-run)                                   |
- u to origin/main      -F Force (--force)                                       |
- e to elsewhere        -f Force with lease (--force-with-lease)                 |
- q/esc Quit/Close      -h Disable hooks (--no-verify)                           |
-styles_hash: d9b340606014657c
+ Push                   Arguments                                               |
+ p     to origin        -n Dry run (--dry-run)                                  |
+ u     to origin/main   -F Force (--force)                                      |
+ e     to elsewhere     -f Force with lease (--force-with-lease)                |
+ q/esc Quit/Close       -h Disable hooks (--no-verify)                          |
+styles_hash: 48bf3603bf81dcbf
diff --git a/src/tests/snapshots/gitu__tests__push__push_menu_no_remote_or_upstream_set.snap b/src/tests/snapshots/gitu__tests__push__push_menu_no_remote_or_upstream_set.snap
index 2a8ee29..804af85 100644
--- a/src/tests/snapshots/gitu__tests__push__push_menu_no_remote_or_upstream_set.snap
+++ b/src/tests/snapshots/gitu__tests__push__push_menu_no_remote_or_upstream_set.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Push                            Arguments                                      |
- p pushRemote, setting that      -n Dry run (--dry-run)                         |
- u upstream, setting that        -F Force (--force)                             |
- e to elsewhere                  -f Force with lease (--force-with-lease)       |
- q/esc Quit/Close                -h Disable hooks (--no-verify)                 |
-styles_hash: 174f33b7dc00952a
+ Push                             Arguments                                     |
+ p     pushRemote, setting that   -n Dry run (--dry-run)                        |
+ u     upstream, setting that     -F Force (--force)                            |
+ e     to elsewhere               -f Force with lease (--force-with-lease)      |
+ q/esc Quit/Close                 -h Disable hooks (--no-verify)                |
+styles_hash: 116e27f679f6d5ff
diff --git a/src/tests/snapshots/gitu__tests__push__push_setup_push_remote.snap b/src/tests/snapshots/gitu__tests__push__push_setup_push_remote.snap
index 258df34..8999c23 100644
--- a/src/tests/snapshots/gitu__tests__push__push_setup_push_remote.snap
+++ b/src/tests/snapshots/gitu__tests__push__push_setup_push_remote.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Push                  Arguments                                                |
- p to origin           -n Dry run (--dry-run)                                   |
- u to origin/main      -F Force (--force)                                       |
- e to elsewhere        -f Force with lease (--force-with-lease)                 |
- q/esc Quit/Close      -h Disable hooks (--no-verify)                           |
-styles_hash: d9b340606014657c
+ Push                   Arguments                                               |
+ p     to origin        -n Dry run (--dry-run)                                  |
+ u     to origin/main   -F Force (--force)                                      |
+ e     to elsewhere     -f Force with lease (--force-with-lease)                |
+ q/esc Quit/Close       -h Disable hooks (--no-verify)                          |
+styles_hash: 48bf3603bf81dcbf
diff --git a/src/tests/snapshots/gitu__tests__push__push_setup_upstream.snap b/src/tests/snapshots/gitu__tests__push__push_setup_upstream.snap
index 100d8f1..f0f52b2 100644
--- a/src/tests/snapshots/gitu__tests__push__push_setup_upstream.snap
+++ b/src/tests/snapshots/gitu__tests__push__push_setup_upstream.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Push                            Arguments                                      |
- p pushRemote, setting that      -n Dry run (--dry-run)                         |
- u to main                       -F Force (--force)                             |
- e to elsewhere                  -f Force with lease (--force-with-lease)       |
- q/esc Quit/Close                -h Disable hooks (--no-verify)                 |
-styles_hash: c2f02a3867e13cb7
+ Push                             Arguments                                     |
+ p     pushRemote, setting that   -n Dry run (--dry-run)                        |
+ u     to main                    -F Force (--force)                            |
+ e     to elsewhere               -f Force with lease (--force-with-lease)      |
+ q/esc Quit/Close                 -h Disable hooks (--no-verify)                |
+styles_hash: c595ed9845173179
diff --git a/src/tests/snapshots/gitu__tests__push__push_setup_upstream_same_as_head.snap b/src/tests/snapshots/gitu__tests__push__push_setup_upstream_same_as_head.snap
index b716cbe..f5a43dc 100644
--- a/src/tests/snapshots/gitu__tests__push__push_setup_upstream_same_as_head.snap
+++ b/src/tests/snapshots/gitu__tests__push__push_setup_upstream_same_as_head.snap
@@ -14,12 +14,12 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Push                            Arguments                                      |
- p pushRemote, setting that      -n Dry run (--dry-run)                         |
- u upstream, setting that        -F Force (--force)                             |
- e to elsewhere                  -f Force with lease (--force-with-lease)       |
- q/esc Quit/Close                -h Disable hooks (--no-verify)                 |
+ Push                             Arguments                                     |
+ p     pushRemote, setting that   -n Dry run (--dry-run)                        |
+ u     upstream, setting that     -F Force (--force)                            |
+ e     to elsewhere               -f Force with lease (--force-with-lease)      |
+ q/esc Quit/Close                 -h Disable hooks (--no-verify)                |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
 $ git branch --set-upstream-to new-branch                                       |
 warning: not setting branch 'new-branch' as its own upstream                    |
-styles_hash: e85f70646d7d210
+styles_hash: d888c8e5e79603b4
diff --git a/src/tests/snapshots/gitu__tests__rebase__rebase_menu.snap b/src/tests/snapshots/gitu__tests__rebase__rebase_menu.snap
index 2aaf700..beb539b 100644
--- a/src/tests/snapshots/gitu__tests__rebase__rebase_menu.snap
+++ b/src/tests/snapshots/gitu__tests__rebase__rebase_menu.snap
@@ -14,12 +14,12 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Rebase                Arguments                                                |
- a abort               -a Autosquash (--autosquash)                             |
- c continue            -A Autostash (--autostash)                               |
- e onto elsewhere      -d Lie about committer date (--committer-date-is-author-d|
- q/esc Quit/Close      -i Interactive (--interactive)                           |
-                       -k Keep empty commits (--keep-empty)                     |
-                       -h Disable hooks (--no-verify)                           |
-                       -p Preserve merges (--preserve-merges)                   |
-styles_hash: d478154e8488a758
+ Rebase                 Arguments                                               |
+ a     abort            -a Autosquash (--autosquash)                            |
+ c     continue         -A Autostash (--autostash)                              |
+ e     onto elsewhere   -d Lie about committer date (--committer-date-is-author-|
+ q/esc Quit/Close       -i Interactive (--interactive)                          |
+                        -k Keep empty commits (--keep-empty)                    |
+                        -h Disable hooks (--no-verify)                          |
+                        -p Preserve merges (--preserve-merges)                  |
+styles_hash: c2a795da9f9636c1
diff --git a/src/tests/snapshots/gitu__tests__remote__remote_menu.snap b/src/tests/snapshots/gitu__tests__remote__remote_menu.snap
index bd9d106..2c30382 100644
--- a/src/tests/snapshots/gitu__tests__remote__remote_menu.snap
+++ b/src/tests/snapshots/gitu__tests__remote__remote_menu.snap
@@ -18,8 +18,8 @@ expression: ctx.redact_buffer()
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
  Remote                                                                         |
- a add remote                                                                   |
- K remove remote                                                                |
- r rename remote                                                                |
+ a     add remote                                                               |
+ K     remove remote                                                            |
+ r     rename remote                                                            |
  q/esc Quit/Close                                                               |
 styles_hash: f68bba68cc2d8ad6
diff --git a/src/tests/snapshots/gitu__tests__reset__reset_menu.snap b/src/tests/snapshots/gitu__tests__reset__reset_menu.snap
index 920b36d..cb43969 100644
--- a/src/tests/snapshots/gitu__tests__reset__reset_menu.snap
+++ b/src/tests/snapshots/gitu__tests__reset__reset_menu.snap
@@ -18,8 +18,8 @@ expression: ctx.redact_buffer()
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
  Reset                                                                          |
- s soft                                                                         |
- m mixed                                                                        |
- h hard                                                                         |
+ s     soft                                                                     |
+ m     mixed                                                                    |
+ h     hard                                                                     |
  q/esc Quit/Close                                                               |
 styles_hash: f5d50e0a53ae7611
diff --git a/src/tests/snapshots/gitu__tests__revert_menu.snap b/src/tests/snapshots/gitu__tests__revert_menu.snap
index 8b4f7bb..60a36e9 100644
--- a/src/tests/snapshots/gitu__tests__revert_menu.snap
+++ b/src/tests/snapshots/gitu__tests__revert_menu.snap
@@ -17,9 +17,9 @@ expression: ctx.redact_buffer()
                                                                                 |
                                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
- Revert                  Arguments                                              |
- a Abort                 -e Edit commit message (--edit)                        |
- c Continue              -E Don't edit commit message (--no-edit)               |
- V Revert commit(s)      -s Add Signed-off-by lines (--signoff)                 |
+ Revert                   Arguments                                             |
+ a     Abort              -e Edit commit message (--edit)                       |
+ c     Continue           -E Don't edit commit message (--no-edit)              |
+ V     Revert commit(s)   -s Add Signed-off-by lines (--signoff)                |
  q/esc Quit/Close                                                               |
-styles_hash: 2ab86e64ac5e7f58
+styles_hash: 64dda6a1259ae722
diff --git a/src/tests/snapshots/gitu__tests__stash__stash_menu.snap b/src/tests/snapshots/gitu__tests__stash__stash_menu.snap
index 9a0923f..87c7961 100644
--- a/src/tests/snapshots/gitu__tests__stash__stash_menu.snap
+++ b/src/tests/snapshots/gitu__tests__stash__stash_menu.snap
@@ -14,12 +14,12 @@ expression: ctx.redact_buffer()
  Recent commits                                                                 |
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
  Stash                 Arguments                                                |
- z both                -a Also save untracked and ignored files (--all)         |
- a apply               -u Also save untracked files (--include-untracked)       |
- i index                                                                        |
- w worktree                                                                     |
- x keeping index                                                                |
- p pop                                                                          |
- k drop                                                                         |
+ z     both            -a Also save untracked and ignored files (--all)         |
+ a     apply           -u Also save untracked files (--include-untracked)       |
+ i     index                                                                    |
+ w     worktree                                                                 |
+ x     keeping index                                                            |
+ p     pop                                                                      |
+ k     drop                                                                     |
  q/esc Quit/Close                                                               |
 styles_hash: 4b344b24bf22a0ea
diff --git a/src/ui/menu.rs b/src/ui/menu.rs
index db80854..78488d5 100644
--- a/src/ui/menu.rs
+++ b/src/ui/menu.rs
@@ -23,22 +23,12 @@ pub(crate) fn layout_menu<'a>(layout: &mut UiTree<'a>, state: &'a State, width:
     let style = &config.style;
 
     let arg_binds = config.bindings.arg_list(pending).collect::<Vec<_>>();
-
-    let non_target_binds = config
+    let (target_binds, non_target_binds): (Vec<_>, Vec<_>) = config
         .bindings
         .list(&pending.menu)
-        .filter(|keybind| !keybind.op.clone().implementation().is_target_op())
-        .collect::<Vec<_>>();
-
-    let menus = non_target_binds
-        .iter()
-        .filter(|bind| matches!(bind.op, Op::OpenMenu(_)))
-        .collect::<Vec<_>>();
-
-    let target_binds = config
-        .bindings
-        .list(&pending.menu)
-        .filter(|keybind| keybind.op.clone().implementation().is_target_op())
+        .partition(|keybind| keybind.op.clone().implementation().is_target_op());
+    let target_binds: Vec<_> = target_binds
+        .into_iter()
         .filter(|keybind| {
             keybind
                 .op
@@ -47,7 +37,16 @@ pub(crate) fn layout_menu<'a>(layout: &mut UiTree<'a>, state: &'a State, width:
                 .get_action(&item.data)
                 .is_some()
         })
-        .collect::<Vec<_>>();
+        .collect();
+    let (menu_binds, non_menu_binds): (Vec<_>, Vec<_>) = non_target_binds
+        .into_iter()
+        .chunk_by(|bind| &bind.op)
+        .into_iter()
+        .map(|(op, binds)| {
+            let binds: Vec<_> = binds.collect();
+            (op, binds)
+        })
+        .partition(|(op, _binds)| matches!(op, Op::OpenMenu(_)));
 
     let line = item.to_line(Arc::clone(&config));
     let separator_style = Style::from(&style.separator);
@@ -56,104 +55,128 @@ pub(crate) fn layout_menu<'a>(layout: &mut UiTree<'a>, state: &'a State, width:
         ui::repeat_chars(layout, width, ui::DASHES, separator_style);
 
         layout.horizontal(None, OPTS.gap(3).pad(1), |layout| {
-            layout.vertical(None, OPTS, |layout| {
-                layout_line(
-                    layout,
-                    Line::styled(format!("{}", pending.menu), &style.menu.heading),
-                );
-
-                for (op, binds) in non_target_binds
-                    .iter()
-                    .chunk_by(|bind| &bind.op)
-                    .into_iter()
-                    .filter(|(op, _binds)| !matches!(op, Op::OpenMenu(_)))
-                {
-                    super::layout_line(
+            // Column 1: Main menu commands
+            if !non_menu_binds.is_empty() {
+                layout.vertical(None, OPTS, |layout| {
+                    layout_line(
                         layout,
-                        Line::from(vec![
-                            Span::styled(
-                                binds.into_iter().map(|bind| &bind.raw).join("/"),
-                                &style.menu.key,
-                            ),
-                            Span::styled(
-                                format!(" {}", op.clone().implementation().display(state)),
-                                Style::new(),
-                            ),
-                        ]),
+                        Line::styled(format!("{}", pending.menu), &style.menu.heading),
                     );
-                }
-            });
 
-            layout.vertical(None, OPTS, |layout| {
-                if !menus.is_empty() {
-                    super::layout_line(layout, Line::styled("Submenu", &style.menu.heading));
-                }
+                    layout_keybinds_table(
+                        layout,
+                        non_menu_binds
+                            .into_iter()
+                            .map(|(op, binds)| {
+                                (
+                                    Line::styled(
+                                        binds.iter().map(|bind| bind.raw.as_str()).join("/"),
+                                        &style.menu.key,
+                                    ),
+                                    Line::raw(op.clone().implementation().display(state)),
+                                )
+                            })
+                            .collect(),
+                    );
+                });
+            }
 
-                for (op, binds) in menus.iter().chunk_by(|bind| &bind.op).into_iter() {
-                    let Op::OpenMenu(menu) = op else {
-                        unreachable!();
-                    };
+            // Column 2: Submenus
+            if !menu_binds.is_empty() {
+                layout.vertical(None, OPTS, |layout| {
+                    layout_line(layout, Line::styled("Submenu", &style.menu.heading));
 
-                    super::layout_line(
+                    layout_keybinds_table(
                         layout,
-                        Line::from(vec![
-                            Span::styled(
-                                binds.into_iter().map(|bind| &bind.raw).join("/"),
-                                &style.menu.key,
-                            ),
-                            Span::styled(format!(" {menu}"), Style::new()),
-                        ]),
+                        menu_binds
+                            .into_iter()
+                            .map(|(op, binds)| {
+                                let Op::OpenMenu(menu) = op else {
+                                    unreachable!();
+                                };
+                                (
+                                    Line::styled(
+                                        binds.iter().map(|bind| bind.raw.as_str()).join("/"),
+                                        &style.menu.key,
+                                    ),
+                                    Line::raw(menu.to_string()),
+                                )
+                            })
+                            .collect(),
                     );
-                }
-            });
+                });
+            }
 
+            // Column 3: Target commands and arguments
             layout.vertical(None, OPTS, |layout| {
                 if !target_binds.is_empty() {
-                    super::layout_line(layout, line);
-                }
+                    layout_line(layout, line);
 
-                for bind in target_binds {
-                    super::layout_line(
+                    layout_keybinds_table(
                         layout,
-                        Line::from(vec![
-                            Span::styled(bind.raw.clone(), &style.menu.key),
-                            Span::styled(
-                                format!(" {}", bind.op.clone().implementation().display(state)),
-                                Style::new(),
-                            ),
-                        ]),
+                        target_binds
+                            .into_iter()
+                            .map(|bind| {
+                                (
+                                    Line::styled(bind.raw.clone(), &style.menu.key),
+                                    Line::raw(bind.op.clone().implementation().display(state)),
+                                )
+                            })
+                            .collect(),
                     );
                 }
 
                 if !arg_binds.is_empty() {
-                    super::layout_line(layout, Line::styled("Arguments", &style.menu.heading));
-                }
-
-                for bind in arg_binds {
-                    let Op::ToggleArg(name) = &bind.op else {
-                        unreachable!();
-                    };
-
-                    let arg = pending.args.get(name.as_str()).unwrap();
+                    layout_line(layout, Line::styled("Arguments", &style.menu.heading));
 
-                    super::layout_line(
+                    layout_keybinds_table(
                         layout,
-                        Line::from(vec![
-                            Span::styled(bind.raw.clone(), &style.menu.key),
-                            Span::raw(format!(" {} (", arg.display)),
-                            Span::styled(
-                                arg.get_cli_token().to_string(),
-                                if arg.is_active() {
-                                    Style::from(&style.menu.active_arg)
-                                } else {
-                                    Style::from(&style.menu.inactive_arg)
-                                },
-                            ),
-                            Span::raw(")"),
-                        ]),
+                        arg_binds
+                            .into_iter()
+                            .map(|bind| {
+                                let Op::ToggleArg(name) = &bind.op else {
+                                    unreachable!();
+                                };
+
+                                let arg = pending.args.get(name.as_str()).unwrap();
+
+                                (
+                                    Line::styled(bind.raw.clone(), &style.menu.key),
+                                    Line::from(vec![
+                                        Span::raw(arg.display),
+                                        Span::raw(" ("),
+                                        Span::styled(
+                                            arg.get_cli_token().to_string(),
+                                            if arg.is_active() {
+                                                Style::from(&style.menu.active_arg)
+                                            } else {
+                                                Style::from(&style.menu.inactive_arg)
+                                            },
+                                        ),
+                                        Span::raw(")"),
+                                    ]),
+                                )
+                            })
+                            .collect(),
                     );
                 }
             });
         });
     });
 }
+
+fn layout_keybinds_table<'a>(layout: &mut UiTree<'a>, items: Vec<(Line<'a>, Line<'a>)>) {
+    layout.horizontal(None, OPTS.gap(1), |layout| {
+        layout.vertical(None, OPTS, |layout| {
+            for (key, _) in items.iter() {
+                layout_line(layout, key.clone());
+            }
+        });
+
+        layout.vertical(None, OPTS, |layout| {
+            for (_, value) in items {
+                layout_line(layout, value);
+            }
+        });
+    });
+}
-- 
2.52.0

