# Contributor: Clayton Craft <clayton@craftyguy.net>
maintainer="Hugo Osvaldo Barrera <hugo@whynothugo.nl>"
pkgname=nemo
pkgver=6.6.0
pkgrel=1
pkgdesc="File manager for the Cinnamon desktop environment"
arch="all"
url="https://github.com/linuxmint/nemo"
license="GPL-2.0-only"
depends="desktop-file-utils xapp-symbolic-icons"
makedepends="
	cinnamon-desktop-dev
	dconf-dev
	exempi-dev
	gobject-introspection-dev
	intltool
	json-glib-dev
	libexif-dev
	libgsf-dev
	libnotify-dev
	libxml2-dev
	meson
	python3
	xapp-dev
	"
checkdepends="xvfb-run"
source="https://github.com/linuxmint/nemo/archive/$pkgver/nemo-$pkgver.tar.gz"
subpackages="$pkgname-doc $pkgname-dev"
options="!check" # tests are broken: https://github.com/linuxmint/nemo/issues/2501

build() {
	abuild-meson \
		-Dxmp=true \
		. output
	meson compile -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

check() {
	xvfb-run meson test -C output
}
sha512sums="
8281a1640ccfd70f6573b22b40799586781bcea91e2984e0544787727aeeb218e3a316c30bf4ae041e45a3aa3f28d7ba7d7ede3e66ca58640c0dfce9bda82ec2  nemo-6.6.0.tar.gz
"
