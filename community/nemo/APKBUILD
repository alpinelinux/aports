# Contributor: Clayton Craft <clayton@craftyguy.net>
# Maintainer: Clayton Craft <clayton@craftyguy.net>
pkgname=nemo
pkgver=5.6.3
pkgrel=0
pkgdesc="File manager for the Cinnamon desktop environment"
# s390x and ppc64le blocked by exempi
# riscv64 disabled due to missing rust in recursive dependency
arch="all !s390x !ppc64le !riscv64"  # exempi, libexif-dev not available for all archs
url="https://github.com/linuxmint/nemo"
license="GPL-2.0-only"
makedepends="
	cinnamon-desktop-dev
	dconf-dev
	exempi-dev
	gobject-introspection-dev
	gvfs-dev
	intltool
	libexif-dev
	libgsf-dev
	libnotify-dev
	libxml2-dev
	meson
	python3
	xapp-dev
	"
checkdepends="xvfb-run"
source="https://github.com/linuxmint/nemo/archive/$pkgver/nemo-$pkgver.tar.gz"
subpackages="$pkgname-doc $pkgname-dev"
options="!check" # tests are broken: https://github.com/linuxmint/nemo/issues/2501

build() {
	abuild-meson . output
	meson compile ${JOBS:+-j ${JOBS}} -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

check() {
	xvfb-run meson test -C output
}
sha512sums="
e33c64e02c2a7b2a2cd6ccdd2d0b9253960c93b3b1700b0f2a0ba12b891d4a39f2cc222e9c1bb0f29dd3cec4d5447038d4b92b8b8a8841121101b08423533d66  nemo-5.6.3.tar.gz
"
