# Maintainer: DWwanghao <wanghao03@loongson.cn>
maintainer="DWwanghao <wanghao03@loongson.cn>"
pkgname=murex
pkgver=7.2.1001
pkgrel=0
pkgdesc="Intuitive, typed and content aware shell"
url="https://murex.rocks/"
arch="all"
license="GPL-2.0-only"
makedepends="go"
checkdepends="aspell"
subpackages="$pkgname-doc"
source="https://github.com/lmorg/murex/archive/v$pkgver/murex-$pkgver.tar.gz"

export GOCACHE="${GOCACHE:-"$srcdir/go-cache"}"
export GOTMPDIR="${GOTMPDIR:-"$srcdir"}"
export GOMODCACHE="${GOMODCACHE:-"$srcdir/go"}"

build() {
	go build -v
}

check() {
	go test -v ./...
}

package() {
	install -Dvm755 murex -t "$pkgdir"/usr/bin/

	install -dvm755 "$pkgdir"/usr/share/doc
	cp -rv docs "$pkgdir"/usr/share/doc/$pkgname
	cp -rv examples "$pkgdir"/usr/share/doc/$pkgname/
}

sha512sums="
e04a1ced1e65215d8d5c6a8b1a555515e99e373d87214f4178bd9f16f1ede32692b0a04c3391d06588990bf6bfd86fa4b774c63799f3b168fd11941338829712  murex-7.2.1001.tar.gz
"
