Author: Holger Jaekel <holger.jaekel@gmx.de>
Summary: remove vendored pugixml
----

--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -8,6 +8,8 @@
 set(CMAKE_CXX_STANDARD 17)
 set(CMAKE_CXX_STANDARD_REQUIRED True)

+find_package(pugixml CONFIG)
+
 if(MSVC)
     set(CMAKE_CXX_FLAGS "/EHsc /W3")
     set(CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS 1)
@@ -22,14 +24,7 @@
 include(FetchContent)
 include(GNUInstallDirs)

-FetchContent_Declare(
-    pugixml
-    GIT_REPOSITORY https://github.com/zeux/pugixml.git
-    GIT_TAG v1.14
-)
-FetchContent_MakeAvailable(pugixml)
-
-# Only include testing dependencies if BUILD_TESTING is ON and BUILD_SHARED_LIBS is OFF
+# Only include testing dependencies if BUILD_TESTING is ON
 if(BUILD_TESTING)
     include(CTest)
     FetchContent_Declare(
@@ -62,24 +57,23 @@
     src/RoadObject.cpp
     src/RoadSignal.cpp
     src/RoutingGraph.cpp
-    ${pugixml_SOURCE_DIR}/src/pugixml.cpp
 )

 add_library(OpenDrive ${SOURCES})
 set_target_properties(OpenDrive PROPERTIES
     VERSION ${PROJECT_VERSION}
     SOVERSION ${PROJECT_VERSION_MAJOR})
+target_link_libraries(OpenDrive PUBLIC pugixml)
 target_include_directories(
     OpenDrive PUBLIC
     $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include>
     $<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}>
-    $<BUILD_INTERFACE:${pugixml_SOURCE_DIR}/src>
 )

 # Only build tests if BUILD_TESTING is ON and BUILD_SHARED_LIBS is OFF
 if(BUILD_TESTING)
     add_executable(tests tests/test.cpp)
-    target_link_libraries(tests PRIVATE OpenDrive Catch2::Catch2WithMain) 
+    target_link_libraries(tests PRIVATE OpenDrive pugixml::pugixml Catch2::Catch2WithMain) 
     catch_discover_tests(tests WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/tests)
 endif()

@@ -92,8 +86,6 @@
 )
 install(
     FILES
-    ${pugixml_SOURCE_DIR}/src/pugixml.hpp
-    ${pugixml_SOURCE_DIR}/src/pugiconfig.hpp
     DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}
 )
 install(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/include/ DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})


--- a/include/OpenDriveMap.h
+++ b/include/OpenDriveMap.h
@@ -4,7 +4,7 @@
 #include "RoadNetworkMesh.h"
 #include "RoutingGraph.h"

-#include "pugixml.hpp"
+#include <pugixml.hpp>

 #include <map>
 #include <string>


--- a/include/XmlNode.h
+++ b/include/XmlNode.h
@@ -1,6 +1,6 @@
 #pragma once

-#include "pugixml.hpp"
+#include <pugixml.hpp>

 namespace odr
 {
