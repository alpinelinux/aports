From c7fa3c015de5c2f0f957df486b6879459ca85458 Mon Sep 17 00:00:00 2001
From: Sijawusz Pur Rahnama <sija@sija.pl>
Date: Wed, 1 Oct 2025 12:48:03 +0200
Subject: [PATCH] Fix specs in Crystal nightly

---
 spec/ameba/formatter/dot_formatter_spec.cr | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/spec/ameba/formatter/dot_formatter_spec.cr b/spec/ameba/formatter/dot_formatter_spec.cr
index e0ccfe9bf..4117a0853 100644
--- a/spec/ameba/formatter/dot_formatter_spec.cr
+++ b/spec/ameba/formatter/dot_formatter_spec.cr
@@ -63,8 +63,9 @@ module Ameba::Formatter
           end
           subject.finished [s]
           log = output.to_s
-          log.should contain "> \e[97ma = 22"
-          log.should contain "      \e[33m^\e[0m"
+          log = subject.deansify(log).should_not be_nil
+          log.should contain "> a = 22"
+          log.should contain "      ^"
         end
 
         it "writes severity" do
@@ -91,8 +92,9 @@ module Ameba::Formatter
           formatter.config[:without_affected_code] = true
           formatter.finished [s]
           log = output.to_s
+          log = formatter.deansify(log).should_not be_nil
           log.should_not contain "> a = 22"
-          log.should_not contain "      \e[33m^\e[0m"
+          log.should_not contain "      ^"
         end
 
         it "does not write disabled issues" do
