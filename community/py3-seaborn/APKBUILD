# Contributor: Iztok Fister, Jr. <iztok@iztok-jr-fister.eu>
# Maintainer: Will Sinatra <wpsinatra@gmail.com>"
maintainer="Will Sinatra <wpsinatra@gmail.com>"
pkgname=py3-seaborn
_pkgorig=seaborn
pkgver=0.13.2
pkgrel=2
pkgdesc="Statistical data visualization in Python"
url="https://github.com/mwaskom/seaborn"
arch="noarch"
license="BSD-3-Clause"
depends="python3 py3-numpy py3-pandas py3-matplotlib py3-scipy py3-statsmodels"
makedepends="py3-gpep517 py3-flit-core"
checkdepends="py3-pytest-xdist"
subpackages="$pkgname-pyc"
source="$pkgname-$pkgver.tar.gz::https://github.com/mwaskom/seaborn/archive/refs/tags/v$pkgver.tar.gz
	fix-tick-visibility-introspection.patch
	remove-reference-to-deprecated-numpy-error.patch
	"
builddir="$srcdir/$_pkgorig-$pkgver"

#FIXME: 4 tests fail, check logic needs to be extended.
case "$CARCH" in
ppc64le)
	options="$options !check"
	;;
esac

build() {
	gpep517 build-wheel \
		--wheel-dir .dist \
		--output-fd 3 3>&1 >&2
}

check() {
	pytest -n $JOBS
}

package() {
	python3 -m installer -d "$pkgdir" \
		.dist/seaborn-$pkgver-py3-none-any.whl
}

sha512sums="
4027d6d37f9e3162d669b211ff6f0548a7983b48337831ca649da4196004345c8786fbe961f04091b2ddc04dda8355e8fe1b86a40be9c9d0a4de2fd35b0a1ef6  py3-seaborn-0.13.2.tar.gz
8925a940cc8a1cd67d593a0d619a6349e0c6eb56c9c4ebb7ae3999e8b9521fbc04db138bf6a8604218974f117748dc61bd352b70166613712a561a76a6da7369  fix-tick-visibility-introspection.patch
5e2b6a9b3e7905978addfedfc3cd23953ed749dbfd0c0e64a7a24aefe458e2bf4fe0f3b9c0d4a1337f9cd7b27317399c1d09b87d68c72a8c9b8d67ab1fbb044d  remove-reference-to-deprecated-numpy-error.patch
"
