# Contributor: Andrey L <innerspacepilot@gmx.com>
# Maintainer: Bart Ribbers <bribbers@disroot.org>
pkgname=kyotocabinet
pkgver=1.2.80
pkgrel=1
pkgdesc="library of routines for managing a database"
url="https://dbmx.net/kyotocabinet/"
arch="all"
license="GPL-3.0-or-later"
makedepends="
	lzo-dev
	xz-dev
	zlib-dev
	"
subpackages="$pkgname-dev $pkgname-doc"
source="https://dbmx.net/kyotocabinet/pkg/kyotocabinet-$pkgver.tar.gz
	cflags.patch
	"

build() {
	./configure \
		--prefix=/usr \
		--enable-lzo \
		--enable-lzma
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
	rm -f "$pkgdir"/usr/lib/*.a
}

sha512sums="
9fe0a92c9a76db5ce06ef4d5a551c05930f2a9c065ab695b030fdaf45692bfe88d91f1b75791f50d0772c699567744cd74f3ef407172874d4bba467989d54328  kyotocabinet-1.2.80.tar.gz
4f799599e333bdaf62be5b142429e40afb21980ecc4c87450f8ae424c12fbf580dbd774925a0b4b9ed846b0519b26c7619e88454bebd3d52956aa8b925fbf987  cflags.patch
"
