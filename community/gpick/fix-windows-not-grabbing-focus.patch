Patch-Source: https://github.com/thezbyg/gpick/commit/66796074c7a0f667163ea4f438d078a0e9f505a8
---
From 66796074c7a0f667163ea4f438d078a0e9f505a8 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Albertas=20Vy=C5=A1niauskas?= <thezbyg@gmail.com>
Date: Sun, 30 Nov 2025 11:44:14 +0200
Subject: [PATCH] Fix windows not grabbing focus due to missing type hint.

Issue #233.
---
 source/tools/BackgroundColorPicker.cpp | 2 ++
 source/uiTemporaryPalette.cpp          | 1 +
 2 files changed, 3 insertions(+)

diff --git a/source/tools/BackgroundColorPicker.cpp b/source/tools/BackgroundColorPicker.cpp
index fc2ca11..e1d2741 100644
--- a/source/tools/BackgroundColorPicker.cpp
+++ b/source/tools/BackgroundColorPicker.cpp
@@ -156,10 +156,12 @@ struct BackgroundColorPicker: public IEventHandler {
 		gtk_window_set_destroy_with_parent(window, true);
 		gtk_window_set_skip_taskbar_hint(window, true);
 		gtk_window_set_skip_pager_hint(window, true);
+		gtk_window_set_type_hint(window, GDK_WINDOW_TYPE_HINT_DIALOG);
 		gtk_window_set_default_size(window, options->getInt32("window.width", 600), options->getInt32("window.height", 600));
 		GtkWidget *vbox = gtk_vbox_new(false, 0);
 		layoutView = gtk_layout_preview_new();
 		gtk_layout_preview_set_fill(GTK_LAYOUT_PREVIEW(layoutView), true);
+		gtk_widget_set_can_focus(layoutView, false);
 		auto *chain = &gs.transformationChain();
 		gtk_layout_preview_set_transformation_chain(GTK_LAYOUT_PREVIEW(layoutView), chain);
 		for (auto &adjustableColor: adjustableColors) {
diff --git a/source/uiTemporaryPalette.cpp b/source/uiTemporaryPalette.cpp
index d29d460..8f93dc5 100644
--- a/source/uiTemporaryPalette.cpp
+++ b/source/uiTemporaryPalette.cpp
@@ -42,6 +42,7 @@ struct TemporaryPalette: public IPalette {
 		gtk_window_set_destroy_with_parent(window, true);
 		gtk_window_set_skip_taskbar_hint(window, true);
 		gtk_window_set_skip_pager_hint(window, true);
+		gtk_window_set_type_hint(window, GDK_WINDOW_TYPE_HINT_DIALOG);
 		gtk_window_set_default_size(window, options->getInt32("window.width", -1), options->getInt32("window.height", -1));
 		GtkWidget *informationLabel = gtk_label_new("");
 #if GTK_MAJOR_VERSION >= 3
