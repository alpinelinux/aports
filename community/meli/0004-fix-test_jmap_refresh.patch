From 490d4042fb364e41f998e1c19b028167e3aa73cd Mon Sep 17 00:00:00 2001
From: Manos Pitsidianakis <manos@pitsidianak.is>
Date: Tue, 2 Sep 2025 10:14:24 +0300
Subject: [PATCH] melib/tests: use 127.0.0.1

0.0.0.0 might not be available.

Signed-off-by: Manos Pitsidianakis <manos@pitsidianak.is>
---
 melib/tests/imap/main.rs | 2 +-
 melib/tests/jmap/main.rs | 2 +-
 melib/tests/smtp/main.rs | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/melib/tests/imap/main.rs b/melib/tests/imap/main.rs
index 1c0d4046..57d25546 100644
--- a/melib/tests/imap/main.rs
+++ b/melib/tests/imap/main.rs
@@ -747,7 +747,7 @@ mod tests {
             uidvalidity: 1,
         }));
 
-        let listener = TcpListener::bind(("0.0.0.0", 0)).unwrap();
+        let listener = TcpListener::bind(("127.0.0.1", 0)).unwrap();
         let local_addr = listener.local_addr().unwrap();
         let account_conf = AccountSettings {
             name: "test".to_string(),
diff --git a/melib/tests/jmap/main.rs b/melib/tests/jmap/main.rs
index 39e8013a..80c85507 100644
--- a/melib/tests/jmap/main.rs
+++ b/melib/tests/jmap/main.rs
@@ -768,7 +768,7 @@ mod tests {
             std::env::set_var(var, &dir);
         }
 
-        let listener = TcpListener::bind(("0.0.0.0", 0)).unwrap();
+        let listener = TcpListener::bind(("127.0.0.1", 0)).unwrap();
         let local_addr = listener.local_addr().unwrap();
         let account_conf = AccountSettings {
             name: "test".to_string(),
diff --git a/melib/tests/smtp/main.rs b/melib/tests/smtp/main.rs
index ebb1df07..2a79c4e1 100644
--- a/melib/tests/smtp/main.rs
+++ b/melib/tests/smtp/main.rs
@@ -196,7 +196,7 @@ pub mod server {
     impl SmtpServer {
         pub fn new(event_receiver: UnboundedReceiver<ServerEvent>) -> Self {
             let tcp_listener =
-                smol::Async::new(TcpListener::bind(("0.0.0.0", 0)).unwrap()).unwrap();
+                smol::Async::new(TcpListener::bind(("127.0.0.1", 0)).unwrap()).unwrap();
             let addr = tcp_listener.as_ref().local_addr().unwrap();
             let state = Arc::new(Mutex::new(ServerState {
                 mails: vec![],
-- 
2.51.2

