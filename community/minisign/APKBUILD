# Contributor: Michael Zuo <muh.muhten@gmail.com>
# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=minisign
pkgver=0.12
pkgrel=1
pkgdesc="Simple tool to sign files and verify signatures"
url="https://jedisct1.github.io/minisign/"
arch="all"
license="ISC"
makedepends="cmake libsodium-dev samurai"
subpackages="$pkgname-doc"
source="https://github.com/jedisct1/minisign/archive/$pkgver/minisign-$pkgver.tar.gz
	reject-cr.patch
	reject-unprintable.patch
	"
options="!check" # no test suite

build() {
	cmake -B build -G Ninja \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=MinSizeRel
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build

	install -Dvm644 LICENSE \
		-t "$pkgdir"/usr/share/licenses/$pkgname/
}

sha512sums="
fc95020fef3ae63ab974a20c39b9bf05df957c40838fceb73cb10d6cec9880d882727b6a0240b81b4a7593ff2603d4eef4b32b0857dcf5f85de5e0b7573086ed  minisign-0.12.tar.gz
5dbc9637e3e20941b90d3c3d51f6ba1580f4d4167b3a4547427b332c924e99851a5fa9ce0df8581c16399499e607bddb8c773157728759104876926f4e9cf382  reject-cr.patch
784b3849923af303f16600c587354f92d2ece2f7597346e88f2a0cbb3e55afe68bad489c6597ddbc6dd6ecc4b2b836f0329e1f7a85ba17df8901c89d3b5b9b96  reject-unprintable.patch
"
