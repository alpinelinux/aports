# Maintainer: Jens Reidel <adrian@travitia.xyz>
pkgname=qrtr
pkgver=1.2
pkgrel=0
pkgdesc="Userspace reference for net/qrtr in the Linux kernel"
url="https://github.com/linux-msm/qrtr"
arch="all"
license="BSD-3-Clause"
depends_dev="linux-headers"
makedepends="$depends_dev meson"
subpackages="$pkgname-doc $pkgname-dev $pkgname-libs"
source="https://github.com/linux-msm/qrtr/archive/v$pkgver/qrtr-v$pkgver.tar.gz"
options="!check" # no tests

build() {
	abuild-meson \
		-Dqrtr-ns=disabled \
		-Dsystemd-service=disabled \
		. output
	meson compile -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output

	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/COPYING
}

sha512sums="
aec1dfc598a70f0128d81a56faab74a2a7676dc0c4ff2e858f76aaf815afb5b785af0cf18427212f92aec3c61297af3f94a64671ec5e161c4a340d2edcfaabdd  qrtr-v1.2.tar.gz
"
