# Contributor: H <agathos5@gmail.com>
# Maintainer:
pkgname=megatools
pkgver=1.9.98
pkgrel=0
pkgdesc="Megatools is a collection of programs for accessing Mega.nz service from a command line of your desktop or server."
url="https://megatools.megous.com"
arch="all"
license="GPL2"
depends="libssl1.0"
makedepends="curl-dev glib-dev openssl-dev gmp-dev asciidoc"
install=""
subpackages="$pkgname-doc"
source="https://megatools.megous.com/builds/megatools-1.9.98.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	./configure --prefix=/usr
	make
}

package() {
	cd "$builddir"
	#make DESTDIR="$pkgdir" install
	./install-sh -c -d "${pkgdir}/usr/bin"
	./install-sh -c -d "${pkgdir}/usr/share/doc/megatools"
	./install-sh -c -d "${pkgdir}/usr/share/man/man1"
	./install-sh -c -d "${pkgdir}/usr/share/man/man5"
	./install-sh -c -d "${pkgdir}/usr/share/man/man7"
	./install-sh -c -m 755 megacopy megadf megadl megaget megals megamkdir megaput megareg megarm "${pkgdir}/usr/bin"
	./install-sh -c -m 644 LICENSE NEWS TODO README INSTALL HACKING "${pkgdir}/usr/share/doc/megatools"
	./install-sh -c -m 644 docs/megadf.1 docs/megaget.1 docs/megals.1 docs/megamkdir.1 docs/megaput.1 docs/megareg.1 docs/megarm.1 \
													docs/megacopy.1 docs/megadl.1 "${pkgdir}/usr/share/man/man1"
	./install-sh -c -m 644 docs/megarc.5 "${pkgdir}/usr/share/man/man5"
	./install-sh -c -m 644 docs/megatools.7 "${pkgdir}/usr/share/man/man7"
}

sha512sums="4e1c9e3a6aae0009d085b38ae79d9ba9e66415b0517eb1f0c0abec40a3be103bf0f78bfd8fa8d678a578eb0652f3b88292bcb53c1e1efc83082a6239644390d0  megatools-1.9.98.tar.gz"
