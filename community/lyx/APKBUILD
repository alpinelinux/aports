# Contributor: Eloi Torrents <eloitor@disroot.org>
# Maintainer: John Vogel <jvogel@stygian.me>
maintainer="John Vogel <jvogel@stygian.me>"
pkgname=lyx
pkgver=2.5.0
pkgrel=0
pkgdesc="Advanced WYSIWYM document processor & LaTeX front-end"
url="https://www.lyx.org"
arch="all"
license="GPL-2.0-or-later"
makedepends="
	boost-dev
	enchant2-dev
	file-dev
	mythes-dev
	qt6-qtbase-dev
	qt6-qtsvg-dev
	"
depends="
	imagemagick
	python3
	"
subpackages="$pkgname-doc $pkgname-lang $pkgname-pyc"
source="https://ftp.lip6.fr/pub/lyx/stable/${pkgver%.*}.x/lyx-$pkgver.tar.xz"

build() {
	./configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--enable-qt6 \
		--without-included-boost \
		--without-included-mythes \
		--disable-callstack-printing
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

pyc() {
	default_pyc
	local IFS=$'\n'
	amove "$(find usr/share/lyx -type d -name __pycache__)"
}

sha512sums="
9e08529ef66fc908227e2504a33392baa2688c619d49666ac1c9cffedd7438496eee9cab8ad07abfb8891a11743f6b33193f90313198eb4d4a015c093a69b8a8  lyx-2.5.0.tar.xz
"
