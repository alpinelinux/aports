# Contributor: Stuart Cardall <developer@it-offshore.co.uk>
# Maintainer: Stuart Cardall <developer@it-offshore.co.uk>
pkgname=libqmi
pkgver=1.6.0
pkgrel=0
pkgdesc="QMI modem protocol helper library"
url="http://www.freedesktop.org/wiki/Software/libqmi"
arch="all"
license="GPL2"
depends=""
depends_dev=""
makedepends="$depends_dev gtk-doc python glib-dev"
install=""
subpackages="$pkgname-dev $pkgname-doc"
source="http://www.freedesktop.org/software/$pkgname/$pkgname-$pkgver.tar.xz"
builddir="$srcdir"/$pkgname-$pkgver

prepare() {
	local i
	cd "$builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$builddir"
	./configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--localstatedir=/var \
		--disable-static \
		--enable-more-warnings=yes \
	|| return 1
	make || return 1
	make check || return 1
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

md5sums="17d6c2b404ee1eb4d1e60050fef64491  libqmi-1.6.0.tar.xz"
sha256sums="fa4ff7dacfd1063880c517683fb928b3be5609a45f60d36ec834c1b5711d4582  libqmi-1.6.0.tar.xz"
sha512sums="8bd69c3ce21cd4e9cc89fa99b88121dceafdfabc30e1d4643b32890ae8ec2671534ec920b457cc837b621263146c2d02ab799b34e00141c23053a16e155f822f  libqmi-1.6.0.tar.xz"
