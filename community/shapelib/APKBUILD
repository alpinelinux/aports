# Maintainer: Wen Heping <wenhepingalpine@sohu.com>
pkgname=shapelib
pkgver=1.6.2
pkgrel=0
pkgdesc="C library for reading, writing and updating ESRI Shapefiles, and the associated attribute file"
url="http://shapelib.maptools.org/"
arch="all"
license="LGPL-2.0-only OR MIT"
depends_dev="$pkgname=$pkgver-r$pkgrel"
subpackages="$pkgname-dev $pkgname-tools"
source="https://download.osgeo.org/shapelib/shapelib-$pkgver.tar.gz
	fix-bool.patch
	"
prepare() {
	default_prepare
	update_config_sub
}

build() {
	CFLAGS="$CFLAGS -flto=auto -O2" \
	./configure \
		--prefix=/usr \
		--host=$CHOST \
		--build=$CBUILD \
		--disable-static
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

tools() {
	pkgdesc="$pkgdesc (utilities)"

	amove usr/bin
}

sha512sums="
5537ede3433d293f8b7cae9b62e6247c2a2ec02330de594d02e9359dfa4dca43e63fa023124340362bf7535c04f05c2f73dd4238e92e67575252a784efb35c46  shapelib-1.6.2.tar.gz
e60036a76011ab0f23a8369b9f13f11adc86d231671d8de997d32f83f405920681aebb67a93f4055dcc1852958f42c67e22473192dac366b6295cb77b5dc6266  fix-bool.patch
"
