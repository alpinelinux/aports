# Contributor: Sören Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Sören Tempel <soeren+alpine@soeren-tempel.net>
pkgname=skribilo
pkgver=0.10.0
pkgrel=0
pkgdesc="A free document production tool for structured documents"
url="https://www.nongnu.org/skribilo"
arch="all"
license="GPL-3.0-or-later"
depends="guile guile-reader imagemagick"
makedepends="guile-dev"
# Don't split -dev: https://gitlab.alpinelinux.org/alpine/aports/-/issues/12783
subpackages="$pkgname-doc"
options="!strip" # https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=907061
# XXX: savannah.nongnu.org does occassionally redirect to mirrors where the file doesn't exist.
source="https://mirrors.sarata.com/non-gnu/skribilo/skribilo-0.10.0.tar.gz"

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
97c4a08c83fb47759e9c8b83e53438561a77c41bfc655083938546f65be7e8a647d38bc3bf231996822ed1200915fd0691102c1e0d4c02fef499a9b99b2b844e  skribilo-0.10.0.tar.gz
"
