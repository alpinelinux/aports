# Contributor: Grigory Kirillov <txgk@bk.ru>
# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=libntl
pkgver=11.6.0
pkgrel=0
pkgdesc="Library for doing number theory"
url="https://libntl.org"
arch="all"
license="LGPL-2.1-or-later"
makedepends="autoconf automake gf2x-dev gmp-dev perl"
subpackages="$pkgname-static $pkgname-dev $pkgname-doc"
source="https://libntl.org/ntl-$pkgver.tar.gz"
builddir="$srcdir/ntl-$pkgver/src"

build() {
	export CXXFLAGS="${CXXFLAGS/-Os/-O2}" # gotta go fast

	# This configure script wasn't generated by autoconf, however during
	# configuration an inlying perl scripts will use autoconf utilities...
	./configure \
		NATIVE=off \
		SHARED=on \
		TUNE=generic \
		CXXFLAGS="$CXXFLAGS" \
		LDFLAGS="$LDFLAGS" \
		DEF_PREFIX=/usr \
		NTL_GF2X_LIB=on \
		NTL_GMP_LIP=on
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
7801e8a2b866f40b61af494291e888a0a4065e843d27c3ab38f61e93e76b6b5153906aea58d6cf4e5638f1f50f640f5c69548065c4d76c83c9820573a4852b3a  ntl-11.6.0.tar.gz
"
