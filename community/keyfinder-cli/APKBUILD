# Contributor: Jean-Louis Fuchs <safe.pen2857@rhizoome.ch>
# Maintainer: Jean-Louis Fuchs <safe.pen2857@rhizoome.ch>
pkgname=keyfinder-cli
pkgver=1.1.5
pkgrel=0
pkgdesc="Musical key detection for digital audio (command line)"
url="https://github.com/EvanPurkhiser/keyfinder-cli"
arch="all"
license="GPL-3.0-only"
makedepends="libkeyfinder-dev ffmpeg-dev cmake samurai"
subpackages="$pkgname-doc"
source="keyfinder-cli-$pkgver.tar.gz::https://github.com/EvanPurkhiser/keyfinder-cli/archive/v$pkgver.tar.gz"
options="!check"

build() {
	cmake -B build \
		-GNinja \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DCMAKE_BUILD_TYPE=MinSizeRel
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
0a0ee6225f0ca891e63983a947abd37904cd3da219ee381f91c7c2399cf4e5a367c66983f3751af4b4dd851e06a8418ff4753c0c76a8aef5077cdd06c6d8cbd8  keyfinder-cli-1.1.5.tar.gz
"
