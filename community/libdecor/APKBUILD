# Contributor: Michał Polański <michal@polanski.me>
# Maintainer: Michał Polański <michal@polanski.me>
pkgname=libdecor
pkgver=0.2.4
pkgrel=0
pkgdesc="Client-side decorations library for Wayland clients"
url="https://gitlab.freedesktop.org/libdecor/libdecor"
license="MIT"
arch="all"
makedepends="
	meson
	cairo-dev
	dbus-dev
	gtk+3.0-dev
	pango-dev
	wayland-dev
	wayland-protocols
	"
subpackages="$pkgname-dev $pkgname-gtk"
source="https://gitlab.freedesktop.org/libdecor/libdecor/-/archive/$pkgver/libdecor-$pkgver.tar.gz"
options="!check" # no test suite

build() {
	abuild-meson \
		-Ddemo=false \
		. output
	meson compile -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

gtk() {
	pkgdesc="$pkgdesc (GTK plugin)"
	depends="$pkgname=$pkgver-r$pkgrel"

	amove usr/lib/libdecor/plugins-1/libdecor-gtk.so
}

sha512sums="
f9b8a1af992132e150571d2df2d6dab1e0a5ed8f7608109111a6339aca3ae395ffa5d962f079b0a3725a4bec3f86d8386720cf8c60e65dc980d9b186c7ebe3fb  libdecor-0.2.4.tar.gz
"
