
# HG changeset patch
# User Bob Friesenhahn <bfriesen@GraphicsMagick.org>
# Date 1501116476 18000
# Node ID be898b7c97bd855fc6fa0cef983faae916bd0c93
# Parent  6a632982c866f36dbad87e4ab953e08a290eaa8b
WMF: Eliminate use of already freed heap data in error reporting path.

diff -r 6a632982c866 -r be898b7c97bd coders/wmf.c
--- a/coders/wmf.c	Tue Jul 25 20:11:16 2017 -0500
+++ b/coders/wmf.c	Wed Jul 26 19:47:56 2017 -0500
@@ -2719,8 +2719,8 @@
   if(image->exception.severity != UndefinedException)
     ThrowException2(exception,
                    CoderWarning,
-                   ddata->image->exception.reason,
-                   ddata->image->exception.description);
+                   image->exception.reason,
+                   image->exception.description);
 
   if(logging)
     (void) LogMagickEvent(CoderEvent,GetMagickModule(),"leave ReadWMFImage()");

