# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=py-numpy
_pkgname=numpy
pkgver=1.12.0
pkgrel=0
pkgdesc="Scientific tools for Python"
url="http://numpy.scipy.org/"
arch="all"
license="BSD"
depends="gfortran"
depends_dev="python2-dev openblas-dev py-setuptools py-nose cython-dev py-numpy"
makedepends="$depends_dev"
install=""
subpackages="$pkgname-dev $pkgname-doc"
source="https://github.com/numpy/numpy/releases/download/v$pkgver/$_pkgname-$pkgver.tar.gz
	numpy-1.11.0-musl.patch
	site.cfg"
builddir="$srcdir/$_pkgname-$pkgver"

prepare() {
	default_prepare || return 1
	cp "$srcdir"/site.cfg "$builddir"/
}

build() {
	cd "$builddir"
	export Atlas=None
	LDFLAGS="$LDFLAGS -shared"
	python2 setup.py build config_fc --fcompiler=gnu95  || return 1
}


package() {
	cd "$builddir"
	python2 setup.py install  --prefix=/usr --root="$pkgdir" config_fc --fcompiler=gnu95  || return 1
	install -m755 -d "$pkgdir"/usr/share/licenses/custom/$pkgname
	install -m644 LICENSE.txt "$pkgdir"/usr/share/licenses/custom/$pkgname/LICENSE
}

sha512sums="f2474088dbb2bc40e0f2cde06592173a1fdfad53307d430c07eb6bd3bcf3ce4a3c10c0321000d6f3de8d9b818e18f2a0962fbdc9d08a491ab698929a7d1fceb7  numpy-1.12.0.tar.gz
f8820c08754b5521e1a30b602bf87667459c96c1abfa78a4f54331c19ceec5e2f3108a20ba09fdf8089087296a4836dc32b2b47022efd90ade3de568aef9a1a7  numpy-1.11.0-musl.patch
21ca8db304cbbf5949f07702f2a42bb5e5a0d641921e36649555a41b0e48f04e96f53760417823177ac27f6de24b2191e6e1d5f0eb393beafa29f7484e23284f  site.cfg"
