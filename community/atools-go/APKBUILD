# Contributor: Kevin Daudt <kdaudt@alpinelinux.org>
# Maintainer: Kevin Daudt <kdaudt@alpinelinux.org>
pkgname=atools-go
pkgver=0.6.0
pkgrel=1
pkgdesc="APKBUILD linter that parses APKBUILD files to provide fast and accurate checks"
url="https://gitlab.alpinelinux.org/alpine/infra/atools-go"
arch="all"
license="MIT"
makedepends="go apenwarr-redo"
subpackages="$pkgname-doc"
options="net"
source="https://gitlab.alpinelinux.org/alpine/infra/atools-go/-/archive/v$pkgver/atools-go-v$pkgver.tar.gz"
builddir="$srcdir/$pkgname-v$pkgver"

provides="apkbuild-lint"
provider_priority=100
replaces="atools" # conflict on apkbuild-lint

build() {
	./configure --prefix /usr
	redo
}

check() {
	redo test
}

package() {
	install -Dm0755 apkbuild-lint "$pkgdir/usr/bin/apkbuild-lint"
	install -Dm0644 LICENSE "$pkgdir/usr/share/licenses/atools-go/LICENSE"
}

sha512sums="
530477f16b93877e6fcee10e8029b389acb9c701f679bd55ea1a6118521488901e848c06d614f7aeab38697b1bd28259a5be40b54f86f392d7fb88dc83d3b35b  atools-go-v0.6.0.tar.gz
"
