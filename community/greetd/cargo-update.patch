diff --git a/Cargo.lock b/Cargo.lock
index f89b04a..5847ac6 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -1,6 +1,6 @@
 # This file is automatically @generated by Cargo.
 # It is not intended for manual editing.
-version = 3
+version = 4
 
 [[package]]
 name = "addr2line"
@@ -79,6 +79,12 @@ version = "1.0.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd"
 
+[[package]]
+name = "cfg_aliases"
+version = "0.1.1"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "fd16c4719339c4530435d38e511904438d07cce7950afa3718a84ac36c10e89e"
+
 [[package]]
 name = "enquote"
 version = "1.1.0"
@@ -154,9 +154,9 @@ checksum = "49f1f14873335454500d59611f1cf4a4b0f786f9ac11f4312a78e4cf2566695b"
 
 [[package]]
 name = "libc"
-version = "0.2.153"
+version = "0.2.155"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "9c198f91728a82281a64e1f4f9eeb25d82cb32a5de251c6bd1b5154d63a8e7bd"
+checksum = "97b3888a4aecf77e811145cadf6eef5901f4782c53886191b2f693f24761847c"
 
 [[package]]
 name = "memchr"
@@ -186,12 +192,13 @@ dependencies = [
 
 [[package]]
 name = "nix"
-version = "0.27.1"
+version = "0.28.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "2eb04e9c688eff1c89d72b407f168cf79bb9e867a9d3323ed6c01519eb9cc053"
+checksum = "ab2156c4fce2f8df6c499cc1c763e4394b7482525bf2a9701c9d79d215f519e4"
 dependencies = [
  "bitflags",
  "cfg-if",
+ "cfg_aliases",
  "libc",
 ]
 
diff --git a/agreety/Cargo.toml b/agreety/Cargo.toml
index 76ceb35..a106f88 100644
--- a/agreety/Cargo.toml
+++ b/agreety/Cargo.toml
@@ -13,4 +13,4 @@ inish = { path = "../inish"}
 rpassword = "5.0"
 getopts = "0.2"
 enquote = "1.1"
-nix = "0.27"
+nix = "0.28"
diff --git a/greetd/Cargo.toml b/greetd/Cargo.toml
index a9ac8d1..7d471ae 100644
--- a/greetd/Cargo.toml
+++ b/greetd/Cargo.toml
@@ -11,7 +11,7 @@ repository = "https://git.sr.ht/~kennylevinsen/greetd/"
 debug = []
 
 [dependencies]
-nix = { version = "0.27", features = ["ioctl", "signal", "user", "fs", "mman"] }
+nix = { version = "0.28", features = ["ioctl", "signal", "user", "fs", "mman"] }
 pam-sys = "0.5.6"
 serde = { version = "1.0", features = ["derive"] }
 serde_json = "1.0"


diff --git a/greetd/src/terminal/mod.rs b/greetd/src/terminal/mod.rs
index dc79eb1..e1ac4f0 100644
--- a/greetd/src/terminal/mod.rs
+++ b/greetd/src/terminal/mod.rs
@@ -6,7 +6,7 @@ use nix::{
     sys::stat::Mode,
     unistd::{close, dup2, write},
 };
-use std::{ffi::CStr, os::unix::io::RawFd};
+use std::{ffi::CStr, os::unix::io::{RawFd, BorrowedFd}};
 
 #[allow(dead_code)]
 pub enum KdMode {
@@ -214,7 +214,7 @@ impl Terminal {
     /// Clear this terminal by sending the appropciate escape codes to it. Only
     /// affects text mode.
     pub fn term_clear(&self) -> Result<(), Error> {
-        let res = write(self.fd, b"\x1B[H\x1B[2J");
+        let res = write(unsafe { BorrowedFd::borrow_raw(self.fd) }, b"\x1B[H\x1B[2J");
         if let Err(v) = res {
             Err(format!("terminal: unable to clear: {v}").into())
         } else {
