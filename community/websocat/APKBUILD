# Maintainer: Olliver Schinagl <oliver@schinagl.nl>
pkgname=websocat
pkgver=1.14.1
pkgrel=0
pkgdesc="Netcat, curl and socat for WebSockets"
url="https://github.com/vi/websocat"
arch="all"
license="MIT"
makedepends="cargo openssl-dev>3 cargo-auditable"
options="net"
source="https://github.com/vi/websocat/archive/v$pkgver/websocat-$pkgver.tar.gz"

prepare() {
	default_prepare
	cargo fetch --target="$CTARGET" --locked
}

build() {
	cargo auditable build --release --locked
}

check() {
	cargo test --release --locked
}

package() {
	install -D -m 0755 "target/release/websocat" -t "$pkgdir/usr/bin"
}

sha512sums="
668fc221eac88b2d9cb385cdd7e06f0593b7570d0316aa096f6711d817b6886793c08ff05daeddee6d3845c62432593cb1939196cf182bc58104c5f2ed218d43  websocat-1.14.1.tar.gz
"
