# Contributor: stef <l0ls0fo2i@ctrlc.hu>
# Maintainer: Andr√© Klitzing <aklitzing@gmail.com>
pkgname=zstd
pkgver=1.3.0
pkgrel=0
pkgdesc="Zstandard - Fast real-time compression algorithm"
url="http://www.zstd.net"
arch="all !armhf"
license="BSD"
checkdepends="file"
subpackages="$pkgname-dev $pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/facebook/$pkgname/archive/v$pkgver.tar.gz
	increase-max-number-cores-supported.patch"

builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	make -j1
}

check() {
	cd "$builddir"
	make test
}

package() {
	cd "$builddir"
	make PREFIX="/usr" DESTDIR="$pkgdir" install
}

sha512sums="5eb9e001e14d3342e76eb57b672c636fd56839ba8fc0ba9a751484ea93389c72c494ad2125dc2f9be1f72481f3af34568477123f7e9d3c7504e061e4c083cb30  zstd-1.3.0.tar.gz
b764be95a7b3876b62215ff4feb8c464e9cbf467e410de4e7026e8d10f6287193d16ae76d516f3a2eaa7c526d3a73df1437041930896dd8a29dc91b988d10fcb  increase-max-number-cores-supported.patch"
