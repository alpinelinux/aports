# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=trealla
pkgver=2.87.7
pkgrel=0
pkgdesc="Compact and efficient Prolog interpreter"
url="https://github.com/trealla-prolog/trealla"
arch="all"
license="MIT"
makedepends="
	libffi-dev
	openssl-dev
	readline-dev
	xxd
	"
checkdepends="
	bash
	diffutils
	"
subpackages="$pkgname-doc"
source="https://github.com/trealla-prolog/trealla/archive/v$pkgver/trealla-$pkgver.tar.gz"

build() {
	make GIT_VERSION="\"v$pkgver\""
}

check() {
	make test
}

package() {
	install -Dvm755 tpl -t "$pkgdir"/usr/bin/

	mkdir -p "$pkgdir"/usr/share/doc/$pkgname
	cp -R samples "$pkgdir"/usr/share/doc/$pkgname/
	install -Dvm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
}

sha512sums="
98bd9aadb538257b18b6b76eef695b94f214871e0bd19177c0e0fbe83bd8b74d33f4ffbefe8e1c79432568ac7b2d30cc6e1bd5446b07a23e99b72001eaf7bfc3  trealla-2.87.7.tar.gz
"
