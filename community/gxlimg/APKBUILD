# Contributor: Ferass El Hafidi <funderscore@postmarketos.org>
# Maintainer: Ferass El Hafidi <funderscore@postmarketos.org>
pkgname=gxlimg
pkgver=0.0.1
pkgrel=0
pkgdesc="Boot image creation tool for Amlogic GXL/G12A SoCs"
url="https://github.com/repk/gxlimg"
arch="all"
license="BSD-2-Clause"
makedepends_host="openssl-dev linux-headers"
options="!check" # no tests provided
source="$pkgname-$pkgver.tar.gz::https://github.com/repk/gxlimg/archive/refs/tags/v$pkgver.tar.gz"

build() {
	make CFLAGS="$CFLAGS -g" LDFLAGS="$LDFLAGS -lcrypto" DEBUG=1 REPRODUCIBLE=1
}

package() {
	install -Dm755 gxlimg "$pkgdir/usr/bin/gxlimg"
	install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}

sha512sums="
e54ea1a1140c854b7ef376d44d18e55cffe42981583da1c5ce0b06fed519f4e7e79efd07867a2048722cd8b0a4e0e593cb0e988ec263c1aef88dffc7b957db95  gxlimg-0.0.1.tar.gz
"
