# Contributor: Leo <thinkabit.ukim@gmail.com>
# Maintainer: Michał Polański <michal@polanski.me>
pkgname=wf-recorder
pkgver=0.6.0
pkgrel=0
pkgdesc="Screen recording for wlroots-based compositors"
url="https://github.com/ammen99/wf-recorder"
arch="all"
license="MIT"
makedepends="
	ffmpeg-dev
	mesa-dev
	meson
	pipewire-dev
	pulseaudio-dev
	scdoc
	wayland-dev
	wayland-protocols
	"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/ammen99/wf-recorder/archive/v$pkgver/v$pkgver.tar.gz"
options="!check" # no test suite

build() {
	abuild-meson \
		-Db_lto=true \
		-Ddefault_audio_backend=pipewire \
		. output
	meson compile -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

sha512sums="
23ae01fecbbe846daef98650b52229159c72121b6861b44e3f7dd64aceacd16e5fdfae61dccbb348bf38a0a3602b14f001ad9b5ab1520063ff0798e42e131c59  wf-recorder-0.6.0.tar.gz
"
