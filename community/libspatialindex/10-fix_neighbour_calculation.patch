Patch-Source: https://github.com/openbsd/ports/commit/30e8080ef5206266206690716e8ada4a4e945f4e
--
From 30e8080ef5206266206690716e8ada4a4e945f4e Mon Sep 17 00:00:00 2001
From: landry <landry@openbsd.org>
Date: Sat, 25 Oct 2025 09:56:05 +0000
Subject: [PATCH] geo/spatialite: fix neighbour calculation in qgis

reverts a commit from 2.1, see
https://github.com/libspatialindex/libspatialindex/issues/276
---

--- a/src/rtree/RTree.cc
+++ b/src/rtree/RTree.cc
@@ -613,7 +613,7 @@
                     Data* e = new Data(n->m_pDataLength[cChild], n->m_pData[cChild], *(n->m_ptrMBR[cChild]), n->m_pIdentifier[cChild]);
                     // we need to compare the query with the actual data entry here, so we call the
                     // appropriate getMinimumDistance method of NearestNeighborComparator.
-                    queue.push(NNEntry(n->m_pIdentifier[cChild], e, nnc.getMinimumDistance(query, e->m_region)));
+                    queue.push(NNEntry(n->m_pIdentifier[cChild], e, nnc.getMinimumDistance(query, *e)));
                 }
                 else
                 {
