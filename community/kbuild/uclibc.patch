--- a/src/lib/k/kDefs.h
+++ b/src/lib/k/kDefs.h
@@ -78,7 +78,7 @@
 #  define K_OS      K_OS_DRAGONFLY
 # elif defined(__FreeBSD__) /*??*/
 #  define K_OS      K_OS_FREEBSD
-# elif defined(__gnu_linux__)
+# elif defined(__linux__)
 #  define K_OS      K_OS_LINUX
 # elif defined(__NetBSD__) /*??*/
 #  define K_OS      K_OS_NETBSD


--- a/src/kmk/kmkbuiltin/fts.c
+++ b/src/kmk/kmkbuiltin/fts.c
@@ -75,7 +75,7 @@
 #endif
 
 #if ! HAVE_NBTOOL_CONFIG_H
-# if !defined(__sun__) && !defined(__gnu_linux__)
+# if !defined(__sun__) && !defined(__linux__)
 #  define HAVE_STRUCT_DIRENT_D_NAMLEN 1
 # endif
 #endif

