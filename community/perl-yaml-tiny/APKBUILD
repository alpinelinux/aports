# Automatically generated by apkbuild-cpan, template 1
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=perl-yaml-tiny
_pkgreal=YAML-Tiny
pkgver=1.69
pkgrel=0
pkgdesc="Read/Write YAML files with as little code as possible"
url="http://search.cpan.org/dist/YAML-Tiny/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends=""
cpanmakedepends="   perl-json-maybexs"
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/E/ET/ETHER/$_pkgreal-$pkgver.tar.gz"

_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	make && make test
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="7deacd0ee428038407ccc5cd0b50f66f  YAML-Tiny-1.69.tar.gz"
sha256sums="bc8cb059492b9e4f7be1bcefd99dfa834b13438d48fd465c1e312223f584f592  YAML-Tiny-1.69.tar.gz"
sha512sums="64c3428691f78d94bedf7f3b3276f7868d7280ca6d3c9a7a2e8137568d0da2fc94c766f9873f2796898386d6e7d3d1010c790fcc119f3d4d743becfa39d56a2c  YAML-Tiny-1.69.tar.gz"
