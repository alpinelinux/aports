# Contributor: Oleg Titov <oleg.titov@gmail.com>
# Maintainer: Oleg Titov <oleg.titov@gmail.com>
pkgname=direwolf
pkgver=1.8
pkgrel=0
pkgdesc="Software soundcard AX.25 packet modem/TNC and APRS encoder/decoder"
url="https://github.com/wb2osz/direwolf"
arch="all" # officially supported by upstream
license="GPL-2.0-or-later"
options="!check" # No test suite from upstream
makedepends="
	cmake
	alsa-lib-dev
	avahi-dev
	gpsd-dev
	hamlib-dev
	libgpiod-dev
	libudev-zero-dev
	samurai
	"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/wb2osz/direwolf/archive/refs/tags/$pkgver.tar.gz"

build() {
	cmake3.5 -B build -G Ninja -DCMAKE_INSTALL_PREFIX=/usr
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
	DESTDIR="$pkgdir" cmake --build build --target install-conf

	rm -r "${pkgdir:?}"/usr/share/doc/direwolf/*.pdf
}

sha512sums="
77f76566b138a3d2d790102c1650a27a888a6344d34523715945c40383f39aad40d0f1c54c362ebe6c66c12cbfe180a2b0d1ebca94ad2a8e28d01e69084daadc  direwolf-1.8.tar.gz
"
