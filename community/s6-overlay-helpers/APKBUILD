# Maintainer: Laurent Bercot <ska-devel@skarnet.org>
pkgname=s6-overlay-helpers
pkgver=0.1.2.1
pkgrel=0
pkgdesc="Binary helpers for s6-overlay"
url=https://github.com/just-containers/s6-overlay-helpers
arch="all"
license="ISC"
_skalibs_version=2.14.5
_execline_version=2.9.6
makedepends="skalibs-dev>=$_skalibs_version execline-dev>=$_execline_version"
source="$pkgname-$pkgver.tar.gz::https://github.com/just-containers/s6-overlay-helpers/archive/refs/tags/v$pkgver.tar.gz"

# s6-overlay-suexec is suid root.
# That's okay: it's only runnable as pid 1. (For use in USER containers.)
options="!check suid"

build() {
	./configure \
		--prefix=/usr \
		--enable-shared \
		--disable-allstatic \
		--libexecdir="/usr/lib/$pkgname" \
		--with-pkgconfig
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
9a02e139bd7764cf729a4be30add8068f3d69056e44f35254b1ae9c76ce510985f422a3af6f130fe351ad6d706a2851fa14bcc4385a3017cd5a905b318e369a7  s6-overlay-helpers-0.1.2.1.tar.gz
"
