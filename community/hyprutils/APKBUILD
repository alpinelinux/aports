# Contributor: Zach DeCook <zachdecook@librem.one>
maintainer="Zach DeCook <zachdecook@librem.one>"
pkgname=hyprutils
pkgver=0.11.0
pkgrel=0
pkgdesc="Hyprland utilities library used across the ecosystem"
url="https://github.com/hyprwm/hyprutils"
arch="all"
license="BSD-3-Clause"
source="
	https://github.com/hyprwm/hyprutils/archive/v$pkgver/hyprutils-v$pkgver.tar.gz
	"
makedepends="cmake samurai pixman-dev gtest-dev"
subpackages="$pkgname-doc $pkgname-dev"
options="!check" # Building with tests causes superfluous stderr output everywhere

build() {
	cmake -B build -G Ninja \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DCMAKE_BUILD_TYPE=None # Need to build Debug type to get tests
	cmake --build build
}

check() {
	cd build
	ctest
}

package() {
	DESTDIR="$pkgdir" cmake --install build
	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}


sha512sums="
7dbcca134d8c6f824a751374a292280dbf1c148b74fca0462abb523d07e338f72e24454482cec9abf0a3ea6d422f2fe1b343c7db895cc9ad5b7bcdbae9f69320  hyprutils-v0.11.0.tar.gz
"
