# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=galculator
pkgver=2.1.4
pkgrel=5
pkgdesc="GTK+3 based scientific calculator"
url="https://github.com/galculator/galculator"
arch="all"
license="GPL-2.0-or-later"
makedepends="gtk+3.0-dev flex bison intltool autoconf automake libtool"
subpackages="$pkgname-doc $pkgname-lang"
source="$pkgname-$pkgver.tar.gz::https://github.com/galculator/galculator/archive/refs/tags/v$pkgver.tar.gz
	gcc-10.patch
	"

prepare() {
	default_prepare
	update_config_sub
	autoreconf -vif
}

build() {
	CFLAGS="$CFLAGS -std=gnu17" \
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr
	make
}

package() {
	make appdatadir=/usr/share/metainfo DESTDIR="$pkgdir" install
}

sha512sums="
99e60020c0b9370f35c494ca91dcfabf520596c682417b5c09ef25890508dc7d5a2e4c2dd931e49909d99f1f40941780ae98c4a50b9e10fce5dbaa168038dd14  galculator-2.1.4.tar.gz
89436f3308c5a81a014105886b4823ef108c95b61c6cde14391128ff9e3f0acab54173a103d9f8afce74e026755566cd32daaf718e052ae840d92a3186c0dc66  gcc-10.patch
"
