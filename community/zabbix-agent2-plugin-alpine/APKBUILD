# Contributor: Kevin Daudt <kdaudt@alpinelinux.org>
# Maintainer: Kevin Daudt <kdaudt@alpinelinux.org>
pkgname=zabbix-agent2-plugin-alpine
pkgver=0.4.1
pkgrel=1
pkgdesc="Alpine related plugins for Zabbix Agent 2"
url="https://gitlab.alpinelinux.org/alpine/infra/zabbix-agent2-plugins"
arch="all"
license="MIT"
depends="zabbix-agent2"
makedepends="go"
source="https://gitlab.alpinelinux.org/alpine/infra/zabbix-agent2-plugins/-/archive/v$pkgver/zabbix-agent2-plugins-v$pkgver.tar.gz"
options="net !check" # no test suite
builddir="$srcdir/zabbix-agent2-plugins-v$pkgver"
provides="zabbix-agent2-alpine=$pkgver-r$pkgrel"

build() {
	go build ./cmd/zabbix-agent2-plugin-alpine.go
}

package() {
	install -Dm0755 zabbix-agent2-plugin-alpine -t "$pkgdir"/usr/libexec
	install -Dm0644 config/alpine.conf \
		-t "$pkgdir"/etc/zabbix/zabbix_agent2.d/plugins.d/
}

sha512sums="
8ba959172cfaee6ea0a5a4cb58263a57773e56bdf3e5b163762527b644efe5848cc995aa69ed694c11f95c3fc0b87b96903afe122d407066b69f5b94170ed511  zabbix-agent2-plugins-v0.4.1.tar.gz
"
