# Contributor: Will Sinatra <wpsinatra@gmail.com>
# Maintainer: Will Sinatra <wpsinatra@gmail.com>
maintainer="Will Sinatra <wpsinatra@gmail.com>"
pkgname=xfel
pkgver=1.3.5
pkgrel=0
pkgdesc="Tiny FEL tools for allwinner SOC, support RISC-V D1 chip."
url="https://github.com/xboot/xfel"
license="MIT"
arch="all !s390x"
depends="libusb-dev"
subpackages="$pkgname-doc $pkgname-udev-rules:udev_rules:noarch"
source="xfel-$pkgver.tar.gz::https://github.com/xboot/xfel/archive/refs/tags/v$pkgver.tar.gz"
options="!check" # No tests defined

build() {
	make
}

package() {
	install -Dm0755 "$builddir"/xfel "$pkgdir/usr/bin/xfel"
	install -Dm0644 "$builddir"/LICENSE "$pkgdir/usr/share/licenses/xfel/LICENSE"
}

udev_rules() {
	pkgdesc="udev rules for xfel"
	install -Dm0644 "$builddir"/99-xfel.rules "$subpkgdir/usr/lib/udev/rules.d/99-xfel.rules"
}
sha512sums="
aa56dde1e76e2f2516a49411916b6d5f0378717610d413b9873e6729db335f0a676eadfcf65b445d60359743840cc4c9b89a0c4a69e1f218d106974a4db015b3  xfel-1.3.5.tar.gz
"
