# Contributor: Will Sinatra <wpsinatra@gmail.com>
# Maintainer: Will Sinatra <wpsinatra@gmail.com>
maintainer="Will Sinatra <wpsinatra@gmail.com>"
pkgname=xfel
pkgver=1.3.4
pkgrel=0
pkgdesc="Tiny FEL tools for allwinner SOC, support RISC-V D1 chip."
url="https://github.com/xboot/xfel"
license="MIT"
arch="all !s390x"
depends="libusb-dev"
subpackages="$pkgname-doc $pkgname-udev-rules:udev_rules:noarch"
source="xfel-$pkgver.tar.gz::https://github.com/xboot/xfel/archive/refs/tags/v$pkgver.tar.gz"
options="!check" # No tests defined

build() {
	make
}

package() {
	install -Dm0755 "$builddir"/xfel "$pkgdir/usr/bin/xfel"
	install -Dm0644 "$builddir"/LICENSE "$pkgdir/usr/share/licenses/xfel/LICENSE"
}

udev_rules() {
	pkgdesc="udev rules for xfel"
	install -Dm0644 "$builddir"/99-xfel.rules "$subpkgdir/usr/lib/udev/rules.d/99-xfel.rules"
}
sha512sums="
66ef96840920c26436766db0c1efe17d70f17a583330e5d162fac596c688079a94e5bc0e94a8d5846b276e08640aea996f20b53fe9e24997eee69ef43e403b6d  xfel-1.3.4.tar.gz
"
