# Contributor: Maarten van Gompel <proycon@anaproy.nl>
# Maintainer: Willow Barraco <contact@willowbarraco.fr>
pkgname=wvkbd
pkgver=0.19.2
pkgrel=0
pkgdesc="On-screen virtual keyboard for wayland compositors using wlroots"
url="https://git.sr.ht/~proycon/wvkbd"
arch="all"
license="GPL-3.0-or-later"
subpackages="
	$pkgname-mobintl
	$pkgname-deskintl
	$pkgname-doc
	"
options="!check" # has no tests
makedepends="fontconfig wayland-dev libxkbcommon-dev pango-dev scdoc"
source="
	$pkgname-v$pkgver.tar.gz::https://git.sr.ht/~proycon/wvkbd/archive/v$pkgver.tar.gz
	"
builddir="$srcdir/$pkgname-v$pkgver"

build() {
	make LAYOUT=mobintl all
	make LAYOUT=deskintl all
}

package() {
	depends="$pkgname-any"
	make LAYOUT=mobintl PREFIX=/usr DESTDIR="$pkgdir" install
	make LAYOUT=deskintl PREFIX=/usr DESTDIR="$pkgdir" install
}

mobintl() {
	pkgdesc="$pkgdesc - mobile international layout"
	provides="$pkgname-any"
	provider_priority="20"
	amove "usr/bin/$subpkgname"
}

deskintl() {
	pkgdesc="$pkgdesc - desktop international layout"
	provides="$pkgname-any"
	provider_priority="10"
	amove "usr/bin/$subpkgname"
}

sha512sums="
507d7e29dadf4ee002e496a6aeaa9b184f669990bad1cfe0d4b168919fb56f44ddadd70414c76d1ff36cd20aa198f012d5ad5f1be08508cd65cb10ee368eeab8  wvkbd-v0.19.2.tar.gz
"
