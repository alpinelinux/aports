# Contributor: Maarten van Gompel <proycon@anaproy.nl>
# Maintainer: Willow Barraco <contact@willowbarraco.fr>
pkgname=wvkbd
pkgver=0.19.4
pkgrel=0
pkgdesc="On-screen virtual keyboard for wayland compositors using wlroots"
url="https://git.sr.ht/~proycon/wvkbd"
arch="all"
license="GPL-3.0-or-later"
subpackages="
	$pkgname-mobintl
	$pkgname-deskintl
	$pkgname-doc
	"
options="!check" # has no tests
makedepends="fontconfig wayland-dev libxkbcommon-dev pango-dev scdoc"
source="
	$pkgname-v$pkgver.tar.gz::https://git.sr.ht/~proycon/wvkbd/archive/v$pkgver.tar.gz
	"
builddir="$srcdir/$pkgname-v$pkgver"

build() {
	make LAYOUT=mobintl all
	make LAYOUT=deskintl all
}

package() {
	depends="$pkgname-any"
	make LAYOUT=mobintl PREFIX=/usr DESTDIR="$pkgdir" install
	make LAYOUT=deskintl PREFIX=/usr DESTDIR="$pkgdir" install
}

mobintl() {
	pkgdesc="$pkgdesc - mobile international layout"
	provides="$pkgname-any"
	provider_priority="20"
	amove "usr/bin/$subpkgname"
}

deskintl() {
	pkgdesc="$pkgdesc - desktop international layout"
	provides="$pkgname-any"
	provider_priority="10"
	amove "usr/bin/$subpkgname"
}

sha512sums="
e9a877eac4913375a3ea160966d0822ed15be540234148ba2638e5b7c19cfa885b962eba260a0f782a762324732454cf48668d85307a748decb198abeb009784  wvkbd-v0.19.4.tar.gz
"
