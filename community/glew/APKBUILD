# Contributor: Carlo Landmeter
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=glew
pkgver=2.3.0
pkgrel=0
pkgdesc="A cross-platform C/C++ extension loading library"
url="https://glew.sourceforge.net/"
arch="all"
license="GPL-2.0-or-later"
options="!check"  # No test suite.
depends_dev="libxmu-dev libxi-dev mesa-dev glu-dev"
makedepends="$depends_dev libx11-dev"
subpackages="$pkgname-dev $pkgname-tools"
source="https://downloads.sourceforge.net/glew/glew-$pkgver.tgz
	glew.patch
	makefile.patch
	"
replaces="mesa-dev"

build() {
	make \
		STRIP= \
		LDFLAGS.EXTRA="$LDFLAGS" \
		CFLAGS.EXTRA="$CFLAGS -fPIC"
}

package() {
	make GLEW_DEST="$pkgdir/usr" install
	install -Dm755 bin/glewinfo bin/visualinfo -t "$pkgdir"/usr/bin
}

tools() {
	pkgdesc="$pkgdesc (tools)"

	amove usr/bin
}

sha512sums="
a452874b7e7e5a359593fcd93475cf2c7a484f649947308f8611461df58772e060fe5a305434c22cc2411e34a20775379fcae735477f6ef056b31730ae87426e  glew-2.3.0.tgz
ceee2d21ce0f4f6cd4b8d9e524440a30c31cd2aa4fa206f2a8081c49d10db5779979bfb15087218d6f290faed9a4ed01e3d26c6a88768fe3ed66f8b171ae2b34  glew.patch
159eb40e5137a9297fc53de8431c25f55810fc0ce1c0e34d124b9b6d3266b30c4fab43d57d7a0bb0d22654bb0eaed4c180d5acf68d86664c1b5a8a1743ef98c7  makefile.patch
"
