Patch-Source: https://gitlab.freedesktop.org/emersion/kanshi/-/merge_requests/6
---
From 416454ddaeb26decaffbe3369ba656974ca1339c Mon Sep 17 00:00:00 2001
From: Achill Gilgenast <achill@achill.org>
Date: Sat, 29 Nov 2025 13:26:07 +0100
Subject: [PATCH] build: add systemd user service

---
 kanshi.service.in | 12 ++++++++++++
 meson.build       |  8 ++++++++
 2 files changed, 20 insertions(+)
 create mode 100644 kanshi.service.in

diff --git a/kanshi.service.in b/kanshi.service.in
new file mode 100644
index 0000000..6ce7d22
--- /dev/null
+++ b/kanshi.service.in
@@ -0,0 +1,12 @@
+[Unit]
+Description=Kanshi output profile management
+Documentation=man:kanshi(1)
+
+[Service]
+Type=simple
+ExecStart=@bindir@/kanshi
+Restart=always
+RestartSec=10
+
+[Install]
+WantedBy=graphical-session.target
diff --git a/meson.build b/meson.build
index de36f6b..2fec50b 100644
--- a/meson.build
+++ b/meson.build
@@ -92,6 +92,14 @@ if vali.found()
 	)
 endif
 
+configure_file(
+	input: 'kanshi.service.in',
+	output: 'kanshi.service',
+	configuration: { 'bindir': get_option('prefix') / get_option('bindir') },
+	install: true,
+	install_dir: get_option('prefix') / 'lib' / 'systemd' / 'user',
+)
+
 subdir('doc')
 
 summary({
-- 
GitLab

