# Contributor: knuxify <knuxify@gmail.com>
# Maintainer: knuxify <knuxify@gmail.com>
pkgname=cutecom
pkgver=0.60.0_rc1_git20251017
_commit=f1ee3412f039bcd84f5d64713cdcdf3bf6b46e62
pkgrel=0
pkgdesc="Graphical serial terminal"
url="https://gitlab.com/cutecom/cutecom"
arch="all"
license="GPL-3.0-or-later"
makedepends="cmake qt6-qtbase-dev qt6-qtserialport-dev samurai"
subpackages="$pkgname-doc"
source="https://gitlab.com/cutecom/cutecom/-/archive/$_commit/cutecom-$_commit.tar.gz"
builddir="$srcdir/$pkgname-$_commit"
options="!check" # no test suite

build() {
	if [ "$CBUILD" != "$CHOST" ]; then
		CMAKE_CROSSOPTS="-DCMAKE_SYSTEM_NAME=Linux -DCMAKE_HOST_SYSTEM_NAME=Linux"
	fi
	cmake -B build \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DBUILD_SHARED_LIBS=True \
		-DCMAKE_BUILD_TYPE=None \
		$CMAKE_CROSSOPTS .
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
d724b3cb46dc2824648e70de40b278b780f33aaf74cfc696879e29020ec62f0948d985cb44213167877d53b30879b4c463d71b50686a29d334b8f2472033fc85  cutecom-f1ee3412f039bcd84f5d64713cdcdf3bf6b46e62.tar.gz
"
