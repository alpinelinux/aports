--- a/src/sptps_test.c
+++ b/src/sptps_test.c
@@ -381,9 +381,8 @@
 				if(!done) {
 					if(!datagram)
 						return 1;
-				} else {
-					break;
 				}
+				// @FIX. else consume full buffer while len remains
 
 				bufp += done;
 				len -= done;
