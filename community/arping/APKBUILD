# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=arping
pkgver=2.28
pkgrel=0
pkgdesc="An ARP ping utility"
url="https://www.habets.pp.se/synscan/programs_arping.html"
arch="all"
license="GPL-2.0-or-later"
depends="!iputils"
makedepends="libnet-dev libpcap-dev"
checkdepends="subunit-dev check-dev"
subpackages="$pkgname-doc"
source="https://www.habets.pp.se/synscan/files/arping-$pkgver.tar.gz
prctl.patch"

build() {
	./configure --prefix=/usr
	make
}

check() {
	./src/arping --help > /dev/null
}

package() {
	make DESTDIR="$pkgdir" install

	cd "$pkgdir"
	rm -vr usr/include
}

sha512sums="
26db92a7268e388af4411acb6fc005f0920b30b546a9acf0d40bb144ab0c4d163b86188c2d021ceb7dae3c1c71bab4c9073deab76bff6294191364e557dcaa64  arping-2.28.tar.gz
d347a0c6efbe281251e04dd1aba8020d2873d04def7d7aab84cbf9f2d07725fbed219f6b2558c935ae4c14e8944ac9662ef6894dee63deeefbb4f89614398d38  prctl.patch
"
