# Contributor: Milan P. Stanić <mps@arvanta.net>
# Maintainer: Milan P. Stanić <mps@arvanta.net>
pkgname=impala
pkgver=0.7.0
pkgrel=0
pkgdesc="TUI for managing iwd"
url="https://github.com/pythops/impala"
arch="all"
license="GPL-3.0-or-later"
makedepends="cargo cargo-auditable"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::$url/archive/refs/tags/v$pkgver.tar.gz"
options="net !check" # Required to download crates, check not usable


prepare() {
	default_prepare

	cargo fetch --target="$CHOST" --locked
}

build() {
	cargo auditable build --frozen --release
}

package() {
	install -Dm 755 target/release/$pkgname $pkgdir/usr/bin/$pkgname
	install -Dm 644 Readme.md -t $pkgdir/usr/share/doc/$pkgname
}

sha512sums="
a64faf2a6255a525883a85e79c4b9d62c10260f016f342a50a68cd997fc827333c31f3494bb37eeda7abfd7752ebf927b671930c8086c0857093db86ca7a2fff  impala-0.7.0.tar.gz
"
