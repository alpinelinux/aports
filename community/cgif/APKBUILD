# Contributor: Alex Yam <alex@alexyam.com>
# Maintainer: mio <miyopan@e.email>
maintainer="mio <miyopan@e.email>"
pkgname=cgif
pkgver=0.5.1
pkgrel=0
pkgdesc="Fast and lightweight GIF encoder written in C"
url="https://github.com/dloebl/cgif"
arch="all"
license="MIT"
makedepends="muon"
checkdepends="python3"
subpackages="$pkgname-dev $pkgname-doc"
source="https://github.com/dloebl/cgif/archive/v$pkgver/cgif-v$pkgver.tar.gz"

build() {
	abuild-muon \
		-Db_lto=true \
		-Dtests="$(want_check && echo true || echo false)" \
		output .
	ninja -C output
}

check() {
	muon -C output test -R -v
}

package() {
	DESTDIR="$pkgdir" muon -C output install

	install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/cgif/
}

sha512sums="
6e8b4d01f5f7b5abe5daf2883b54d19b37f73bc560d87dd5dda5835ff11dc95556b1572813c8c72fc5719f5a6978aa05ba60c8b4bb4ab2615ff4ae8d5d7347a7  cgif-v0.5.1.tar.gz
"
