# The group tag is just to easily find this APKBUILD by some scripts for automation
# group=kde-applications
maintainer="team/kde <bribbers@disroot.org>"
pkgname=arianna
pkgver=25.12.2
pkgrel=0
pkgdesc="EPub Reader for mobile devices"
url="https://invent.kde.org/graphics/arianna/"
# armhf blocked by qt6-qtdeclarative
# s390x, riscv64 and x86 blocked by qt6-qtwebengine
arch="all !armhf !s390x !riscv64 !x86"
license="(BSD-2-Clause OR BSD-3-Clause) AND (GPL-2.0-only OR GPL-3.0-only) AND (LGPL-2.0-or-later OR LGPL-2.1-or-later OR LGPL-3.0-or-later)"
depends="
	kirigami-addons
	kirigami
	"
makedepends="
	baloo-dev
	extra-cmake-modules
	karchive-dev
	kconfig-dev
	kcoreaddons-dev
	kdbusaddons-dev
	kfilemetadata-dev
	ki18n-dev
	kirigami-addons-dev
	kirigami-dev
	kwindowsystem-dev
	qqc2-desktop-style-dev
	qt6-qtbase-dev
	qt6-qtdeclarative-dev
	qt6-qtdeclarative-private-dev
	qt6-qthttpserver-dev
	qt6-qtsvg-dev
	qt6-qtwebengine-dev
	qt6-qtwebsockets-dev
	samurai
	"
subpackages="$pkgname-lang"
_repo_url="https://invent.kde.org/graphics/arianna.git"
source="https://download.kde.org/stable/release-service/$pkgver/src/arianna-$pkgver.tar.xz"
# No tests
options="!check"

build() {
	cmake -B build -G Ninja \
		-DCMAKE_BUILD_TYPE=MinSizeRel \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
0c1c84b5e06cb9a0e0ccd27831dc822a65ab134db46ca645b136950fb51c08979f139377f73031e57a3eecf4668937d01c795121d02cdd7468905ef552c0852a  arianna-25.12.2.tar.xz
"
