From 8d1f60201450869cf8e791080aed9d75b7a12e0a Mon Sep 17 00:00:00 2001
From: Omair Majid <omajid@redhat.com>
Date: Sat, 1 Nov 2025 17:44:13 -0400
Subject: [PATCH] traverseheap no longer supports -verify

---
 debugging-via-dotnet-dump/test.sh | 12 ++----------
 1 file changed, 2 insertions(+), 10 deletions(-)

diff --git a/debugging-via-dotnet-dump/test.sh b/debugging-via-dotnet-dump/test.sh
index 3633413..31ea988 100755
--- a/debugging-via-dotnet-dump/test.sh
+++ b/debugging-via-dotnet-dump/test.sh
@@ -680,16 +680,8 @@ grep -E '^ +[0-9]+ timers$' dump.out
 heading "traverseheap"
 if [[ "$(uname -m)" != "aarch64" ]]; then
     dump-analyze 'help traverseheap' > dump.out
-    # Disable exit on error for traverseheap. Reported as https://github.com/dotnet/diagnostics/issues/3842
-    if grep -F -- '-verify' dump.out; then
-        set +e
-        dump-analyze 'traverseheap -xml -verify full-heap' > dump.out
-        set -e
-    else
-        set +e
-        dump-analyze 'traverseheap -xml full-heap' > dump.out
-        set -e
-    fi
+    cat dump.out
+    dump-analyze 'traverseheap -xml full-heap' > dump.out
     cat dump.out
     head full-heap
     tail full-heap
