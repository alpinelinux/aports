# Contributor: Sodface <sod@sodface.com>
# Maintainer: Sodface <sod@sodface.com>
pkgname=lowdown
pkgver=2.0.4
_pkgver="${pkgver//./_}"
pkgrel=0
pkgdesc="Simple markdown translator"
url="https://kristaps.bsd.lv/lowdown/"
arch="all"
license="ISC"
makedepends="bmake"
depends_dev="$pkgname=$pkgver-r$pkgrel"
subpackages="$pkgname-dev $pkgname-doc $pkgname-libs"
source="$pkgname-$pkgver.tar.gz::https://github.com/kristapsdz/lowdown/archive/refs/tags/VERSION_$_pkgver.tar.gz"
builddir="$srcdir/$pkgname-VERSION_$_pkgver"

build() {
	# standalone configure script not generated by autoconf
	./configure PREFIX=/usr MANDIR=/usr/share/man LDFLAGS="$LDFLAGS"
	bmake
}

check() {
	bmake regress
}

package() {
	bmake DESTDIR="$pkgdir" install install_libs
}

sha512sums="
db396f738c3effdd55f112f2f71183b32b45ae2f8ba999e03df5162612e26a313d7b3ca1c5840cb71805f4429a4a3b67fe61a731aadc5cc989b74ff2da2d5b7e  lowdown-2.0.4.tar.gz
"
