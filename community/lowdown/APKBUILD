# Contributor: Sodface <sod@sodface.com>
# Maintainer: Sodface <sod@sodface.com>
pkgname=lowdown
pkgver=2.0.3
_pkgver="${pkgver//./_}"
pkgrel=0
pkgdesc="Simple markdown translator"
url="https://kristaps.bsd.lv/lowdown/"
arch="all"
license="ISC"
makedepends="bmake"
depends_dev="$pkgname=$pkgver-r$pkgrel"
subpackages="$pkgname-dev $pkgname-doc $pkgname-libs"
source="$pkgname-$pkgver.tar.gz::https://github.com/kristapsdz/lowdown/archive/refs/tags/VERSION_$_pkgver.tar.gz"
builddir="$srcdir/$pkgname-VERSION_$_pkgver"

build() {
	# standalone configure script not generated by autoconf
	./configure PREFIX=/usr MANDIR=/usr/share/man LDFLAGS="$LDFLAGS"
	bmake
}

check() {
	bmake regress
}

package() {
	bmake DESTDIR="$pkgdir" install install_libs
}

sha512sums="
63bb25b1ebecc396a5fc20275ea5c1386baf6eee185251108e5dce40306e505f3d2e36c729b58538ecccc1358bdd33be6d92f486544f07cec5c8f470fdd3c00d  lowdown-2.0.3.tar.gz
"
