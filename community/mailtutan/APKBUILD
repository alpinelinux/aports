# Contributor: Matthias Ahouansou <matthias@ahouansou.cz>
# Maintainer: Matthias Ahouansou <matthias@ahouansou.cz>
pkgname=mailtutan
pkgver=0.3.0
pkgrel=3
pkgdesc="An SMTP server for test and development environments written in Rust"
url="https://github.com/mailtutan/mailtutan"
arch="all"
license="MIT"
makedepends="
	cargo
	cargo-auditable
	cmake
	ninja
"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/mailtutan/mailtutan/archive/refs/tags/v$pkgver.tar.gz
	cargo-update.patch
	yew-0.21.patch
"
options="!check" # no tests

prepare() {
	default_prepare
	cargo fetch --target="$CTARGET" --locked
}

build() {
	cargo auditable build --release --frozen
}

package() {
	install -Dm 755 target/release/mailtutan "$pkgdir"/usr/bin/mailtutan
}

sha512sums="
5193a5a946a50e865de0b60930c4ba2d227e3c418d4f6d90a9eba7a184c7c09441be459e09160bf76ee943703d41a8db7986901b2a098f56a9db030c4fc342c1  mailtutan-0.3.0.tar.gz
439ebf18099a8d937738163785a44e2ac40d10f05b88f13da33cec7a346a7323c92e8d3e9caa5c29f55bdb82bfffdb90d10474a014deb47a32025b6db11267b3  cargo-update.patch
27f8c3e62f4858fa1cea33163d5c6f7e1d3207d297f358da285abdc13db30a48d72059c65763b89ba82f8f31406061be0e2ee59639f5168eb7f12d470dbffd64  yew-0.21.patch
"
