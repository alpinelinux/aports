# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=zrc
pkgver=2.5h_git20251201
_gitrev=268a2989f033b128b4044cfd9c1d528ca096cb2a
pkgrel=0
pkgdesc="UNIX shell and scripting language with syntax similar to Tcl"
url="https://github.com/Edd12321/zrc"
arch="all"
license="BSD-2-Clause"
makedepends="bison flex bsd-compat-headers"
install="$pkgname.post-install $pkgname.post-upgrade $pkgname.pre-deinstall"
subpackages="$pkgname-doc"
source="https://github.com/Edd12321/zrc/archive/$_gitrev/zrc-$_gitrev.tar.gz
	fix-basename.patch
	"
builddir="$srcdir/$pkgname-$_gitrev"
options="!check" # no test suite

build() {
	make
}

package() {
	install -Dvm755 bin/zrc -t "$pkgdir"/usr/bin/

	mkdir -p "$pkgdir"/usr/share/doc/$pkgname
	cp -R examples "$pkgdir"/usr/share/doc/$pkgname/
	install -Dvm644 .zrc "$pkgdir"/usr/share/doc/$pkgname/config.example

	install -Dvm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
}

sha512sums="
28d390cf9f94f0feeac22242b82a5f62108c9a96be82b7dc45614235a69cb5f1b1a7e1d5e32e5c07b6ed137f20b15fb02fb0fc5c44349cfeeb8a8fa32f30a066  zrc-268a2989f033b128b4044cfd9c1d528ca096cb2a.tar.gz
d965695513df524eb0ff25edbc2e5b074f84c07ebf0fb0a0af7abac6ec311011b99c84391cfe44fd4698627feac7bfc53bd8d92ee02bd0db8ffb503b60140340  fix-basename.patch
"
