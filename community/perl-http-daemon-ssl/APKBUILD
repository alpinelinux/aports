# Automatically generated by apkbuild-cpan, template 4
# Contributor: Patrycja Rosa <alpine@ptrcnull.me>
maintainer="Patrycja Rosa <alpine@ptrcnull.me>"
pkgname=perl-http-daemon-ssl
pkgver=1.04
pkgrel=0
# _pkgreal is used by apkbuild-cpan to find modules at MetaCpan
_pkgreal=HTTP-Daemon-SSL
pkgdesc="Perl module for HTTP-Daemon-SSL"
url="https://metacpan.org/release/HTTP-Daemon-SSL/"
arch="noarch"
license="GPL-1.0-or-later OR Artistic-1.0-Perl"
depends="perl perl-http-daemon perl-io-socket-ssl"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/A/AU/AUFFLICK/HTTP-Daemon-SSL-$pkgver.tar.gz
	improved-test.patch
	"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl -I. Makefile.PL \
		INSTALLDIRS=vendor \
		NO_PACKLIST=1 \
		NO_PERLLOCAL=1
	make
}

check() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make test TEST_VERBOSE=1
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
ff7b1350c376e1c1c743db6becde4c1633ac0dd8da4261d0134a6cad26586b7b296d09f89afa31d529adfe3fc14fad5551ba3c5bba6005f60699fe6b47046c3b  HTTP-Daemon-SSL-1.04.tar.gz
7b664e998aa7aa83955274543b213e9d20abba181a90c7e4a8f2df879fb0342a233f322a82cca6ad72c2d51b601e26c5d16514fb102e95426cf5ddf30da9a47e  improved-test.patch
"
