# Automatically generated by apkbuild-cpan, template 1
# Maintainer: Stuart Cardall <developer@it-offshore.co.uk>
pkgname=perl-module-scandeps
_pkgreal=Module-ScanDeps
pkgver=1.23
pkgrel=0
pkgdesc="Recursively scan Perl code for dependencies"
url="http://search.cpan.org/dist/Module-ScanDeps/"
arch="noarch"
license="GPL PerlArtistic"
cpanmakedepends="perl-test-requires"
makedepends="perl-dev $cpanmakedepends perl-test-pod"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/R/RS/RSCHUPP/$_pkgreal-$pkgver.tar.gz"
builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	default_prepare || return 1
	cd "$builddir"

	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$builddir"

	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make && make test
}

package() {
	cd "$builddir"

	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="3553590e50b68a50cd5196ca035dafae  Module-ScanDeps-1.23.tar.gz"
sha256sums="162b6f771197ad4662ac60c427d473b4c0a41cac476fa96b48556cce7fca040e  Module-ScanDeps-1.23.tar.gz"
sha512sums="7ceb1705aa9be7601a44dea2521a0952de70eb294a88939147d254c3af7056602bbfab97fd117ac4f4184da92354aa1f83f1207d84bf502eb02b0c60fc417ba8  Module-ScanDeps-1.23.tar.gz"
