# Automatically generated by apkbuild-cpan, template 1
# Maintainer: Stuart Cardall <developer@it-offshore.co.uk>
pkgname=perl-module-scandeps
_pkgreal=Module-ScanDeps
pkgver=1.22
pkgrel=0
pkgdesc="Recursively scan Perl code for dependencies"
url="http://search.cpan.org/dist/Module-ScanDeps/"
arch="noarch"
license="GPL PerlArtistic"
cpanmakedepends="perl-test-requires"
makedepends="perl-dev $cpanmakedepends perl-test-pod"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/R/RS/RSCHUPP/$_pkgreal-$pkgver.tar.gz"
builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	default_prepare || return 1
	cd "$builddir"

	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$builddir"

	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make && make test
}

package() {
	cd "$builddir"

	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="2f0ba5325c8ee0896db9f1407be89d94  Module-ScanDeps-1.22.tar.gz"
sha256sums="4670de213243cd0002838279f4d30c41879ff8d86a5740cd215cdb234f13f799  Module-ScanDeps-1.22.tar.gz"
sha512sums="ce3d86ae02fee983f619a1594feda5d3114d297bf47031227f1d87a8e4c444f25acf3ea7647289f05a5d9ff954ffea44cf2cd3a9159e147550f2d7823608a524  Module-ScanDeps-1.22.tar.gz"
