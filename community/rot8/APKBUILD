# Maintainer: Antoine Martin (ayakael) <dev@ayakael.net>
pkgname=rot8
pkgver=1.0.1
pkgrel=1
pkgdesc="A screen rotation daemon"
arch="all"
url="https://github.com/efernau/rot8"
license="MIT"
options="!check net" # No testsuite
makedepends="rust cargo"
subpackages="$pkgname-doc"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/efernau/rot8/archive/refs/tags/v$pkgver.tar.gz
	rot8-cargo.lock
	"

prepare() {
	default_prepare
	cp "$srcdir"/rot8-cargo.lock "$builddir"/Cargo.lock
	cargo fetch --locked
}

build() {
	cargo build --frozen --release --all-features
}

package() {
	install -Dm755 "$builddir"/target/release/rot8 "$pkgdir/usr/bin/rot8"
	install -Dm644 "$builddir"/LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
}
sha512sums="
7921a77ddf227da82f6f7728746aec4a6b64e5f96af914bf7b7db86a9853e65cb0169816061f72839878929abdd799f8831ce6a9333333d753015f763628a867  rot8-1.0.1.tar.gz
472f7e82737a4c3c30f2c4e3e431d5ff9694c55507d1d5af6c16bb2fa34d6dc2ef98abdb7846360b9cabc7c24da50b3d7977db2517176487ec56fd1b92ad214b  rot8-cargo.lock
"
