maintainer="Achill Gilgenast <achill@achill.org>"
pkgname=qlcplus
pkgver=5.1.0
pkgrel=0
pkgdesc="The open DMX lighting desk software for controlling professional lighting fixtures"
url="https://qlcplus.org/"
# armhf blocked by qt6-qtmultimedia
arch="all !armhf"
license="Apache-2.0"
makedepends="
	alsa-lib-dev
	bash
	desktop-file-utils
	fftw
	libftdi1-dev
	libmad-dev
	libsndfile-dev
	qt6-qtmultimedia-dev
	qt6-qtserialport-dev
	qt6-qttools-dev
	qt6-qtwebsockets-dev
	shared-mime-info
	"
checkdepends="py3-lxml"
subpackages="$pkgname-doc $pkgname-libs $pkgname-udev"
source="$pkgname-$pkgver.tar.gz::https://github.com/mcallegari/qlcplus/archive/QLC+_$pkgver.tar.gz
	usr-udev-path.patch
	"
builddir="$srcdir/qlcplus-QLC-_$pkgver"
options="!check" # requires desktop environment

build() {
	qmake6
	make
}

check() {
	make check
}

package() {
	PATH=/usr/lib/qt6/bin:"$PATH" make INSTALL_ROOT="$pkgdir" install
}

sha512sums="
e743c51f5a92b0d6a83158eae4e8a9161290bede9fab3321ba4aa8f621f1651cdcfad0a744917b7762c7b38ec2ad4c729eb44931728b2a944816883c26134a98  qlcplus-5.1.0.tar.gz
26af9861fc7753c8383bacca3d57355a8459ac84436d041107e0697bbad1ed3eeef889a5638d4608c3c2a69f39a31880c943b7ecf08a847faf3dd5c57351c2cb  usr-udev-path.patch
"
