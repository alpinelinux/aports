# Automatically generated by apkbuild-cpan, template 4
# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=perl-xml-stream
pkgver=1.24
pkgrel=0
#_pkgreal is used by apkbuild-cpan to find modules at MetaCpan
_pkgreal=XML-Stream
pkgdesc="XML stream support library for XMPP-like protocols"
url="https://metacpan.org/release/XML-Stream/"
arch="noarch"
license="LGPL-2.1-or-later"
depends="perl perl-authen-sasl perl-io-socket-ssl"
makedepends="perl-module-build"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/D/DA/DAPATRICK/XML-Stream-$pkgver.tar.gz
	improvements.patch
	precedence.patch
	ssl-verify.patch
	"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	perl Build.PL \
		--installdirs=vendor \
		--create_packlist=0
	./Build
}

check() {
	./Build test
}

package() {
	./Build install --destdir="$pkgdir"
}

sha512sums="
f762e09197fa7f36cee8484e30a6ce972e407d92cbe55bdf96bcc0073187aff34630c5d9dd2555a14cd297e506875dc2ff153b09001c971b020c37340886025d  XML-Stream-1.24.tar.gz
e7b165c381f80e1db2639a71fa13620b8bcdcb6098d9cb414d5a382d06ee2b28dc8834af07e0d587152ab0bed1aceb4c57b332de933262731bb0e9ec1e658180  improvements.patch
6e5084b2888dcec6b73fbd9845e16df50fafd9715c4adfeaee5c67322b5030bd8d78c2cd25132d5b6e437b0c9be3d96f44c9f00e4bd4035d50ecbd42cdcc6ce7  precedence.patch
6a48c3ad2c356ac98f59f84b48e68738214c7812491d921dcedf410aa667ab69b1ece01ffe0c141c8d66edaaf2e022bb50880e6ea72ea849026dba8ac37dca7c  ssl-verify.patch
"
