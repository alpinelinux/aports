# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=tuckr
pkgver=0.12.0
pkgrel=0
pkgdesc="Dotfile manager inspired by Stow and Git"
url="https://raphgl.github.io/Tuckr/"
arch="all"
license="GPL-3.0-only"
makedepends="cargo cargo-auditable"
source="https://github.com/RaphGL/Tuckr/archive/refs/tags/$pkgver/Tuckr-$pkgver.tar.gz"
builddir="$srcdir/Tuckr-$pkgver"

prepare() {
	default_prepare

	cargo fetch --target="$CHOST" --locked
}

build() {
	cargo auditable build --frozen --release
}

check() {
	cargo test --frozen
}

package() {
	local targetdir="target/${CARGO_BUILD_TARGET:+$CARGO_BUILD_TARGET/}"

	install -Dvm755 $targetdir/release/tuckr -t "$pkgdir"/usr/bin/
}

sha512sums="
a4cc7bc07961c76eed006dd77adc45e6c74d0f52509e0116188d234fbfb13ce18525032b585b62e0968b273d6a75d8105a43cfa38d3dce39d932c91a52114c44  Tuckr-0.12.0.tar.gz
"
