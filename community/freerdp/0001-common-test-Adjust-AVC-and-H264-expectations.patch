Source: https://github.com/FreeRDP/FreeRDP/commit/b9776e02ee830152044571a1698069024ddf9091

From b9776e02ee830152044571a1698069024ddf9091 Mon Sep 17 00:00:00 2001
From: Nathan Pratta Teodosio <nathan.teodosio@canonical.com>
Date: Mon, 24 Nov 2025 12:16:12 +0100
Subject: [PATCH] [common,test] Adjust AVC and H264 expectations.

Closes #11950, https://launchpad.net/bugs/2132293.
---
 client/common/test/TestClientRdpFile.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/client/common/test/TestClientRdpFile.c b/client/common/test/TestClientRdpFile.c
index 39a7da79d..a2d956df7 100644
--- a/client/common/test/TestClientRdpFile.c
+++ b/client/common/test/TestClientRdpFile.c
@@ -416,6 +416,12 @@ static bool test_data(const char* json, const void* data, size_t len, bool unche
 	if (!settings || !expect)
 		goto fail;
 
+#ifndef WITH_GFX_H264
+	if (!freerdp_settings_set_bool(expect, FreeRDP_GfxH264, FALSE) ||
+	    !freerdp_settings_set_bool(expect, FreeRDP_GfxAVC444, FALSE) ||
+	    !freerdp_settings_set_bool(expect, FreeRDP_GfxAVC444v2, FALSE))
+		goto fail;
+#endif
 	wLog* log = WLog_Get(__func__);
 	WLog_Print(log, WLOG_INFO, "Test cast '%s'", json);
 	if (freerdp_settings_print_diff(log, WLOG_ERROR, expect, settings))
-- 
2.51.2

