diff --git a/tests/build-auth.rs b/tests/build-auth.rs
index 5420de7..18dcdba 100644
--- a/tests/build-auth.rs
+++ b/tests/build-auth.rs
@@ -20,7 +20,7 @@ fn http_auth_offered() {
     let addr = server.local_addr().unwrap();
 
     fn headers(rdr: &mut BufRead) -> HashSet<String> {
-        let valid = ["GET", "Authorization", "Accept", "User-Agent"];
+        let valid = ["GET", "Authorization"];
         rdr.lines().map(|s| s.unwrap())
            .take_while(|s| s.len() > 2)
            .map(|s| s.trim().to_string())
@@ -33,11 +33,6 @@ fn http_auth_offered() {
     let t = thread::spawn(move|| {
         let mut conn = BufStream::new(server.accept().unwrap().0);
         let req = headers(&mut conn);
-        let user_agent = if cfg!(windows) {
-            "User-Agent: git/1.0 (libgit2 0.26.0)"
-        } else {
-            "User-Agent: git/2.0 (libgit2 0.26.0)"
-        };
         conn.write_all(b"\
             HTTP/1.1 401 Unauthorized\r\n\
             WWW-Authenticate: Basic realm=\"wheee\"\r\n
@@ -45,8 +40,6 @@ fn http_auth_offered() {
         ").unwrap();
         assert_eq!(req, vec![
             "GET /foo/bar/info/refs?service=git-upload-pack HTTP/1.1",
-            "Accept: */*",
-            user_agent,
         ].into_iter().map(|s| s.to_string()).collect());
         drop(conn);
 
@@ -60,8 +53,6 @@ fn http_auth_offered() {
         assert_eq!(req, vec![
             "GET /foo/bar/info/refs?service=git-upload-pack HTTP/1.1",
             "Authorization: Basic Zm9vOmJhcg==",
-            "Accept: */*",
-            user_agent,
         ].into_iter().map(|s| s.to_string()).collect());
     });
 
