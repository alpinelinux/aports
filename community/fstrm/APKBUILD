# Contributor: tcely <tcely@users.noreply.github.com>
# Maintainer: tcely <fstrm+aports@tcely.33mail.com>
pkgname="fstrm"
pkgver="0.5.0"
pkgrel=0
pkgdesc="Frame Streams implementation in C"
url="https://github.com/farsightsec/fstrm"
arch="all"
# check failure on s390x reported upstream:
#    https://github.com/farsightsec/fstrm/issues/58
license="MIT"
depends=""
depends_dev="libevent-dev"
makedepends="$depends_dev"
install=""
subpackages="$pkgname-dev $pkgname-doc"
source="https://dl.farsightsecurity.com/dist/$pkgname/$pkgname-$pkgver.tar.gz"

build() {
	cd "$builddir"

	./configure \
		--build="$CBUILD" \
		--host="$CHOST" \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man
	make
}

check() {
	cd "$builddir"

	make check
}

package() {
	cd "$builddir"

	make -j1 DESTDIR="$pkgdir" install
}

sha256sums="10ee7792a86face1d2271dc591652ab8c7af6976883887c69fdb11f10da135fc  fstrm-0.5.0.tar.gz"
sha512sums="cc60d8974d73d4f5327c46fe642151c88cf8d670ac9bb5db6cb5990b6c0995a0e09c9ae1a6c86ecbfd35fe03664b5402becd68bc6e81e83e9f4b84668d866f25  fstrm-0.5.0.tar.gz"
