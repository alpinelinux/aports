# Contributor: Andrew Wilcox <AWilcox@Wilcox-Tech.com>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=py-django
_pkgname=Django
pkgver=1.7.9
pkgrel=2
pkgdesc="A high-level Python Web framework"
url="http://djangoproject.com/"
arch="noarch"
license="BSD"
depends="python"
depends_dev=""
makedepends="python-dev py-setuptools"
install=""
subpackages=""
source="http://pypi.python.org/packages/source/${_pkgname:0:1}/$_pkgname/$_pkgname-$pkgver.tar.gz
	CVE-2015-8213.patch
	CVE-2016-6186.patch
"

prepare() {
	cd "$srcdir"/Django-$pkgver
	for i in $source; do
		case $i in
			*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
			esac
	done
}


_builddir="$srcdir"/$_pkgname-$pkgver
build() {
	cd "$_builddir"
	python setup.py build || return 1
}

package() {
	cd "$_builddir"
	python setup.py install --root "$pkgdir" || return 1
}

md5sums="6ea69f3ebb73755bd2a4c9e3743f17c8  Django-1.7.9.tar.gz
ad2a4a3fa3694e11293085600d787093  CVE-2015-8213.patch
fcf63971a039f3945be5d4df9bf4ffe2  CVE-2016-6186.patch"
sha256sums="4f3f9fe4e5d20ff8ed6a90b5d2f2df2d8fc054e478cdcc3db81c6b29bd217860  Django-1.7.9.tar.gz
fe5e611b6b958eee50af2594588feb6c3e442d7b736c9bb87b47f78b588585aa  CVE-2015-8213.patch
a7e39d7bc2b849141dca7bfbbd1938530bc7b024431ce83da9c0e7f9b98f51e6  CVE-2016-6186.patch"
sha512sums="349f6950ec7cb37c8ae44a5fc9b924ef0d02e244c834a65bbdbe84d8a993474c6e94f82ac0df5bd08594c8cc6f72bf9413b7b30091319dbb5c018f211d3e9e67  Django-1.7.9.tar.gz
1c4e77e05492eff7dead5141e81bbfd049334d05e643a34d2e662df492bc38bce2e7ec55e3032193821f3ba9267809bc3d25f77c0ec8ee0b3ee20e046694a3a2  CVE-2015-8213.patch
dd3c090575fbc176dcb4d583686e5ef7810b9636cd4236640d4ee1f2ae1ffab957d867ca7f0f96535b85113e7d19d3b60a3f226bca9aff5403b383b3385468fc  CVE-2016-6186.patch"
