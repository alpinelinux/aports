# Contributor: Francesco Colista <francesco.colista@gmail.com>
# Maintainer: Francesco Colista <francesco.colista@gmail.com>
pkgname=argp-standalone
pkgver=1.3
pkgrel=2
pkgdesc="Hierarchial argument parsing library broken out from glibc"
url="http://www.lysator.liu.se/~nisse/misc/"
[ "$ALPINE_LIBC" != "eglibc" ] && arch="all"
license="GPL2+"
depends=""
depends_dev="libtool automake autoconf"
makedepends="$depends_dev"
install=""
subpackages=""
source="http://www.lysator.liu.se/~nisse/misc/$pkgname-$pkgver.tar.gz
	001-throw-in-funcdef.patch
	gnu89-inline.patch
	"

builddir="$srcdir"/$pkgname-$pkgver
prepare() {
	local i
	cd "$builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i;;
		esac
	done
	autoreconf -vif
}

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr
	make && make check
}

package() {
	cd "$builddir"
	install -D -m644 argp.h "$pkgdir"/usr/include/argp.h
	install -D -m755 libargp.a "$pkgdir"/usr/lib/libargp.a
}

