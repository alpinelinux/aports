# Contributor: Kaarle Ritvanen <kaarle.ritvanen@datakunkku.fi>
# Maintainer: Kaarle Ritvanen <kaarle.ritvanen@datakunkku.fi>
pkgname=ipset
pkgver=6.29
pkgrel=1
pkgdesc="Manage Linux IP sets"
url=http://ipset.netfilter.org/
arch="all"
license="GPL2"
depends_dev="libmnl-dev"
makedepends="$depends_dev automake autoconf libtool linux-headers"
subpackages="$pkgname-dev $pkgname-doc"
source="http://ipset.netfilter.org/ipset-$pkgver.tar.bz2
		ipset.initd
		ipset.confd
		"
builddir=$srcdir/ipset-$pkgver

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--with-kmod=no \
		--prefix=/usr \
		|| return 1
	make || return 1
}

package() {
	cd "$builddir"
	make install DESTDIR=$pkgdir || return

	mkdir -p "$pkgdir/etc/ipset.d" \
		"$pkgdir/var/lib/ipset"
	install -m 755 -D "$startdir/ipset.initd" "$pkgdir/etc/init.d/ipset"
	install -m 644 -D "$startdir/ipset.confd" "$pkgdir/etc/conf.d/ipset"
}

md5sums="fd8ea35997115c5c630eee22f0beecec  ipset-6.29.tar.bz2
c1008b16846e160b047824ec413c1641  ipset.initd
42dba16016476fff1e96e87f203bf9ce  ipset.confd"
sha256sums="6af58b21c8b475b1058e02529ea9f15b4b727dbc13dc9cbddf89941b0103880e  ipset-6.29.tar.bz2
e41feffe703b8485cc3501b8ec8c7e2cf186ac60236126053698b2bdbc9b955b  ipset.initd
da86b6a8b9089c58faad3042bc13f0f374c9672d8d396bda91da366b991da6cb  ipset.confd"
sha512sums="ce62c72c4cea1b52f069602a90fbffe9bcb12bf70f5b42d93cacb48e4b5d1192a13b18be45391c66a65421f41968e73416e16af25ae6ef19ba92bdbb2cd45ff3  ipset-6.29.tar.bz2
8f1f7cf84e843201b199b77ef72c6ab32e53c19e005747cf2a901481465735f8ad4942adbe97e16fa88ca7675ee3ed5102a663260265f26bdeb47b2ae1612a3c  ipset.initd
822fbabee6ed009e386913a296f8c6cf66b513626aa23eaa33fe0f8ec5ac97d88dd66e5e94f8d0129265015b450c6520c196dc4b0187390c09e87876d0eb2f4d  ipset.confd"
