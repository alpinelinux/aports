# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=xkbcomp
pkgver=1.5.0
pkgrel=0
pkgdesc="XKBD keymap compiler"
url="https://xorg.freedesktop.org"
arch="all"
license="MIT"
makedepends="libx11-dev libxkbfile-dev util-macros"
subpackages="$pkgname-dev $pkgname-doc"
source="https://www.x.org/releases/individual/app/xkbcomp-$pkgver.tar.xz"

# secfixes:
#   1.5.0-r0:
#     - CVE-2018-15853
#     - CVE-2018-15859
#     - CVE-2018-15861
#     - CVE-2018-15863

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
d8ef4906261251e2600b3650660fbe88ed99a44694f1e59b433e0811f1ab5234c4f2f0b3647fa5372fb0f46b56eac60c0219a762bf1af0ab06226b63e4a6b081  xkbcomp-1.5.0.tar.xz
"
