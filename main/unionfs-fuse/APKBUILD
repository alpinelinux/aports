# Maintainer: Michael Zhou <zhoumichaely@gmail.com>
pkgname=unionfs-fuse
pkgver=1.0
pkgrel=0
pkgdesc="Union Filesystem in Userspace"
url="https://podgorny.cz/moin/UnionFsFuse"
arch="all"
license="BSD"
depends=""
makedepends="fuse-dev linux-headers"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/rpodgorny/unionfs-fuse/archive/v${pkgver}.tar.gz
	0001-include-asm-ioctl.h-for-_IOC_SIZE.patch"

builddir="${srcdir}"/$pkgname-$pkgver

prepare() {
        cd "$builddir"
        for i in $source; do
                case $i in
                *.patch) msg $i; patch -p1 -i "$srcdir"/$i;;
                esac
        done
}

build() {
	cd "$builddir"
	make
}

package() {
	cd "$builddir"
	mkdir -p "$pkgdir"/usr/share/man/man8/
	make DESTDIR="$pkgdir" PREFIX=/usr install
}

sha512sums="805151acaeae8526fba430701a1690f6eb0ad8331a9e730095ee538dc2b148d02fe996a63e8a7f6471d1ef622cc5c03d82bd2b2faad1ebe3b614ec343c2f55de  unionfs-fuse-1.0.tar.gz
fa8d87a33c6971fff13545766c803cbe6960db068edd6e1f6479d76e17f60fce1b6e67a6045878a2f2cffbe9aa3064522f2e88e395d7713627ea12f24a02e346  0001-include-asm-ioctl.h-for-_IOC_SIZE.patch"
