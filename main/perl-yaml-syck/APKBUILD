# Automatically generated by apkbuild-cpan, template 3
# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=perl-yaml-syck
#_pkgreal is used by apkbuild-cpan to find modules at MetaCpan
_pkgreal=YAML-Syck
pkgver=1.36
pkgrel=0
pkgdesc="Fast, lightweight YAML loader and dumper"
url="https://metacpan.org/release/YAML-Syck/"
arch="all"
license="MIT"
depends="perl"
makedepends="perl-dev"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/T/TO/TODDR/YAML-Syck-$pkgver.tar.gz
	gcc15.patch
	"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl -I. Makefile.PL INSTALLDIRS=vendor
	make
}

check() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make test
}

package() {
	make DESTDIR="$pkgdir" install
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

sha512sums="
596ddbb0502da94c78d4398b7f66311362b0bff1f9dd0ee58199e7a963d0a985f32404de365784d296d16579f6e288b0aade38988f58aaa1c9f82790eac97b01  YAML-Syck-1.36.tar.gz
4d5f1c2f4af098b92183f3694e8b070fb3cc06e0008c08b151afcc7687b9db7bf82d64221cef023595912eba3143eb5a7f03059059ce5341d65d829a4db204cd  gcc15.patch
"
