# Contributor: Carlo Landmeter <clandmeter@gmail.com>
# Maintainer: Carlo Landmeter <clandmeter@gmail.com>
pkgname=php-apc
pkgver=3.1.13
pkgrel=1
pkgdesc="Alternative PHP Cache"
url="http://pecl.php.net/package/APC"
arch="all"
license="PHP"
depends="php"
makedepends="php-dev autoconf pcre-dev"
subpackages=""
source="http://pecl.php.net/get/APC-${pkgver}.tgz
apc.ini"

build() {
	cd "$srcdir/APC-${pkgver}"
	phpize || return 1
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--enable-apc \
		--disable-apc-mmap \
		--with-php-config=/usr/bin/php-config \
		|| return 1
		make || return 1
}

package() {
	cd "$srcdir/APC-${pkgver}"
	make INSTALL_ROOT=$pkgdir install || return 1
	install -D -m644 "$srcdir"/apc.ini "$pkgdir"/etc/php/conf.d/apc.ini
}

md5sums="c9e47002e3a67ebde3a6f81437c7b6e0  APC-3.1.13.tgz
1be423cbc197a302abd50cfd5834258b  apc.ini"
sha256sums="5ef8ba07729e72946e95951672a5378bed98cb5a294e79bf0f0a97ac62829abd  APC-3.1.13.tgz
6279892a664e2de6ce8d6902de6a01ec807a3e23906a94af564b7d66eb309aba  apc.ini"
sha512sums="4ccfa12a61a9276be207c9b70b108b725cf2faa3ed805bab8c9a39b04039fd16a8da6919ab7d5a84592f7b4a7827dcd9adeb154c6a04d208e7071be22268b332  APC-3.1.13.tgz
44684f32708b26e72be687327660442af113282477f01fe1ec7ade7106c9c782497e101016dbc4c54d517ea172fbb8d652696c9e83bbc895839313980bc9b54c  apc.ini"
