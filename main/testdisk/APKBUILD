# Maintainer: Leonardo Arena <rnalrd@alpinelinux.org>
pkgname=testdisk
pkgver=7.1
_pkgver=$pkgver-WIP # -WIP = beta release
pkgrel=0
pkgdesc="A data recovery suite"
url="http://www.cgsecurity.org/wiki/TestDisk"
arch="all"
license="GPL"
makedepends="e2fsprogs-dev ntfs-3g-dev ncurses-dev zlib-dev libjpeg-turbo-dev"
subpackages="$pkgname-doc"
source="http://www.cgsecurity.org/$pkgname-$_pkgver.tar.bz2"
builddir="$srcdir"/$pkgname-$_pkgver

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info
	make
}

check() {
	cd "$builddir"
	make check
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="9b53e6d2ee63fcb194c7e2e065e2d68fe1985fa5b857a7babbc7dd81733d51c11d091dbd3c92d44c1409eb7e7ca794e91a212a97565d00acb6146a711ea9e8b0  testdisk-7.1-WIP.tar.bz2"
