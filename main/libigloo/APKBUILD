# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=libigloo
pkgver=0.9.5
pkgrel=0
pkgdesc="Generic C framework used and developed by the Icecast project"
url="https://icecast.org/"
arch="all"
license="GPL-2.0-only"
makedepends="automake autoconf libtool m4 rhash-dev"
subpackages="$pkgname-dev"
source="https://downloads.xiph.org/releases/igloo/libigloo-0.9.5.tar.gz"

prepare() {
	default_prepare
	autoreconf -vfi
}

build() {
	./configure \
		--prefix=/usr \
		--enable-largefile \
		--with-machine-id=/etc/machine-id \
		--enable-shared \
		--disable-static \
		--with-urandom=/dev/urandom
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
4e7066dd689ca91fe9b3bc6de7023c858ef3c7010fa79eece472dd05e9cb12d479db3065f05ee195fc72ddc451da4b7cc3b69d7ede80f0de793f3fbc5f0bffd8  libigloo-0.9.5.tar.gz
"
