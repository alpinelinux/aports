# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=xtables-addons
pkgver=2.2
pkgrel=0
pkgdesc="Netfilter userspace extensions for iptables"
url="http://xtables-addons.sourceforge.net/"
arch="all"
license="GPL"
depends=
makedepends="iptables-dev pkgconfig bash coreutils"
install=
subpackages="$pkgname-doc"
source="http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.xz"

build() {
	cd "$srcdir/$pkgname-$pkgver"

	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--mandir=/usr/share/man \
		--without-kbuild \
		|| return 1

	make CC="${CC-gcc}" kbuilddir=
}

package() {
	cd "$srcdir/$pkgname-$pkgver"
	make builddir= DESTDIR="$pkgdir" install || return 1
	rm "$pkgdir"/usr/lib/*.la || return 1
}

md5sums="bc60abaa3cacc907f646ec6f873054f5  xtables-addons-2.2.tar.xz"
sha256sums="bafaf53b896272adcf17f240339c866eff07d30b51be8893a08deaf69f8f13ef  xtables-addons-2.2.tar.xz"
sha512sums="1bfdfe5a540a4aeb32511c8092662a9694bc8b58c5b369065380fdca2044b24edb1e47ed7bf301771ee36c782f8ff457fd1f8cfa76ded5aaadf35f41292f6f8e  xtables-addons-2.2.tar.xz"
