# Contributor: SÃ¶ren Tempel <soeren+alpine@soeren-tempel.net>
# Contributor: Corey Oliver <coreyjonoliver@gmail.com>
# Maintainer: Corey Oliver <coreyjonoliver@gmail.com>
pkgname=argon2
_pkgname=phc-winner-argon2
pkgver=20190702
pkgrel=0
pkgdesc="The password hash Argon2, winner of PHC"
url="https://github.com/P-H-C/phc-winner-argon2"
arch="all"
license="Apache-2.0 CC0-1.0"
subpackages="$pkgname-dev $pkgname-dev $pkgname-libs"
source="$pkgname-$pkgver.tar.gz::https://github.com/P-H-C/$_pkgname/archive/$pkgver.tar.gz
	libargon2.pc
	"
builddir="$srcdir/$_pkgname-$pkgver"

build() {
	cd "$builddir"
	make OPTTARGET=none
}

check() {
	cd "$builddir"
	make OPTTARGET=none test
}

package() {
	cd "$builddir"
	make OPTTARGET=none DESTDIR="$pkgdir" install

	install -Dm0644 libargon2.pc "$pkgdir"/usr/lib/pkgconfig/libargon2.pc
	sed -i -e "s/@UPSTREAM_VER@/${pkgver}/" "$pkgdir"/usr/lib/pkgconfig/libargon2.pc
}

sha512sums="0a4cb89e8e63399f7df069e2862ccd05308b7652bf4ab74372842f66bcc60776399e0eaf979a7b7e31436b5e6913fe5b0a6949549d8c82ebd06e0629b106e85f  argon2-20190702.tar.gz
299d72d3cd6a9d8167e69b2cefc8f854e1c3abd0897e44acdc78bb5c6fdb62eee6b75e2deeb51f9c46bda543b61268fe7b89adc274c624609d4cec39294b81d8  libargon2.pc"
