# Contributor: Fabian Affolter <fabian@affolter-engineering.ch>
# Maintainer: Fabian Affolter <fabian@affolter-engineering.ch>
pkgname=mcabber
pkgver=0.10.2
pkgrel=1
pkgdesc="A small Jabber console client"
url="http://www.lilotux.net/~mikael/mcabber/"
arch="all"
license="GPL2+"
depends="beep"
depends_dev=""
options="libtool"
makedepends="	loudmouth-dev
		glib-dev
		ncurses-dev
		gpgme-dev
		aspell-dev
		libotr3-dev
		libidn-dev
		enchant-dev
"
install=""
subpackages="$pkgname-dev $pkgname-doc $pkgname-example"
source="http://mcabber.com/files/$pkgname-$pkgver.tar.bz2"
_builddir="$srcdir"/$pkgname-$pkgver

build() {
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--disable-static \
		--enable-hgcset \
		--enable-enchant \
      		--enable-aspell \
		--enable-otr \
		--prefix=/usr \
		--mandir=/usr/share/man \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	rm -f "$pkgdir"/usr/lib/*.la
}

example() {
        # Put the example file into a seperate package
        mkdir -p "$subpkgdir"/usr/share/doc/"$pkgname"/example || return 1
        mv "$_builddir"/mcabberrc.example \
		"$subpkgdir"/usr/share/doc/"$pkgname"/example/mcabberrc.example || return 1
}

md5sums="6bb2302f5168ad4c28b647390e37f9b3  mcabber-0.10.2.tar.bz2"
sha256sums="e246d153f93a75b4f45879f447434db070503c9903bf3f995af396b3b94586f8  mcabber-0.10.2.tar.bz2"
sha512sums="976c29ec753a364392ba6b5280c9031d9eb8884236b7d07fbeaa69a731806706f72b93a0bbbca1eca4f11325412d5beff62b14d94acca912841b8b820c2b3652  mcabber-0.10.2.tar.bz2"
