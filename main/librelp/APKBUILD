# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=librelp
pkgver=1.4.0
pkgrel=0
pkgdesc="The Reliable Event Logging Protocol library"
url="https://www.rsyslog.com"
arch="all"
license="GPL-3.0-or-later"
makedepends="gnutls-dev openssl-dev"
checkdepends="bash python grep"
subpackages="$pkgname-dev"
source="http://download.rsyslog.com/librelp/$pkgname-$pkgver.tar.gz
	fix-musl.patch
	"

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--mandir=/usr/share/man
	make
}

check() {
	cd "$builddir"
	make check
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="92d01a51b4ee3c66d1f65d2e26f214646d72b41a8411ab700fe5f9f30f805ef98dec962526ef95c8d8428bf7398d38f656c919f95a3e49382adc745ef9eb4239  librelp-1.4.0.tar.gz
1cd621495f05e6aaaf96a45d3b65f9feb16f5eb90af7be430c1273f53a8776bdd3fb4b9a72bc863b8c6350efcf138f3674efdc7f91b07b68db03e14db491b779  fix-musl.patch"
