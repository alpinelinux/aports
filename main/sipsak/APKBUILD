# Contributor: Joe Searle <joe@jsearle.net>
# Contributor: Leonardo Arena <rnalrd@alpinelinux.org>
# Maintainer: Leonardo Arena <rnalrd@alpinelinux.org>
pkgname=sipsak
pkgver=0.9.7
pkgrel=0
pkgdesc="SIP swiss army knife"
url="http://sipsak.org/"
arch="all"
license="GPL-2.0-or-later"
depends=""
makedepends="openssl-dev c-ares-dev"
install=""
subpackages="$pkgname-dbg $pkgname-doc"
source="https://github.com/nils-ohlmeier/sipsak/releases/download/${pkgver}/${pkgname}-${pkgver}.tar.gz
	musl-fix-strcasestr.patch
	"

builddir="$srcdir"/$pkgname-$pkgver

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info
	make
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="695ba6e596411fdda14e6800163b934dba2dc6ee661ebc91a9f3d3509b9568d0482108fb50503953f7f9186cf11724c0faf4660436aad1929f4a70dc41286402  sipsak-0.9.7.tar.gz
95fb13a5b3bc108544e6ac3a0c5e7a00890926df02b390c1fdb3e28a3cf4aa7ef3ffafd904cc4665547135fe45b412c4b676ae1c52d133d8deef62f062ac909f  musl-fix-strcasestr.patch"
