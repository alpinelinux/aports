diff --git a/src/lxc/macro.h b/src/lxc/macro.h
index 30aa2a5a5..14e12670e 100644
--- a/src/lxc/macro.h
+++ b/src/lxc/macro.h
@@ -392,4 +392,11 @@ enum {
 /* Maximum number of bytes sendfile() is able to send in one go. */
 #define LXC_SENDFILE_MAX 0x7ffff000
 
+#define steal_ptr(ptr)                     \
+	({                                 \
+		typeof(ptr) _ptr_ = (ptr); \
+		(ptr) = NULL;              \
+		_ptr_;                     \
+	})
+
 #endif /* __LXC_MACRO_H */
