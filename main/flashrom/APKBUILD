# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Nathan Angelacos <nangel@alpinelinux.org>
pkgname=flashrom
pkgver=0.9.9
pkgrel=2
pkgdesc="A utility for identifying, reading, writing, verifying and erasing flash chips"
url="https://www.flashrom.org/Flashrom"
arch="all"
license="GPL"
depends=dmidecode
makedepends="pciutils-dev libusb-compat-dev linux-headers"
subpackages="$pkgname-doc"
install="$pkgname.post-install"
source="http://download.flashrom.org/releases/flashrom-$pkgver.tar.bz2
	sst26.patch
	musl-ffs.patch
	"

builddir="$srcdir"/$pkgname-$pkgver

build() {
	cd "$builddir"
	make PREFIX=/usr/
}

package() {
	cd "$builddir"
	make PREFIX="$pkgdir/usr/" install
}

sha512sums="155445ce7acab97f91596aad704aa2211da1c3f71fb463fc65c621dfea41e44b5de7db801c5b5cfc37450e8a8cfed5b202553715d999710422c830a0c38ae153  flashrom-0.9.9.tar.bz2
545dfadf8d0c53c9b0116af29eb4454b09ec74b2e906258aa7fcedb472957941a405273fae8ccd1e2f2ec5a848780a8191fcde80e2714573c76b3cd35ab279fa  sst26.patch
371131e37ee0f2ce31b5dd264707b91817a2f0a3654943e6b3430df862d4bb64f27117c1c94276cb447f5b45f1771b9997f9c96423d68c6dd4565c1e1f442a5e  musl-ffs.patch"
