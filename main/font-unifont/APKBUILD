# Contributor: Breno Leitao <breno.leitao@gmail.com>
# Maintainer:
pkgname=font-unifont
pkgver=15.0.02
pkgrel=0
pkgdesc="GNU Unifont glyphs"
url="https://unifoundry.com/unifont/index.html"
arch="all"
options="!check"  # No way to test fonts.
license="GFDL-1.3-or-later GPL-2.0-or-later WITH Font-exception-2.0"
subpackages="unifont-dev unifont-tools unifont-doc"
source="https://unifoundry.com/pub/unifont/unifont-$pkgver/unifont-$pkgver.tar.gz
	missing-install.patch
	"
builddir="$srcdir/unifont-$pkgver"

build() {
	make
}

package() {
	# renamed from unifont
	provides="unifont=$pkgver-r$pkgrel"
	replaces="unifont"

	# only keep OTF
	rm font/precompiled/*.ttf
	make PREFIX="$pkgdir/usr" install

	cd "$pkgdir"/usr/share/unifont
	rm -r latex html ChangeLog* INSTALL* NEWS* README* ./*.pdf
}

tools() {
	depends="bdftopcf perl-gd"
	
	amove usr/bin
}

sha512sums="
897eb9d49f166c8e1b673ef7fa6fed3df78ddafe39e3bf9adc7b1b593efeb6ff3f7b3771cf5f9388c4cfb9cea6dfff40f1c8776aeb6d6e1b8b90316c2c3a98ac  unifont-15.0.02.tar.gz
725527c518d54908f0f44400bcdd9eef6d7f7194c9635f05aa38ddd4003a928b26e02f9d835a7d34b01855d32eecd9ea22143a77c11f3ab47575d45d0437c537  missing-install.patch
"
