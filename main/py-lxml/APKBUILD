# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=py-lxml
_pkgname="${pkgname#py-}"
pkgver=3.6.3
pkgrel=0
pkgdesc="Python LXML Library"
_pkgdesc=$pksdesc
url="http://lxml.de/"
arch="noarch"
license="BSD"
depends=""
makedepends="python-dev python3-dev libxml2-dev libxslt-dev py-setuptools"
subpackages="py2-$_pkgname:_py2 py3-$_pkgname:_py3"
source="${url}files/$_pkgname-$pkgver.tgz"

_builddir="$srcdir/$_pkgname-$pkgver"
build() {
	cd "$_builddir"
	python setup.py build || return 1
	python3 setup.py build || return 1
}

package() {
	mkdir -p "$pkgdir"
}

_py2() {
	replaces="$pkgname"
	_py python2
}

_py3() {
	_py python3
}

_py() {
	local python="$1"

	depends="$python"
	py_ver="${python#python}"
	pkgdesc=$(echo $_pkgdesc | sed -n "s/Python /Python $py_ver/p")
	pkgdesc="${_pkgdesc/Python /Python $py_ver }"
	arch="all"
	install_if="$pkgname=$pkgver-r$pkgrel $python"

	cd "$_builddir"
	$python setup.py install --prefix=/usr --root="$pkgdir" || return 1
}

md5sums="87826f860fad672eb48c47fbccfe7152  lxml-3.6.3.tgz"
sha256sums="e2cace41b3a96c5de769a5970753baf8ef3cf3a4d65b021b08ea3562f3cfb5c6  lxml-3.6.3.tgz"
sha512sums="addb04df1e312d5c66d64c1e5f33d50ed921434ef9eec82572a7ba96484eaf32811f7d2a332ce31ad832c5c55916e3070dd0065993e015dc32a77b623137e6d9  lxml-3.6.3.tgz"
