# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=ngrep
pkgver=1.48.3
pkgrel=0
pkgdesc="A grep-like utility that allows you to search for network packets on an interface"
url="https://ngrep.sourceforge.net/"
arch="all"
license="custom"
makedepends="autoconf automake libpcap-dev pcre2-dev"
options="!check"
subpackages="$pkgname-dbg $pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/jpr5/ngrep/archive/v$pkgver.tar.gz"

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--enable-pcre2 \
		--enable-ipv6 
	make
}

package() {
	make DESTDIR="$pkgdir" install
	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

sha512sums="
d7c716b4d4be10a23b430369b51f82a27038d4a3437e33ca1bf76651db5d0fff0f015452620a70c74b665fd8a672645fcfa1195fd59151772dda6f5b900f41c9  ngrep-1.48.3.tar.gz
"
