# Contributor: Michael Mason <ms13sp@gmail.com>
# Maintainer: Michael Mason <ms13sp@gmail.com>
pkgname=pllua
pkgver=1.1.0
pkgrel=0
pkgdesc="Procedural language for PostgreSQL using Lua"
url="https://github.com/pllua/pllua"
arch="all"
license="GPL"
depends="postgresql"
makedepends="postgresql-dev lua-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/pllua/$pkgname/archive/v$pkgver.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"
options="!check"  # tests require running PostgreSQL

build() {
	cd "$builddir"
	LUA_INCDIR=/usr/include LUALIB='-llua' USE_PGXS=1 make
}

package() {
	cd "$builddir"
	make USE_PGXS=1 DESTDIR="$pkgdir" install
}

sha512sums="bd882a5782d72b24aaca81f6678eefae191bbf53b7e8152f3d83b1b89e49d6a1c9a17be5edbc7673ff6b4f48426cf3b4ee5c6b8349555ed55078fb1e7cc6829d  pllua-1.1.0.tar.gz"
