# Maintainer: Roberto Oliveira <robertoguimaraes8@gmail.com>
pkgname=powerpc-utils
pkgver=1.3.13
pkgrel=0
pkgdesc="Maintenance utilities for PowerPC platforms"
url="https://github.com/ibm-power-utilities/powerpc-utils"
arch="ppc ppc64 ppc64le"
options="!check"  # No test suite.
license="GPL-2.0-or-later"
makedepends="autoconf automake zlib-dev numactl-dev"
depends="bash bc"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/ibm-power-utilities/powerpc-utils/archive/v$pkgver.tar.gz
	gcc15-signatures.patch"

prepare() {
	default_prepare
	./autogen.sh
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--mandir=/usr/share/man \
		--without-librtas
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
81fe5588e7330cb0bac81b7106c9949e364fe0b11cc1739a4074fee54c01c363ed8af05488152c9527c56ba053c11278c6b1a2340b2e088a6f25521965e4fc62  powerpc-utils-1.3.13.tar.gz
f7f4e9b7b5c506ff347de15f9580fb09c67a78ee663642720e5c47ab24e93ed953fe497cffaaa0d1f6ac19e2ce60e3b4ec7b9b868906a0b073ef858a11994601  gcc15-signatures.patch
"
