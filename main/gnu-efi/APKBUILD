# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=gnu-efi
pkgver=3.0.17
pkgrel=0
pkgdesc="Development Libraries and headers for EFI"
url="https://sourceforge.net/projects/gnu-efi/"
arch="all !armhf !s390x !ppc64le !mips !mips64"
license="BSD-2-Clause"
subpackages="$pkgname-dev"
depends_dev="$pkgname"
source="https://downloads.sourceforge.net/project/gnu-efi/gnu-efi-$pkgver.tar.bz2
	no-werror.patch
	"

build() {
	# invokes linker directly
	LDFLAGS="${LDFLAGS//-Wl/}"
	LDFLAGS="${LDFLAGS//,/ }"
	make -j1
}

package() {
	make PREFIX=/usr INSTALLROOT="$pkgdir" install
}

sha512sums="
0893ca234272584f889b1ae1c75341a9ceee60acfd32765daa5d704191ba00450536a287b949304c6d055d1bf125cc29e24fc41df8e5230e0da4f9d944876512  gnu-efi-3.0.17.tar.bz2
ce78d065fd4e42599f400475411a4b352fca3e2aff9a6c43936cf3c469ff9aea51e40b3be02809f7c9d5ef84c8e10ffd3cd3d45a46cc69cb858e981712265f1d  no-werror.patch
"
