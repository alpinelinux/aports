# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=fping
pkgver=5.5
pkgrel=0
pkgdesc="A utility to ping multiple hosts at once"
url="https://fping.org/"
arch="all"
license="MIT"
makedepends="libcap-utils"
subpackages="$pkgname-doc"
source="https://fping.org/dist/fping-$pkgver.tar.gz"
# setcap: needs cap_net_raw to be able to send icmp packets
options="!check setcap" # no testsuite

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--mandir=/usr/share/man \
		--enable-ipv6
	make
}

package() {
	make install DESTDIR="$pkgdir"
	setcap cap_net_raw=+ep "$pkgdir"/usr/sbin/fping
}

sha512sums="
80fddfb9462b4ed7231d96d21340e75a42a4c481b78fd70f4889422eab86405b1e4b2ee25162478f4c35f273d4a6b1ff81309af9f09121c574509bfd73b1afde  fping-5.5.tar.gz
"
