# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=fping
pkgver=5.4
pkgrel=0
pkgdesc="A utility to ping multiple hosts at once"
url="https://fping.org/"
arch="all"
license="MIT"
makedepends="libcap-utils"
subpackages="$pkgname-doc"
source="https://fping.org/dist/fping-$pkgver.tar.gz"
# setcap: needs cap_net_raw to be able to send icmp packets
options="!check setcap" # no testsuite

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--mandir=/usr/share/man \
		--enable-ipv6
	make
}

package() {
	make install DESTDIR="$pkgdir"
	setcap cap_net_raw=+ep "$pkgdir"/usr/sbin/fping
}

sha512sums="
377032bb1a104fdf7b9cf785808ae2aa23b83e60aab7288096c5a0f27657c1c40da1390f4fe8c7d52a6c3d43b7bf7e84065443b6e7fe73b9e51715623012c6b5  fping-5.4.tar.gz
"
