# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=libpciaccess
pkgver=0.14
pkgrel=0
pkgdesc="X11 PCI access library"
url="http://xorg.freedesktop.org/"
arch="all"
license="custom"
options="!check"  # No test suite.
makedepends="util-macros"
subpackages="$pkgname-dev $pkgname-doc"
source="https://www.x.org/releases/individual/lib/$pkgname-$pkgver.tar.bz2
	fix-arm.patch
	limits_h.patch"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr
	make
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
	install -Dm644 COPYING "$pkgdir"/usr/share/licenses/$pkgname/COPYING
}

sha512sums="bf40214dfd22f2a223f7c948566e6eaa4bfed60116e71b3eb19f6fe7ab2c4546649eb0416c06d5983e476ea5e27de036936646eb5f800ea97763b6d1f1976f4b  libpciaccess-0.14.tar.bz2
a6c95f42c926ffcd62014cf619c6aacf8db3b1862fa87c8eae9c3e64f31fcaddb682d34c767756bede5d2949a7285a415ca1d14249713bc12514c8e40f9d989f  fix-arm.patch
331a498059d8b2bfd0a7da0ced3616266ebc129b785090ef1dc19cd645b013428c60d5678fc080bd15ecaf7598ec8b1084509d6bea5d563101169a449b6fe75b  limits_h.patch"
