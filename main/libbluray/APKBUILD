# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=libbluray
pkgver=1.0.2
pkgrel=0
pkgdesc="a library designed for Blu-Ray Discs playback"
url="https://www.videolan.org/developers/libbluray.html"
arch="all"
license="LGPL-2.1-only"
makedepends="apache-ant openjdk8"
subpackages="$pkgname-dev"
source="https://download.videolan.org/pub/videolan/libbluray/$pkgver/libbluray-$pkgver.tar.bz2"

build() {
	cd "$builddir"

	# "build.sysclasspath=last; set to false for repeatable builds"
	export ANT_OPTS=-Dbuild.sysclasspath=false

	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--localstatedir=/var \
		--disable-bdjava \
		--without-libxml2 \
		--without-freetype
	make
}

check() {
	cd "$builddir"

	# "build.sysclasspath=last; set to false for repeatable builds"
	export ANT_OPTS=-Dbuild.sysclasspath=false

	make check
}

package() {
	cd "$builddir"

	# "build.sysclasspath=last; set to false for repeatable builds"
	export ANT_OPTS=-Dbuild.sysclasspath=false

	make DESTDIR="$pkgdir" install
}

sha512sums="e1360ad08aa6cc67a80efa81a09004faebbe31105f1961494f82f655e3e7378b198ee3bc534b0d0c2bfec726939b11b545cc8bbfa30794fc647432dadf71089b  libbluray-1.0.2.tar.bz2"
