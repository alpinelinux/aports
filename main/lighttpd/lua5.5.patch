Patch-Source: https://github.com/lighttpd/lighttpd1.4/pull/148
---
From cac80256d2e7c06e3ceb43dfc1baa9e28bf5a767 Mon Sep 17 00:00:00 2001
From: Achill Gilgenast <achill@achill.org>
Date: Tue, 23 Dec 2025 18:53:23 +0100
Subject: [PATCH] [build] support lua 5.5

---
 SConstruct         | 2 +-
 configure.ac       | 2 +-
 src/CMakeLists.txt | 2 +-
 src/meson.build    | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/SConstruct b/SConstruct
index dde9df0be..95517fcca 100644
--- a/SConstruct
+++ b/SConstruct
@@ -581,7 +581,7 @@ if 1:
 
 	if env['with_lua']:
 		found_lua = False
-		for lua_name in ['lua54','lua5.4','lua-5.4','lua53','lua5.3','lua-5.3','lua52','lua5.2','lua-5.2','lua51','lua5.1','lua-5.1','lua']:
+		for lua_name in ['lua55','lua5.5','lua-5.5','lua54','lua5.4','lua-5.4','lua53','lua5.3','lua-5.3','lua52','lua5.2','lua-5.2','lua51','lua5.1','lua-5.1','lua']:
 			print("Searching for lua: " + lua_name + " >= 5.0")
 			if autoconf.CheckParseConfigForLib('LIBLUA', "pkg-config '" + lua_name + " >= 5.0' --cflags --libs"):
 				autoconf.env.Append(CPPFLAGS = [ '-DHAVE_LUA_H' ])
diff --git a/configure.ac b/configure.ac
index e73588d4e..cda65957a 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1410,7 +1410,7 @@ if test "$WITH_LUA" != no; then
       LUA_CFLAGS="-I$WITH_LUA"
     fi
   else
-    for luaname in lua54 lua5.4 lua-5.4 lua53 lua5.3 lua-5.3 lua52 lua5.2 lua-5.2 lua51 lua5.1 lua-5.1 lua; do
+    for luaname in lua55 lua5.5 lua-5.5 lua54 lua5.4 lua-5.4 lua53 lua5.3 lua-5.3 lua52 lua5.2 lua-5.2 lua51 lua5.1 lua-5.1 lua; do
       if test "$found_lua" = "0"; then
         PKG_CHECK_MODULES([LUA], [$luaname >= 5.1],
           [found_lua=1],
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index c8cb2af72..f0312c636 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -782,7 +782,7 @@ if(WITH_LUA)
 	if(WITH_LUA_VERSION)
 		pkg_search_module(LUA REQUIRED ${WITH_LUA_VERSION})
 	else()
-		pkg_search_module(LUA REQUIRED lua54 lua5.4 lua-5.4 lua53 lua5.3 lua-5.3 lua52 lua5.2 lua-5.2 lua51 lua5.1 lua-5.1 lua)
+		pkg_search_module(LUA REQUIRED lua55 lua5.5 lua-5.5 lua54 lua5.4 lua-5.4 lua53 lua5.3 lua-5.3 lua52 lua5.2 lua-5.2 lua51 lua5.1 lua-5.1 lua)
 	endif()
 	message(STATUS "found lua at: INCDIR: ${LUA_INCLUDE_DIRS} LIBDIR: ${LUA_LIBRARY_DIRS} LDFLAGS: ${LUA_LDFLAGS} CFLAGS: ${LUA_CFLAGS}")
 	set(HAVE_LUA_H  1 "Have liblua header")
diff --git a/src/meson.build b/src/meson.build
index 599ddda98..1bcc05e49 100644
--- a/src/meson.build
+++ b/src/meson.build
@@ -295,7 +295,7 @@ if get_option('with_lua')
 		liblua = dependency(lua_version, required: true)
 	else
 		found_lua = false
-		foreach l: ['lua54','lua5.4','lua-5.4','lua53','lua5.3','lua-5.3','lua52','lua5.2','lua-5.2','lua51','lua5.1','lua-5.1','lua']
+		foreach l: ['lua55', 'lua5.5', 'lua-5.5', 'lua54','lua5.4','lua-5.4','lua53','lua5.3','lua-5.3','lua52','lua5.2','lua-5.2','lua51','lua5.1','lua-5.1','lua']
 			liblua = dependency(l, required: false)
 			if not(liblua.found())
 				liblua = compiler.find_library(l, required: false)
