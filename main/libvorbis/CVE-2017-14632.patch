--- a/lib/info.c
+++ b/lib/info.c
@@ -584,6 +584,7 @@ int vorbis_analysis_headerout(vorbis_dsp
   private_state *b=v->backend_state;
 
   if(!b||vi->channels<=0){
+    b = NULL;
     ret=OV_EFAULT;
     goto err_out;
   }
