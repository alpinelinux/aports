# Contributor: Alex Yam <alex@alexyam.com>
# Contributor: Leo <thinkabit.ukim@gmail.com>
# Maintainer:
pkgname=gyp
pkgver=0.21.0
pkgrel=0
pkgdesc="Generate Your Projects Meta-Build system"
options="!check" # Tests currently fail
url="https://gyp.gsrc.io"
arch="noarch"
license="BSD-3-Clause"
depends="python3 ninja"
makedepends="py3-gpep517 py3-setuptools py3-wheel"
subpackages="$pkgname-pyc"
source="https://github.com/nodejs/gyp-next/archive/refs/tags/v0.21.0/gyp-next-$pkgver.tar.gz
	fips.patch
	"
builddir="$srcdir/gyp-next-$pkgver"

build() {
	gpep517 build-wheel \
		--wheel-dir .dist \
		--output-fd 3 3>&1 >&2
}

package() {
	python3 -m installer -d "$pkgdir" \
		.dist/*.whl
}

sha512sums="
177733d63232a6fad4532d3bf5bba0e9fbf608e6074ec1f36463a7fc02c03527816356f5458b519cbe1976e4748e75ced83a59abbd018b9ac6f353ad9af3dfe8  gyp-next-0.21.0.tar.gz
0784dff316f5bc3e4b8d4106caf8a0c753d2c2e4f0d1b73af43f679570c80ef21713f4c96ab4c7bf7fb598c9753c3413a9002bcae66972e9303360a87d25db0f  fips.patch
"
