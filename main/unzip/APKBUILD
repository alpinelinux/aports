# Contributor: Sören Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=unzip
pkgver=6.0
pkgrel=2
pkgdesc="Extract PKZIP-compatible .zip files"
url="http://www.info-zip.org/UnZip.html"
arch="all"
license="Custom"
depends=""
makedepends=""
subpackages="$pkgname-doc"
# normally 	ftp://ftp.info-zip.org/pub/infozip/src/${pkgname}60.zip
source="http://distfiles.alpinelinux.org/distfiles/${pkgname}60.zip
	10-unzip-handle-pkware-verify.patch
	20-unzip-uidgid-fix.patch
	unzip-6.0-heap-overflow-infloop.patch
	"

builddir="$srcdir"/${pkgname}60
build() {
	cd "$builddir"
	make -f unix/Makefile \
		LOCAL_ZIP="${CFLAGS} ${CPPFLAGS}" \
		prefix=/usr generic
}

package() {
	cd "$builddir"
	make -f unix/Makefile \
		MANDIR=${pkgdir}/usr/share/man/man1/ \
		prefix=${pkgdir}/usr install
	install -Dm644 LICENSE \
		"$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

