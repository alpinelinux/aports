# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=swig
pkgver=2017.11.04
pkgrel=2
pkgdesc="A compiler that makes it easy to integrate C and C++ code with scripting languages"
url="http://www.swig.org/"
arch="all"
license="GPL3 BSD"
depends="guile"
makedepends="zlib-dev pcre-dev autoconf automake libtool bison"
subpackages="$pkgname-doc"

_commit=7d6808daabef22143c6d417759910ccc059e8d21
source="$pkgname-$pkgver.tar.gz::$url/archive/${_commit}.tar.gz"

_builddir="$srcdir/swig-$_commit"
prepare() {
	cd "$_builddir"
}

build() {
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	install -D -m644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE || return 1
	install -D -m644 LICENSE-UNIVERSITIES "$pkgdir"/usr/share/licenses/$pkgname/LICENSE-UNIVERSITIES || return 1
}

sha512sums="59e22ae5be1d1aceb10bb177a6b8ca84a24bd66661c1418c9ca6f2bad4a0e34c09f91878b1bacd659256f5032495bc706f85d7afa3fdfebfd2bf8e9dd7dd6ae9  swig-dev-2017.11.04.tar.gz"
