# Automatically generated by apkbuild-cpan, template 1
# Contributor: Kiyoshi Aman <kiyoshi.aman@gmail.com>
# Maintainer: Kiyoshi Aman <kiyoshi.aman@gmail.com>
pkgname=perl-cps
_pkgreal=CPS
pkgver=0.18
pkgrel=0
pkgdesc="manage flow of control in Continuation-Passing Style"
url="http://search.cpan.org/dist/CPS/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends="perl-future"
cpanmakedepends="perl-test-identity perl-test-refcount perl-test-fatal   "
depends="$cpandepends"
makedepends="perl-dev perl-test-fatal perl-test-identity perl-test-refcount
	$cpanmakedepends perl-module-build"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/P/PE/PEVANS/$_pkgreal-$pkgver.tar.gz"

_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$_builddir"
	perl Build.PL installdirs=vendor || return 1
}

build() {
	cd "$_builddir"
		export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	./Build && ./Build test
}

package() {
	cd "$_builddir"
	./Build install destdir="$pkgdir" || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="c011f5e8d5c0f8343e93f3edf0083854  CPS-0.18.tar.gz"
sha256sums="2cd41f7d4dc091015fc7a4a4d3a6b58e2670d36c7ac47c6dec0538c7e732bfe6  CPS-0.18.tar.gz"
sha512sums="737e182b803b4d3b45e1b82410aec171815e2dc98cde507a172ccbf6667b811397c912b02d92c9da9266dc5face69e4c6c772c7dcb63b39b7c68f782c070fa68  CPS-0.18.tar.gz"
