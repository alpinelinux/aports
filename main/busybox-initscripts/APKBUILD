# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=busybox-initscripts
pkgver=3.0
pkgrel=0
pkgdesc="Init scripts for busybox daemons"
url="http://git.alpinelinux.org/cgit/aports/tree/core/busybox-initscripts"
arch="noarch"
license="GPL2"
depends="busybox"
makedepends=""
install="$pkgname.post-install $pkgname.post-upgrade"
subpackages=""
replaces="alpine-baselayout openntpd"
source="acpid.initd crond.initd dnsd.initd httpd.initd inetd.initd klogd.initd
	mdev.initd ntpd.initd rdate.initd syslog.initd udhcpd.initd
	watchdog.initd crond.confd klogd.confd ntpd.confd rdate.confd syslog.confd
	watchdog.confd mdev.conf dvbdev ide_links usbdev usbdisk_link xvd_links
	default.script
	"

prepare() {
	return 0
}

package() {
	local i
	cd "$srcdir"

	mkdir -p "$pkgdir"/etc/conf.d "$pkgdir"/etc/init.d "$pkgdir"/lib/mdev\
		"$pkgdir"/etc/acpi/PWRF
	for i in *.initd; do
		install -m755 "$srcdir"/$i "$pkgdir"/etc/init.d/${i%.*} || return 1
	done
	for i in *.confd; do
		install -m644 "$srcdir"/$i "$pkgdir"/etc/conf.d/${i%.*} || return 1
	done
	install -m644 mdev.conf "$pkgdir"/etc
	install -m755 dvbdev ide_links usbdev usbdisk_link xvd_links "$pkgdir"/lib/mdev/

	# poweroff script for acpid
	cat >"$pkgdir"/etc/acpi/PWRF/00000080 <<EOF
#!/bin/sh
poweroff
EOF
	chmod +x "$pkgdir"/etc/acpi/PWRF/00000080

	# script for udhcpc
	install -Dm755 "$srcdir"/default.script \
		"$pkgdir"/usr/share/udhcpc/default.script || return 1

}

md5sums="22c4509243f68873c2c89505cbb509a4  acpid.initd
629c36d84be6ba8c7f1a46411e8617af  crond.initd
47f2931fdf09558a5cc0fdb1cde2f814  dnsd.initd
bdb6830041b77db4a3de3b35ed326d5e  httpd.initd
12fffa82b698267240acd4bdaa4861da  inetd.initd
96d5eb83477a8adc007a0ac4aedc0e61  klogd.initd
b86749a0a4167e0a6178a217b264d0f6  mdev.initd
88ac156aa6cc3999805d526498765d07  ntpd.initd
e70b6427fb7b52f49801bcdfb99db3a2  rdate.initd
916cb1b94996269cade9eb88b6eab59e  syslog.initd
9c6b8973cb8407eb5ac32a9b6fc78e64  udhcpd.initd
4894514fb7e4485d6520290c9fa11a30  watchdog.initd
83bf1e56c1454634f6d2b9e7945e6a0f  crond.confd
60bc14cc3163d76f41bcc93dc0f9984b  klogd.confd
779058fe16d8a476c165b6d0928408b3  ntpd.confd
22adbf155ffc4595206ded6daad07812  rdate.confd
77fb31a75511247bf4e3430565a276bc  syslog.confd
0bb55dde32f5e119111fa4938daaef3d  watchdog.confd
15cbc09ecbffe6762f261ba1936e37ba  mdev.conf
ad1556961294e4aa2abca6be52138b7c  dvbdev
5c8725b4cbdeda23b00f08124a0d20bf  ide_links
daf57f3d0372f825ddc05b00973e5afe  usbdev
30b0c85956b6701caf55309a17e537f6  usbdisk_link
826d85313ca7a4a0205d63bd58b7d01f  xvd_links
e2d8c224cf7a300ea826bfb40e25db54  default.script"
sha256sums="c92c6f91d56de0e7ac7189a85c6bb0f054199acc2b18258f4c7e0939d352b8b0  acpid.initd
182bddd5097daf3995c4eceec38cf9ab758f271b3e65d6b0f8a67f1281c8de19  crond.initd
26b7af7288089e8462db062c0644c8a66855d6bd0eaa7edd2a3a43b3655c7da8  dnsd.initd
010542f0718fcbc42273068dfc88d3518c919a73576b9ffab4795a6d36ce3f40  httpd.initd
53ddd392736957d6a36157c190e0428fbb0c3a27925c63df8188f3461e74410d  inetd.initd
9b90176cb12a1b3a7a558ac3c03ba445409979c04e142c6f5aba8a5f10ea0c83  klogd.initd
e08f595cb22ad4aef4d48deabb933067407a4b94be131d078ebd715fd7e380d3  mdev.initd
4a32eea4da1e9eaf6c5ecfce20a297b55de3a1d479bc0578286d769be0114a7b  ntpd.initd
0c6eb4dc269386472f475cf9c549ba53b73aa33f044fbfb3b6bc6dd2574bb341  rdate.initd
f8bb5df1464aa7680efe6bd4acd1f9c99cb0b0f3aed978b441c132ba799dd3c1  syslog.initd
3a2c7b3a7b3fa6aa68096a0c978c6cd3e068f0f67ce4905a143fad5eb3c9b3c8  udhcpd.initd
03c1a6312598aeea5d10195ff5473ecc8ee89182b8115a8b5ad529259c0ea564  watchdog.initd
d058d9ed0824f877b4e88158fe25d71ad76fca4b71542c4c6d7991ee2ecd20f8  crond.confd
f6cd63d6e5f384dcb01a4906c9a0b6c5923794380235dfe0d79b48a686b03c5d  klogd.confd
4224e5c6b5ffeb815c15f3e9f17ddaa169d4e6b7da169dbd0939fe06dbe8914d  ntpd.confd
791d49802395861a5f788dc7436c1260ec2cd3bdea0c790952ae1b2dd518e811  rdate.confd
8a2362d6b5b1ec1d754878726392119f2cc7416c748ee4f2ab134f731d6e6198  syslog.confd
77f6f9069afdbb477a7e822aa2c7265d64fd22fdd9338bb3beb0cee901d202ce  watchdog.confd
369b0d3f5ef9cfd703d9a00453d5eb27592db0ec21ac2aa83ad687c3f1492206  mdev.conf
ef091bb4c8943a99b9a97b556cdc15ddd20275f5afa8287e201419b08c4e71de  dvbdev
3fccc9ee437e3dcc8ac73bfe3713334a7156a112fe442e052fff4f26ff0f6a88  ide_links
dcb0c37590019bccb4c31a5372cbf7728eae6f1174d56bf0708d7504243a5fbb  usbdev
4957f6991e0cb988b263b5276b582f1757deecad19cddebe3c615b381df9f858  usbdisk_link
86ed99205050a5dcca8a27c7e8658df8c55dc85ed810db0d64b51f7c63aa140e  xvd_links
f81b6a0f04cecd131f6372ce27fdb7d2bbb9155ce2cc333c8374dfd70537b901  default.script"
sha512sums="dd548670114a92404b8e35fb915fdbe5994498b05b0a418583271c3dd72fb7800950e42c095c902a014eb198c046b8a346d43dccd8e7a158048ae33767c572ed  acpid.initd
c9d0fb0f8cc27d661d3b4e58c56eb598ca368890576e18ffffd42efdf68ba35537656be9be319b2e2818aa0152d3ca8611bece2433512fbfcd4eed7988765549  crond.initd
82c70082fa6e00c389982e16b0ef92f8f137941517a2b74de57150f4645d8b8b2a91abaa22d5aede8f7d08e0749ef14a07860cf16f96058b96f4246a6c39222a  dnsd.initd
66bfd7d2a03f4e8a50f08b7057091bfef8e36001eb7c07574ec45da6d75db05a88ae37dbd51e3e3fc7b00a784bf69f8416682ce0454ca16cc072358abdf4d2ce  httpd.initd
82fb2ed926e7fbd87f3df7aba556ccb27ddd1fbd79e823acf00aea4ac41c5c5bf58dbf9488dd10b268371b40994a3cca9e305c1177a1628f72b9a1d3ebce0702  inetd.initd
664c4ccfb0c10f450c9acda97a442590d06fc36bf1c7b208e0cb6f3f9c57e47935dfa9151aced8aaab2946d9658f2f9f57b5d3cca5296ce4a0e0c1268af74cea  klogd.initd
1aed59fb048f0636ee8a095a089a20554a20eda84c70485a894ae60b0f97b792b7ce8e832557457258f59a2750735c4a25e247364ccf1180e9652b292a5f9e8d  mdev.initd
c30d3936e045c01fdc9d1e9d1c0d2cd79b6dabb453400f067bc4eefa239a41c98bbe3fcd3ae53792e0e6d8fcf4aebc727e4524ec3ccd5741d5659a0a351c1c7e  ntpd.initd
a95d03564712803fc58c48534f2fbbf23dd8418ffd3a6a06f840e969627892eea518b4fe17f059850665fc056cedf972c26aee52c309805987fb5c59a710bd30  rdate.initd
3fb3fece211960358c3a3ef2f76cb9a55fc0e76d3a52fb75138bc3502f0422e37ab3a6e4cad08ba0709f9c345e32749782a19fbe511d94e957fc5021a9bfcb83  syslog.initd
1d4574ec7cc6d7e9952bb50b4fcb10a910868688da03a25aede492835313c686247bde1faa17f50243d61a93bfc1d8fa54cf821d7be908581e365b0f1b6a5588  udhcpd.initd
0a4f989068f00dd8599433ea1fe0713c405ed871750b918e32db2d6bccefc8b870ea2e16864d1b7c3dd57d63e04b41aa0bf9c882c1a9e8108def141d12072e90  watchdog.initd
34c6f3197064bb91619b899b28a201bd4d920b18bded3845440b2cb36dc6f16cabf447c96878349b16e46c30184cbe48bac00a01c5f7cf1be038c0b7136064c5  crond.confd
f9bf43b72142bbb4c0665c1268a3d91586ef8a057dfe64c53b6923815d2db1f669b8080a38311ad89cda0b783a8628700fc5414d834a21d8e48515760bb910f7  klogd.confd
b0ba67585f39d83320ed6de183d7463a0e163807b9f3dc6f0baa212236056f22aeb2c5399dfdcd54929eb5ae06a15714c2fed133b5888869ed9d9cf589cef843  ntpd.confd
3d6c4d358e226e0c0462f2003bcf0b6787f91a53f4d6b6db5bfe7748bb0dd392d7cc454058ea8a9b649e8dd2629963a5ad1257c36af04367caeb1923f954daf7  rdate.confd
330c6e6808dfdf05c75dcdec1048f17052f79b285e11513a64a97bf28fb60e023840966abe03a74fa146eb6b842c4e0e78df82918528e0b6e8f546f7f0a4e323  syslog.confd
359af0a4a1841dd6557eaf3e71d39f0d7a2687bad6a8fc6ef436eccf72a40f85c6400a3b7880c7f64d8e460b6af8a0ff3dd5ffc3a4b1aa8eb0d8f7eaf99ee3e4  watchdog.confd
a66ae33a6161fa5887cb423b7ce4923e665b82c71613fa5fe885f7e9e993229d4686f2d6110c85c735ecb627b2a72c56a912c43012def829a156e3f8b68bca71  mdev.conf
ebd82f935da2ca89097234dd8a8f47e179a423652c151123a1f3343f3e1e7bfaba2b8800380e988d4e8f4294545d3a9ab6708ae2e77c5b108b5f091bbce8f94a  dvbdev
0142234d0bda86ad1e5f88f1da34669e5fda46a0fd52ce507bd49ce74d2b7c12c323e8db863bccb924e6d632b568db8b243361b217c5b2e1d92a25feb6e62dec  ide_links
b2dcf0ded9264334d79fbbb05dd12d649dc3119a060db5893f0e8aeca2141323961c3ba4c822a0ffb00dba848742d5cb374dc77e776b57cecde352a3e8e30f8a  usbdev
392c40d223bdff59a624bd67907c06cff9c1b5468c25c19e10dbc3cef3208275d93966e760f140d71a86cb36ec796ea08dbaa767b40c12e9326c3c72964b28a8  usbdisk_link
5db6fa8bbb2d891212187c598cd8703277b3fcb95b5dba6628f7128eb48cc7c1bf4c53885e9d870999c8c95d2fe9cd27609b523596dc553c31b6f72a452a0118  xvd_links
b605abe0035e4ccefc6a5f6d27826caa6e62440be6add2d4140325a897d337918c79204202cc08455b7c8b122a6b744f0b6e4601a00113fd2aff4febd6f3fd90  default.script"
