# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=busybox-initscripts
pkgver=2.2
pkgrel=26
pkgdesc="Init scripts for busybox daemons"
url="http://git.alpinelinux.org/cgit/aports/tree/core/busybox-initscripts"
arch="noarch"
license="GPL-2"
depends="busybox"
makedepends=
install=$pkgname.post-install
subpackages=
replaces="alpine-baselayout openntpd"
source="acpid.initd cron.initd dnsd.initd httpd.initd inetd.initd klogd.initd 
	mdev-mount.initd mdev.initd ntpd.initd rdate.initd syslog.initd
	watchdog.initd cron.confd klogd.confd ntpd.confd rdate.confd syslog.confd
	watchdog.confd mdev.conf dvbdev ide_links usbdev usbdisk_link xvd_links
	default.script
	"

build() {
	return 0
}

package() {
	local i
	cd "$srcdir"

	mkdir -p "$pkgdir"/etc/conf.d "$pkgdir"/etc/init.d "$pkgdir"/lib/mdev\
		"$pkgdir"/etc/acpi/PWRF
	for i in *.initd; do
		install -m755 "$srcdir"/$i "$pkgdir"/etc/init.d/${i%.*} || return 1
	done
	for i in *.confd; do
		install -m644 "$srcdir"/$i "$pkgdir"/etc/conf.d/${i%.*} || return 1
	done
	install -m644 mdev.conf "$pkgdir"/etc
	install -m755 dvbdev ide_links usbdev usbdisk_link xvd_links "$pkgdir"/lib/mdev/

	# poweroff script for acpid
	cat >"$pkgdir"/etc/acpi/PWRF/00000080 <<EOF
#!/bin/sh
poweroff
EOF
	chmod +x "$pkgdir"/etc/acpi/PWRF/00000080

	# script for udhcpc
	install -Dm755 "$srcdir"/default.script \
		"$pkgdir"/usr/share/udhcpc/default.script || return 1

}

md5sums="c2f0c061fdd17008c8f1579237205684  acpid.initd
59c39d2ba5c22fc311a19750298a03f2  cron.initd
47f2931fdf09558a5cc0fdb1cde2f814  dnsd.initd
bdb6830041b77db4a3de3b35ed326d5e  httpd.initd
12fffa82b698267240acd4bdaa4861da  inetd.initd
74207e2032d33879853d32536ecef306  klogd.initd
f1651caf2fd5136a3f929baa294ab762  mdev-mount.initd
17b3b5a427b24698a7d058e92d6e5c8f  mdev.initd
88ac156aa6cc3999805d526498765d07  ntpd.initd
a24e2d0c47d1c47d1dfa7ed91e6f0a21  rdate.initd
763ef3ade65e24d89fe980651abfc915  syslog.initd
4894514fb7e4485d6520290c9fa11a30  watchdog.initd
8ddb8d040c9c7a32c63039a2c80ff496  cron.confd
60bc14cc3163d76f41bcc93dc0f9984b  klogd.confd
779058fe16d8a476c165b6d0928408b3  ntpd.confd
22adbf155ffc4595206ded6daad07812  rdate.confd
77fb31a75511247bf4e3430565a276bc  syslog.confd
0bb55dde32f5e119111fa4938daaef3d  watchdog.confd
8abcd27060ddaee01f1ba973c7582eb2  mdev.conf
ad1556961294e4aa2abca6be52138b7c  dvbdev
5c8725b4cbdeda23b00f08124a0d20bf  ide_links
daf57f3d0372f825ddc05b00973e5afe  usbdev
30b0c85956b6701caf55309a17e537f6  usbdisk_link
826d85313ca7a4a0205d63bd58b7d01f  xvd_links
e2d8c224cf7a300ea826bfb40e25db54  default.script"
sha256sums="078c1c0910133182a8c9f2e0f59468735414ff3b55a95fa92045e98ea4ff05d9  acpid.initd
d80bc50815de5cb58df53d969ccf682f3c34b62f1815830dc16e8813d7f0423c  cron.initd
26b7af7288089e8462db062c0644c8a66855d6bd0eaa7edd2a3a43b3655c7da8  dnsd.initd
010542f0718fcbc42273068dfc88d3518c919a73576b9ffab4795a6d36ce3f40  httpd.initd
53ddd392736957d6a36157c190e0428fbb0c3a27925c63df8188f3461e74410d  inetd.initd
4f52858fbab9a80b884a442dfba1249bbf93e9cf1a1ba28cea60fb124b1b5da2  klogd.initd
b389eae20c49e71c9521de7b894da243bb508382f3d2d13c05586320c1c1092d  mdev-mount.initd
7afc270bae5a515dac038ec871faa29de1c45a6897a2785de9a746c796c76cf3  mdev.initd
4a32eea4da1e9eaf6c5ecfce20a297b55de3a1d479bc0578286d769be0114a7b  ntpd.initd
99260e550e634108fb51ea44caef41aebe472cb4598b7e3a9e71cd1c7dcff5ba  rdate.initd
36ec4261992bc72ee8b037ee1446b74f8a488e89bd23a112bc3b5b34a2c27377  syslog.initd
03c1a6312598aeea5d10195ff5473ecc8ee89182b8115a8b5ad529259c0ea564  watchdog.initd
6b466c5b0e9cab7613aa56edf383e891c5c7e26ee00467e9f7913808be23a328  cron.confd
f6cd63d6e5f384dcb01a4906c9a0b6c5923794380235dfe0d79b48a686b03c5d  klogd.confd
4224e5c6b5ffeb815c15f3e9f17ddaa169d4e6b7da169dbd0939fe06dbe8914d  ntpd.confd
791d49802395861a5f788dc7436c1260ec2cd3bdea0c790952ae1b2dd518e811  rdate.confd
8a2362d6b5b1ec1d754878726392119f2cc7416c748ee4f2ab134f731d6e6198  syslog.confd
77f6f9069afdbb477a7e822aa2c7265d64fd22fdd9338bb3beb0cee901d202ce  watchdog.confd
9516608efc871fead61a77923771e34288284f9055336872e77bb0202f2b3229  mdev.conf
ef091bb4c8943a99b9a97b556cdc15ddd20275f5afa8287e201419b08c4e71de  dvbdev
3fccc9ee437e3dcc8ac73bfe3713334a7156a112fe442e052fff4f26ff0f6a88  ide_links
dcb0c37590019bccb4c31a5372cbf7728eae6f1174d56bf0708d7504243a5fbb  usbdev
4957f6991e0cb988b263b5276b582f1757deecad19cddebe3c615b381df9f858  usbdisk_link
86ed99205050a5dcca8a27c7e8658df8c55dc85ed810db0d64b51f7c63aa140e  xvd_links
f81b6a0f04cecd131f6372ce27fdb7d2bbb9155ce2cc333c8374dfd70537b901  default.script"
sha512sums="e122e0982534f3bd3121be83c92fa16c40e15343bd09ff367c630cca75f8350e650db7ed97c1a808185938ba6fe97a65da90a2266be4188c023af4993bd4dd55  acpid.initd
1499c3ad3b0d6adb49b7dab8a0d7a4d465f208ac0aedcd72845d80d1ee508a07142483d9c7eb1b4936d6557c5fc6c3b69ca356a84545bf0b71e9f6b51fac04e2  cron.initd
82c70082fa6e00c389982e16b0ef92f8f137941517a2b74de57150f4645d8b8b2a91abaa22d5aede8f7d08e0749ef14a07860cf16f96058b96f4246a6c39222a  dnsd.initd
66bfd7d2a03f4e8a50f08b7057091bfef8e36001eb7c07574ec45da6d75db05a88ae37dbd51e3e3fc7b00a784bf69f8416682ce0454ca16cc072358abdf4d2ce  httpd.initd
82fb2ed926e7fbd87f3df7aba556ccb27ddd1fbd79e823acf00aea4ac41c5c5bf58dbf9488dd10b268371b40994a3cca9e305c1177a1628f72b9a1d3ebce0702  inetd.initd
72f2267ccd7ab0a6bf9fe6bf9b6d403fbda490a8df396387dfa4da0b93f4bcdcd375f695f9cf4b83918c9304328090c4ef9524c1079123a6af5c2eeba74c758f  klogd.initd
d10747bede68ac4dacf485f893820ccb65f2caff4c437412bc161cf0b0f34dbf4c23c900059de0ff746a77e2674ee31d94645a247f8e88338702a3a779c75b5e  mdev-mount.initd
82dc1e78a4e4e5e5f2bd1efffc6645cb168ef1551bce4289dc189eaf215226d670735826f38af6bf43ad311110a9fa416d735bdb43eb4cef734b813d45786060  mdev.initd
c30d3936e045c01fdc9d1e9d1c0d2cd79b6dabb453400f067bc4eefa239a41c98bbe3fcd3ae53792e0e6d8fcf4aebc727e4524ec3ccd5741d5659a0a351c1c7e  ntpd.initd
297c941a3e2bc57885733b82b12291227e8ba9f057e585c38650545a8217689e200d4607656d819d03e3d0a9e27d0b182d26e51a47950181155ec07e565c145d  rdate.initd
683fe4180dbbca2fbcf56680b0434f0783db000fda9298f48b9ec268ad20b0cf21813cfb19eaad2c52f7a7f7246e9f88e0f06dbd8d14360f5406c87bd8665b04  syslog.initd
0a4f989068f00dd8599433ea1fe0713c405ed871750b918e32db2d6bccefc8b870ea2e16864d1b7c3dd57d63e04b41aa0bf9c882c1a9e8108def141d12072e90  watchdog.initd
49c4299eca93517f09c6af71dd6bf737fec4006dfbf72b696fc3ec3e39d61fdd63107cae1bd883b2539848d52e6f6b1ed494d0c871e92e50fc55669295f3585e  cron.confd
f9bf43b72142bbb4c0665c1268a3d91586ef8a057dfe64c53b6923815d2db1f669b8080a38311ad89cda0b783a8628700fc5414d834a21d8e48515760bb910f7  klogd.confd
b0ba67585f39d83320ed6de183d7463a0e163807b9f3dc6f0baa212236056f22aeb2c5399dfdcd54929eb5ae06a15714c2fed133b5888869ed9d9cf589cef843  ntpd.confd
3d6c4d358e226e0c0462f2003bcf0b6787f91a53f4d6b6db5bfe7748bb0dd392d7cc454058ea8a9b649e8dd2629963a5ad1257c36af04367caeb1923f954daf7  rdate.confd
330c6e6808dfdf05c75dcdec1048f17052f79b285e11513a64a97bf28fb60e023840966abe03a74fa146eb6b842c4e0e78df82918528e0b6e8f546f7f0a4e323  syslog.confd
359af0a4a1841dd6557eaf3e71d39f0d7a2687bad6a8fc6ef436eccf72a40f85c6400a3b7880c7f64d8e460b6af8a0ff3dd5ffc3a4b1aa8eb0d8f7eaf99ee3e4  watchdog.confd
82cd51655f056abb59ef33e9ad5819c22c729911995f7b27960c989a9be1fe8ef8ab36d356cb26da70ecdd881b3c201f6d6f7e191f8539b9365c7fe854413a81  mdev.conf
ebd82f935da2ca89097234dd8a8f47e179a423652c151123a1f3343f3e1e7bfaba2b8800380e988d4e8f4294545d3a9ab6708ae2e77c5b108b5f091bbce8f94a  dvbdev
0142234d0bda86ad1e5f88f1da34669e5fda46a0fd52ce507bd49ce74d2b7c12c323e8db863bccb924e6d632b568db8b243361b217c5b2e1d92a25feb6e62dec  ide_links
b2dcf0ded9264334d79fbbb05dd12d649dc3119a060db5893f0e8aeca2141323961c3ba4c822a0ffb00dba848742d5cb374dc77e776b57cecde352a3e8e30f8a  usbdev
392c40d223bdff59a624bd67907c06cff9c1b5468c25c19e10dbc3cef3208275d93966e760f140d71a86cb36ec796ea08dbaa767b40c12e9326c3c72964b28a8  usbdisk_link
5db6fa8bbb2d891212187c598cd8703277b3fcb95b5dba6628f7128eb48cc7c1bf4c53885e9d870999c8c95d2fe9cd27609b523596dc553c31b6f72a452a0118  xvd_links
b605abe0035e4ccefc6a5f6d27826caa6e62440be6add2d4140325a897d337918c79204202cc08455b7c8b122a6b744f0b6e4601a00113fd2aff4febd6f3fd90  default.script"
