# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=alpine-conf
pkgver=3.8.1
pkgrel=5
pkgdesc="Alpine configuration management scripts"
url=http://git.alpinelinux.org/cgit/$pkgname
arch="all"
license="MIT"
depends="openrc>=0.24.1-r6 busybox>=1.26.1-r3"
source="https://dev.alpinelinux.org/archive/alpine-conf/alpine-conf-$pkgver.tar.xz
	0001-setup-alpine-setup-ntp-before-repos.patch
	0001-update-kernel-include-regulatory-database.patch
	0001-update-kernel-add-modloopfw-option.patch
	0001-update-kernel-include-associated-firmware-files-to-m.patch
	0001-update-lbu-openssl-invocation.patch
	"

builddir="$srcdir"/$pkgname-$pkgver
build() {
	cd "$builddir"
	make VERSION=$pkgver-r$pkgrel
}

package() {
	cd "$builddir"
	make install PREFIX= DESTDIR="$pkgdir"
	for i in commit exclude include status update; do
		ln -s lbu "$pkgdir"/sbin/lbu_$i
	done
}

sha512sums="6aa0f0eaab6ee1ff8f9259d5c4e4634bf6d736a2cb52efb3cbabfdfcdd5dcd81b9fe05073ac16f964e7b74b5006b5f4219b33ab4ff5f984273b3bb48982afd6a  alpine-conf-3.8.1.tar.xz
4b1b88b66a0771720e1991534c0d55b17293d0d9c3e4064d4210c2edd2fcbe8f6691bf5336b5492312df6160aad8f17b4bb4f9174efd4bad342472b3ad2a16bc  0001-setup-alpine-setup-ntp-before-repos.patch
544498b30bd57c84521a4fd5fbd45791b9307dcd29532278f45b61fb14d6405b5454e98fb535fd31331793b806ef897e208c3c6f8bc772dbd55ae2c61abcb402  0001-update-kernel-include-regulatory-database.patch
65f6f79a841ab661ab5fdd41c5e78f4bb74bbc4b1d252291d64cb9d5afa6853133d562c2069bf138b39407c8a0ecc37697b5d17534ded7b8dab8490be6a13698  0001-update-kernel-add-modloopfw-option.patch
bfdaa44b0e02fb49c74ff8a6f3292356a6856a1a8aac005d14fe396f02a1c881658c1d9cfe69216fdf0f7c0cfad547cff57270bb8ab87390f0e1e9addfb68fe9  0001-update-kernel-include-associated-firmware-files-to-m.patch
dd995435797f0a26c86be375adfa0ffef11aa232d1ef620c315bcfaf2ab918222179cbba6d6f46fad7022c3abfff8212ff406028e7919c6a0789085167bf3013  0001-update-lbu-openssl-invocation.patch"
