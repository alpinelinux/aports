# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=alpine-conf
pkgver=3.20.0
pkgrel=4
pkgdesc="Alpine configuration management scripts"
url="https://git.alpinelinux.org/alpine-conf/about"
arch="all"
license="MIT"
depends="openrc>=0.24.1-r6 busybox>=1.26.1-r3"
checkdepends="kyua sfdisk"
source="https://gitlab.alpinelinux.org/alpine/alpine-conf/-/archive/$pkgver/alpine-conf-$pkgver.tar.gz
	260.patch
	270.patch
	0001-update-kernel-fix-bug-when-firmware-glob-expands-to-.patch
	"

build() {
	make PREFIX="/usr" VERSION=$pkgver-r$pkgrel
}

package() {
	make install PREFIX="/usr" DESTDIR="$pkgdir"
	for i in commit exclude include status; do
		ln -s lbu "$pkgdir"/usr/sbin/lbu_$i
	done
}

check() {
	make check
}

sha512sums="
10bdc5d945df49513da29d30345236f2e70811a26d423bea8c085084774c98a28708cc76f32be1d04d602c9261d17c5eb43dab791159c2c3c560ff785aaef805  alpine-conf-3.20.0.tar.gz
e64a4be40fe58c0129b68fb1a46666417247d126458ce8127dbf82644a87a59f59bf595da55e87a3c031547ad14f5a40d6f6940e83319590f6bc63b5e1daeb3d  260.patch
8845192b16115177dbee6903bef6f2c488a1a010500e0ba372f31f857b4758e2b0b2dc42d4189c18d65f1b11aaa1f8d1f870ebd8b2da1a8575386fbc543affd2  270.patch
468c9270da0295a36a5882c7c40d2f60ed4a52a3ac7fff17a92276e8c8f86c0fec176484fcd04f5ace1098ededa5588aa0895b450c70719979f2584b6f67070d  0001-update-kernel-fix-bug-when-firmware-glob-expands-to-.patch
"
