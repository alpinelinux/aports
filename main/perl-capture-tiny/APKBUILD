# Automatically generated by apkbuild-cpan, template 1
# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=perl-capture-tiny
_pkgreal=Capture-Tiny
pkgver=0.36
pkgrel=0
pkgdesc="Capture STDOUT and STDERR from Perl, XS or external programs"
url="http://search.cpan.org/dist/Capture-Tiny/"
arch="noarch"
license="apache_2_0"
cpandepends=""
cpanmakedepends="   "
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/D/DA/DAGOLDEN/$_pkgreal-$pkgver.tar.gz"

_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	make && make test
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="db6444111c30ac01a76a4c118241c7b6  Capture-Tiny-0.36.tar.gz"
sha256sums="ab8742e53ad204a421bc82d5813f3c4c85c76581ea10d910d0aefc161f8cb03d  Capture-Tiny-0.36.tar.gz"
sha512sums="5897fc20d2189dab7c4eef56d1f7c2b617ed868430f5d63c9a87ea547c04177e1543b74f1eb0c3529135f40ee5488adbf1fef4856177a994a3ae6302771646ef  Capture-Tiny-0.36.tar.gz"
