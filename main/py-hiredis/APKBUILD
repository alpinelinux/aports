# Maintainer: Eivind Uggedal <eivind@uggedal.com>
pkgname=py-hiredis
_pkgname=${pkgname#py-}
pkgver=0.1.4
pkgrel=0
pkgdesc="Python extension that wraps hiredis"
url="https://github.com/redis/hiredis-py"
arch="all"
license="BSD"
depends="python2"
depends_dev=""
makedepends="python2-dev py-setuptools hiredis-dev"
install=""
subpackages=""
source="https://files.pythonhosted.org/packages/source/${_pkgname:0:1}/$_pkgname/$_pkgname-$pkgver.tar.gz
	system-hiredis.patch"

_builddir="$srcdir"/$_pkgname-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	python2 setup.py build || return 1
}

package() {
	cd "$_builddir"
	python2 setup.py install --prefix=/usr --root="$pkgdir" || return 1
}

sha512sums="8767c836a845b5bd8a07dec33d0e27522d8c0b888bcd912eebf701a3826a59bf7b24cee26bfac33a19079e94f62ef1b823ab4ace505e5a146a33d676d7168693  hiredis-0.1.4.tar.gz
4b39b75777f1955d17312841aaf602a9d97c6618f8dd81bbc3cc40ab2a5b91ecb7830e633dcbb029c47cc89f3a0e871189fd30edf7dfe3dec482d82898768e01  system-hiredis.patch"
