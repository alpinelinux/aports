# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=xfce4-vala
pkgver=4.10.2
pkgrel=2
pkgdesc="Vala bindings for Xfce4"
url="http://wiki.xfce.org/vala-bindings"
arch="x86 x86_64"
license="LGPL"
depends="exo-dev libxfce4util-dev libxfce4ui-dev garcon-dev
	xfce4-panel-dev xfconf-dev vala"
makedepends=""
install=
subpackages=
source="http://archive.xfce.org/src/bindings/xfce4-vala/${pkgver%.*}/xfce4-vala-$pkgver.tar.bz2"

_builddir="$srcdir"/$pkgname-$pkgver
prepare() {
	local _p
	cd "$_builddir"
	for _p in $source; do
		case $_p in
		*.patch) msg $_p; patch -p1 -i "$srcdir"/$_p || return 1;;
		esac
	done
	sed -i -e '/libvala/s/0.16/0.20/g' \
		-e 's/vala-0.16/vala-0.20/g' \
		configure || return 1
}

build() {
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install
}

md5sums="afcca7cb5ae84b9a9a621a352eaf59c4  xfce4-vala-4.10.2.tar.bz2"
sha256sums="7d9ee9f7f4ce88f3ebc1bd465bad1cd813fa5d268be62fc8d313cbec5345a978  xfce4-vala-4.10.2.tar.bz2"
sha512sums="1db8d1cc65cd78d7ad3968deeb15f257af0dacd8c1de41591b26d7b9448717c7ca6c1fb882c112b7ae77f1b3de2f05f9ac8728552f72cc2025c90918564f48b1  xfce4-vala-4.10.2.tar.bz2"
