# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=squashfs-tools
pkgver=4.4
pkgrel=0
pkgdesc="Tools for squashfs, a highly compressed read-only filesystem for Linux."
url="http://squashfs.sourceforge.net"
arch="all"
license="GPL-2.0-or-later"
makedepends="zlib-dev xz-dev lzo-dev lz4-dev attr-dev zstd-dev"
source="https://downloads.sourceforge.net/sourceforge/squashfs/squashfs$pkgver.tar.gz"

builddir="$srcdir/squashfs$pkgver/$pkgname"

build() {
	cd "$builddir"
	CFLAGS="$CFLAGS -std=gnu89" \
	make XZ_SUPPORT=1 LZO_SUPPORT=1 LZ4_SUPPORT=1 ZSTD_SUPPORT=1
}

package() {
	cd "$srcdir"/squashfs$pkgver/$pkgname
	mkdir -p "$pkgdir"/sbin
	cp -a mksquashfs unsquashfs "$pkgdir"/sbin
}
sha512sums="e7119f82cea0eda8dffcbf15c9ee511ad457e004bfc0c5a5685e84785e49cf34f3c053036449af6bba0012cef48426f65958c97b9958d58f1b31175cb0bbbe24  squashfs4.4.tar.gz"
