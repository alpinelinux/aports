pkgdesc="Small and Simple File Integrity Checker"
pkgname=sfic
pkgver=0.1.7
pkgrel=3
depends=
arch="all"
license=GPL
makedepends="autoconf automake samba-dev"
depends=
url=http://sfic.sourceforge.net
source="http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz
	$pkgname-0.1.7-signal.patch
	automake.patch"

subpackages="$pkgname-doc"

_builddir="$srcdir"/sfic-$pkgver
prepare() {
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
	sed -i -e 's/^        /\t/' src/Makefile.am || return 1
	aclocal
	autoconf
	automake --add-missing || return 1
}

build() {
	cd "$srcdir"/$pkgname-$pkgver
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		|| return 1
	make || return 1
}

package() {
	cd "$srcdir"/$pkgname-$pkgver
	make install DESTDIR="$pkgdir"
}

md5sums="6197f7a1e8b0fc4887d4573f67b7bb81  sfic-0.1.7.tar.gz
e0c284f8b4e355b3ea52927fb02e163a  sfic-0.1.7-signal.patch
589e32798726f5da2c66eed34f178591  automake.patch"
