# Contributor: <xmingske@gmail.com>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
_pkgname=django-djblets
pkgname=py-${_pkgname}
pkgver=0.6.31
pkgrel=0
pkgdesc="set of utilty classes and functions for web applications written using Django"
url="https://github.com/djblets/djblets/"
arch="noarch"
license="BSD"
makedepends="python2-dev py-setuptools"
depends="python2 py-django-pipeline"
source="$pkgname-$pkgver.tar.gz::https://github.com/djblets/djblets/archive/release-${pkgver}.tar.gz"

builddir="${srcdir}/djblets-release-${pkgver}"

prepare() {
	local pf
	cd "${builddir}"
	for pf in $source; do
		case $pf in
		*.patch) msg $pf; patch -p1 -i "$srcdir"/${pf};;
		esac
	done
}

build() {
	cd "${builddir}"
	python2 setup.py build
}

package() {
	export PIPELINE_JS_COMPRESSOR='pipeline.compressors.jsmin.JSMinCompressor'
	cd "${builddir}"
	python2 setup.py install --prefix=/usr --root="$pkgdir"
}

sha512sums="8874070fca77fce8a823ce0155ca0314758c7a6d7dd423a30aea5b23990bcec3675a9e22751f4bf6b6db75c6f0688cfaab85e59a344e13135c0f55a6edc35b6d  py-django-djblets-0.6.31.tar.gz"
