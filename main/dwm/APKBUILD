# Contributor: Gaber Ayoubi <gaber.ayoubi@gmail.com>
# Maintainer: SÃ¶ren Tempel <soeren+alpine@soeren-tempel.net>
pkgname=dwm
pkgver=6.1
pkgrel=3
pkgdesc="dwm - dynamic window manager"
url="http://dwm.suckless.org"
arch="all"
license="MIT/X"
depends="dmenu st"
depends_dev=""
makedepends="libxft-dev libx11-dev libxinerama-dev"
install=""
subpackages="$pkgname-doc"
source="http://dl.suckless.org/$pkgname/$pkgname-$pkgver.tar.gz
        00-no-emoji-title-crash.patch"

builddir="$srcdir"/$pkgname-$pkgver
prepare() {
	default_prepare || return 1
	sed -i -e '/CFLAGS/{s/-Os//;s/=/+=/}' \
		-e '/LDFLAGS/{s/-s//;s/=/+=/}' \
		"$builddir"/config.mk || return 1
}

build() {
	make X11INC=/usr/include/X11 \
		X11LIB=/usr/lib/X11 \
		FREETYPEINC=/usr/include/freetype2 \
		-C "$builddir" || return 1
}

package() {
	make PREFIX=/usr DESTDIR="$pkgdir" \
		-C "$builddir" install || return 1
}

sha512sums="875644bbc246088f2c87e50debbadd4bc179444b396b1b327149087e8bc5303325ebc9103a7e3c864266ee1ac683ea3cd8f0a08285c8e46fc4389d5b83a555f1  dwm-6.1.tar.gz
40e11bf0ef9126880807270197ded7c2bec804962b96296384cb388e4a7465d5ead00ddd0c0f364b0875028bac6e01703d19dc511963c7d98685b899cd7d742a  00-no-emoji-title-crash.patch"
