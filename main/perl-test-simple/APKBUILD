# Automatically generated by apkbuild-cpan, template 1
# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=perl-test-simple
_pkgreal=Test-Simple
pkgver=1.302062
pkgrel=0
pkgdesc="Basic utilities for writing tests."
url="http://search.cpan.org/dist/Test-Simple/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends=""
cpanmakedepends="   "
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
provides="perl-test-tester"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/E/EX/EXODIST/$_pkgreal-$pkgver.tar.gz"
builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	default_prepare || return 1

	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make && make test
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="d869f6754eccc38484da7e21e9c7bbcc  Test-Simple-1.302062.tar.gz"
sha256sums="6729060d4ab12e2db3a3c6d6376ee6a9fb77c0ba0308b66919365a1e8bf156ea  Test-Simple-1.302062.tar.gz"
sha512sums="8c221ec4ee33da68191df6c8e13f82f90d694a1d87e2406a4af500b70bd87e8b58093735ca71c63c6cb569673e088d9f558bf7155c1f5e885eada354c090d3ff  Test-Simple-1.302062.tar.gz"
