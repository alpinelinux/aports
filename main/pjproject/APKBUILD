# Contributor: Michael Mason <ms13sp@gmail.com>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=pjproject
pkgver=1.4
pkgrel=1
pkgdesc="CLI Softphone"
url="http://www.pjsip.org/pjsua.htm"
license="GPL"
depends=
makedepends="uclibc++-dev openssl-dev pth-dev"
install=
subpackages="$pkgname-dev pjsua"
source="http://www.pjsip.org/release/$pkgver/$pkgname-$pkgver.tar.bz2"

build() {
	cd "$srcdir/$pkgname-$pkgver"
	export CXX=${CXX_UC:-g++-uc}

	./configure --build=${CHOST:-i486-alpine-linux-uclibc} \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info
	make -j1 dep || return 1
	make -j1 all || return 1
	make -j1 DESTDIR="$pkgdir" prefix=/usr install

}

pjsua() {
	pkgdesc="pjsua is an open source command line SIP user agent (softphone)"
	cd "$srcdir/$pkgname-$pkgver"/pjsip-apps/bin/
	install -D -m755 pjsua-${CHOST:-i486-alpine-linux-uclibc} \
		"$subpkgdir"/usr/bin/pjsua
}
		
	
md5sums="c5abd0d764d89788d817d449141e45a6  pjproject-1.4.tar.bz2"
