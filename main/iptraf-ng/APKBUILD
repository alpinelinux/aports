# Contributor: Leonardo Arena <rnalrd@alpinelinux.org>
# Maintainer: Leonardo Arena <rnalrd@alpinelinux.org>
pkgname=iptraf-ng
pkgver=1.1.3.1
pkgrel=1
pkgdesc="IP Network Monitoring Software (fork of original iptraf)"
url="https://fedorahosted.org/iptraf-ng/"
arch="all"
license="GPLv2"
depends=
makedepends="ncurses-dev"
install=
subpackages="$pkgname-doc"
source="https://fedorahosted.org/releases/i/p/$pkgname/$pkgname-$pkgver.tar.gz
	0001-token-ring-kernel-v3.5-kill-off-token-ring-support.patch"

_builddir="$srcdir"/iptraf-ng-$pkgver
prepare() {
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}


build() {
	cd "$_builddir"
  	CFLAGS="$CFLAGS -std=gnu99" ./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		|| return 1
	make
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install
}

md5sums="1a2c02944b0b012d6a3de96207610fa2  iptraf-ng-1.1.3.1.tar.gz
e381baa0847040085f4e0db98ecc3416  0001-token-ring-kernel-v3.5-kill-off-token-ring-support.patch"
sha256sums="687b5632290d9b4963842df36f3572d97e333656d1fb6c5f341ab7df651dc185  iptraf-ng-1.1.3.1.tar.gz
a36aaf8d110611ba8f9bd95a4ecdcb51fc90416b2f23fd708e130d4e87dec15d  0001-token-ring-kernel-v3.5-kill-off-token-ring-support.patch"
sha512sums="eb477afa5d01a3c787a4db153669713fe13af866b76446191f5679098d96c2e72b3e21dbeceda202770022204d8c5217b52dc5c25e545129aef6de2de622c04a  iptraf-ng-1.1.3.1.tar.gz
16f0aaa181ba6bc4f1812783eb9bd110bed735ce0066a0db6384447f5c145f87ff0819fb3a6056af4e5cdb6eac2b0391a520d7ee15f7178118a505c245458b2c  0001-token-ring-kernel-v3.5-kill-off-token-ring-support.patch"
