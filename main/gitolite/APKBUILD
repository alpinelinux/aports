# Contributor: Łukasz Jendrysik <scadu@yandex.com>
# Maintainer:	Łukasz Jendrysik <scadu@yandex.com>
# Contributor: Carlo Landmeter <clandmeter@gmail.com>
pkgname=gitolite
pkgver=3.6.8
pkgrel=0
pkgdesc="Centralized git server, with very fine-grained access control and many powerful features"
url="https://github.com/sitaramc/gitolite"
arch="noarch"
license="GPL-2.0"
depends="git perl"
install=$pkgname.pre-install
pkgusers="git"
pkggroups="git"
source="gitolite-$pkgver.tar.gz::https://github.com/sitaramc/$pkgname/archive/v${pkgver}.tar.gz"

prepare() {
	cd "$srcdir"/$pkgname-$pkgver
}

package() {
	install -d "$pkgdir"/usr/bin
	install -d "$pkgdir"/usr/lib/gitolite

	cd "$srcdir"/$pkgname-$pkgver
	./install -to "$pkgdir"/usr/lib/gitolite
	echo $pkgver > "$pkgdir"/usr/lib/gitolite/VERSION
	ln -s /usr/lib/gitolite/gitolite "$pkgdir"/usr/bin/
	install -o git -g git -d -m 700 "$pkgdir"/var/lib/git
}

sha512sums="f65d4e4354079f868c9f9a943efb84ad4e29f96c69a3792c13dda383dac0133baa3d93925967c6be71e923b27e0ad91b57b5f1245cf64eeec0f0b719cbda4270  gitolite-3.6.8.tar.gz"
