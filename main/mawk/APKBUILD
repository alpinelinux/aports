# Contributor: Miguel Terron <miguel.a.terron@gmail.com>
# Contributor: Celeste <cielesti@protonmail.com>
# Maintainer: John Vogel <jvogel@stygian.me>
maintainer="John Vogel <jvogel@stygian.me>"
pkgname=mawk
pkgver=1.3.4_p20260129
pkgrel=0
_pkgver=${pkgver/_p/-}
pkgdesc="mawk is an interpreter for the AWK Programming Language"
url="https://invisible-island.net/mawk/"
arch="all"
license="GPL-2.0-only"
subpackages="$pkgname-doc"
source="https://invisible-island.net/archives/mawk/mawk-$_pkgver.tgz
	disable-nan-tests.patch
	"
builddir="$srcdir/$pkgname-$_pkgver"

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
90debb7eefc5e6b9895d74f971c87b8e1e33562d7d991d9ae07d3396322e5bb86188faef7a721cdc688f0d4e42c1bba2641d23ddb9527e2df41f9b5ca9d59724  mawk-1.3.4-20260129.tgz
a500d743863b03a58c5db9b4563ced04c389df4f5d1e81ffa43d086a18210dbcdee1f6c369abbfe387768caef32b29b723b1389b7a99bc421ce7c06a1bd2121b  disable-nan-tests.patch
"
