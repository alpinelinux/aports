# Maintainer: Dan Williams <dan@ma.ssive.co>
pkgname=runc
pkgver=1.0.0_rc5
pkgrel=0
pkgdesc="CLI tool for spawning and running containers according to the OCI specification"
url="https://github.com/opencontainers/runc"
arch="all"
license="Apache-2.0"
depends=""
makedepends="go bash libseccomp-dev linux-headers"
install=""
subpackages=""
source="https://github.com/opencontainers/runc/archive/v${pkgver/_/-}.tar.gz
	"
builddir="$srcdir/$pkgname-${pkgver/_/-}"

build() {
	export AUTO_GOPATH=1

	cd $builddir
	mkdir -p src/github.com/opencontainers/
	ln -s "$builddir" src/github.com/opencontainers/runc
	cd src/github.com/opencontainers/runc
	GOPATH="$PWD" make COMMIT="$_runc_ver"
}

check() {
  cd $builddir
  ./runc --help > /dev/null
}

package() {
	cd $builddir
	install -Dm755 runc "$pkgdir"/usr/bin/runc
}

sha512sums="714230887ff9706c29b0656c5cdb253698bde6252a23e7f48aa690747fb57abd7884c2da1c4d0e314f9f301c5962417351557d15d986e45fcc336e98069aeac6  v1.0.0-rc5.tar.gz"
