# Contributor: Guy Godfroy <guy.godfroy@gugod.fr>
# Maintainer: Guy Godfroy <guy.godfroy@gugod.fr>
pkgname=go-tools
pkgver=0.41.0
pkgrel=1
pkgdesc="Go tools"
url="https://pkg.go.dev/golang.org/x/tools"
arch="all"
license="BSD-3-Clause"
makedepends="go"
source="$pkgname-$pkgver.tar.gz::https://github.com/golang/tools/archive/refs/tags/v$pkgver.tar.gz"
# net: go deps
# !check: tests are failing, and community/gopls which is based on the same
# repo has the checks disabled too, so no further investigation was done.
options="net !check"
builddir="$srcdir/tools-$pkgver"

prepare() {
	default_prepare
	mkdir -p bin
}

build() {
	go build -v -o bin ./cmd/...
}

check() {
	go test ./...
}

package() {
	install -m755 -d "$pkgdir"/usr/bin
	for bin in bin/*
	do
		install -m755 $bin "$pkgdir"/usr/bin
	done
}

sha512sums="
6399659ac31b96c87465edd5d20becbad800bcc09888346fde243651fb5b366efcce6c0cf1ffdafcd258ce8da5bfba5985d1ec72384be13dfbf552fbb6f1de61  go-tools-0.41.0.tar.gz
"
