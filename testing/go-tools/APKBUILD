# Contributor: Guy Godfroy <guy.godfroy@gugod.fr>
# Maintainer: Guy Godfroy <guy.godfroy@gugod.fr>
pkgname=go-tools
pkgver=0.39.0
pkgrel=0
pkgdesc="Go tools"
url="https://pkg.go.dev/golang.org/x/tools"
arch="all"
license="BSD-3-Clause"
makedepends="go"
source="$pkgname-$pkgver.tar.gz::https://github.com/golang/tools/archive/refs/tags/v$pkgver.tar.gz"
# net: go deps
# !check: tests are failing, and community/gopls which is based on the same
# repo has the checks disabled too, so no further investigation was done.
options="net !check"
builddir="$srcdir/tools-$pkgver"

prepare() {
	default_prepare
	mkdir -p bin
}

build() {
	go build -v -o bin ./cmd/...
}

check() {
	go test ./...
}

package() {
	install -m755 -d "$pkgdir"/usr/bin
	for bin in bin/*
	do
		install -m755 $bin "$pkgdir"/usr/bin
	done
}

sha512sums="
30092ac6438b9f661c9951c94e05b5718efb6b86f8ee597370d3fe3fa78b79340eab42a6c18116761b9191aa088b1d75eaa5fae7f047094518304acba676d83a  go-tools-0.39.0.tar.gz
"
