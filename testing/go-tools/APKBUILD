# Contributor: Guy Godfroy <guy.godfroy@gugod.fr>
# Maintainer: Guy Godfroy <guy.godfroy@gugod.fr>
pkgname=go-tools
pkgver=0.38.0
pkgrel=0
pkgdesc="Go tools"
url="https://pkg.go.dev/golang.org/x/tools"
arch="all"
license="BSD-3-Clause"
makedepends="go"
source="$pkgname-$pkgver.tar.gz::https://github.com/golang/tools/archive/refs/tags/v$pkgver.tar.gz"
# net: go deps
# !check: tests are failing, and community/gopls which is based on the same
# repo has the checks disabled too, so no further investigation was done.
options="net !check"
builddir="$srcdir/tools-$pkgver"

prepare() {
	default_prepare
	mkdir -p bin
}

build() {
	go build -v -o bin ./cmd/...
}

check() {
	go test ./...
}

package() {
	install -m755 -d "$pkgdir"/usr/bin
	for bin in bin/*
	do
		install -m755 $bin "$pkgdir"/usr/bin
	done
}

sha512sums="
c7fca2686d57c0efedbb3cb4bf25d0ea183e478b77f46b2658a53ece579ec94197c631c3182fb08af3f62b642d6e201b2ea653128be50a0a5a50b579905bec7f  go-tools-0.38.0.tar.gz
"
