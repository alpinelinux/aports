# Maintainer: Leonardo Arena <rnalrd@alpinelinux.org>
pkgname=recoll
pkgver=1.43.9
pkgrel=0
pkgdesc="Desktop full-text search tool"
url="https://www.recoll.org/"
arch="all"
license="GPL-2.0-or-later"
makedepends="
	meson
	file-dev
	libxslt-dev
	libxml2-dev
	xapian-core-dev
	libx11-dev
	python3-dev
	aspell-dev
	qt5-qtbase-dev
	qt5-qttools-dev
	"
subpackages="$pkgname-dev $pkgname-doc"
source="https://www.recoll.org/recoll-$pkgver.tar.gz"
# no tests defined in meson.build
options="!check"

build() {
	abuild-meson \
		  -Drecollq=true \
		  -Dsystemd=false \
		  -Dwebkit=false \
		  -Dpython-chm=false \
		  -Dx11mon=false \
		  . build
	meson compile -C build
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C build
	install -Dvm644 COPYING "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

sha512sums="
7dd8d70c3b51056a067f83df7ca2b46bb1663c0074b42949b9e0a9da03e4cbba3bc9182b93935f9d3b34693229841fe2162a4224bbcd0c4610d1dd550a18deb0  recoll-1.43.9.tar.gz
"
