# Contributor: Vince Mele <vmele@inoc.com>
# Maintainer: Vince Mele <vmele@inoc.com>
pkgname=cockroach
pkgver=1.1.2
pkgrel=0
pkgdesc="A scalable, survivable, strongly-consistent SQL database."
url="https://www.cockroachlabs.com"
arch="all"
license="Apache"
depends=""
makedepends="autoconf cmake go make xz bash linux-headers"
install=""
source="https://binaries.cockroachdb.com/cockroach-v$pkgver.src.tgz"
builddir="$srcdir/$pkgname-v$pkgver"
options="!check"

build() {
	cd "$builddir"
	PREFIX=/usr make buildoss
}

#check(){
#	cd "$builddir"
#	make check
#}

package() {
	cd "$builddir"
	mkdir -p $pkgdir/usr/bin
	mv $builddir/src/github.com/cockroachdb/cockroach/cockroach $pkgdir/usr/bin/
	rm -rf $pkgdir/usr/local
}

sha512sums="385e33ec30c23d84403938420a2fcd66edff02a5c4b9d6220ce3683d833f065010953fd78ee57120c24f2947509b2fd29eeee2a45fd3ad47c16a6c8d779534d2  cockroach-v1.1.2.src.tgz"
