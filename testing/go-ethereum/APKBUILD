# Contributor: wener <wenermail@gmail.com>
# Maintainer: wener <wenermail@gmail.com>
pkgname=go-ethereum
pkgver=1.8.3
pkgrel=0
pkgdesc="Official Go implementation of the Ethereum protocol "
url="https://geth.ethereum.org"
arch="all"
license="Apache2"
makedepends="linux-headers go"
subpackages="$pkgname-tools"
source="$pkgname-$pkgver.tar.gz::https://github.com/ethereum/go-ethereum/archive/v$pkgver.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"
options="!check"

build() {
	cd "$builddir"
	make geth
}

package() {
	install -D -m 755 "$builddir"/build/bin/geth "$pkgdir"/usr/bin/geth
}

tools() {
	cd "$builddir"
	make all
	for i in abigen ethkey puppeth swarm bootnode evm faucet p2psim rlpdump wnode; do
		install -Dm 755 "$builddir"/build/bin/$i "$subpkgdir"/usr/bin/$i
	done
}

sha512sums="ce54f0a987ea4155319bf862a0876ca8e1a2e8f2922c5119c11f28cf4b4ef20fca769ef833a2e28347890b043425f70621fed12ef171232a06ecc7247d44bf02  go-ethereum-1.8.3.tar.gz"
