# Automatically generated by apkbuild-cpan, template 2
# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=netdisco
_pkgreal=App-Netdisco
_pkgver=2.036012_002
pkgver=${_pkgver/_/p}
pkgrel=1
pkgdesc="An open source web-based network management tool."
url="http://search.cpan.org/dist/App-Netdisco/"
arch="noarch"
license="bsd"
cpandepends="perl-dancer-plugin-passphrase perl-data-printer perl-plack perl-ldap
	perl-file-sharedir perl-starman perl-socket6 perl-json-xs perl-netaddr-mac
	perl-anyevent perl-uri perl-dancer-plugin-dbic perl-template-plugin-csv
	perl-try-tiny perl-snmp-info perl-list-moreutils perl-dbix-class
	perl-anyevent-dns-etchosts perl-daemon-control perl-file-slurper perl-moo
	perl-io-socket-ssl perl-role-tiny perl-algorithm-cron perl-sereal
	perl-template-plugin-number-format perl-json perl-dbix-class-helpers
	perl-dancer-plugin-auth-extensible perl-sql-translator perl-path-class
	perl-template-toolkit perl-url-encode perl-dancer perl-plack-middleware-reverseproxy
	perl-namespace-clean perl-cgi-expand perl-html-parser perl-net-dns
	perl-dancer-session-cookie perl-yaml-libyaml perl-netaddr-ip perl-aliased
	perl-guard perl-mce perl-plack-middleware-expires perl-dbd-pg"
# perl-app-local-lib-helper perl-app-cpanminus
cpanmakedepends=""
cpancheckdepends="perl-env-path"
depends="perl-term-ui perl-archive-extract $cpandepends"
makedepends="perl-dev perl-module-build $cpanmakedepends"
checkdepends="$cpancheckdepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/O/OL/OLIVER/$_pkgreal-$_pkgver.tar.gz
	git-20171124.patch
	"
builddir="$srcdir/$_pkgreal-$_pkgver"

prepare() {
	default_prepare

	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	perl Build.PL installdirs=vendor
}

build() {
	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	./Build
}

package() {
	cd "$builddir"
	./Build install destdir="$pkgdir"
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

check() {
	cd "$builddir"
	./Build test
}

sha512sums="72a399ad204dd34d8f7ffb7b00b50e36b7622bf1402972875166fee650c6c3b3f6980a94c7cbdf5793e90a0a59079c813e1a7e76f6793f806ba0fab42c94f90a  App-Netdisco-2.036012_002.tar.gz
cd7e47db82b9371af1e68086c95c70ea9493c274b90818edf50da880a50bdf1f3f06cadda5357ba01980fdffcf642984cb69c0699dc6fc227ad33d1264d65337  git-20171124.patch"
