# Contributor: Nathan Johnson <nathan@nathanjohnson.info>
# Maintainer: Nathan Johnson <nathan@nathanjohnson.info>
pkgname=php7-couchbase
_pkgreal=couchbase
pkgver=2.2.3
pkgrel=0
pkgdesc="PHP extension couchbase"
url="http://pecl.php.net/package/$_pkgreal"
arch="all"
license="ASL 2.0"
depends=""
pecldepends="php7-dev autoconf"
makedepends="$pecldepends libcouchbase-dev zlib-dev"
source="${pkgname}-${pkgver}.tgz::http://pecl.php.net/get/$_pkgreal-$pkgver.tgz"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	cd "$builddir"
	phpize7 || return 1
	./configure --prefix=/usr --with-php-config=/usr/bin/php-config7 || return 1
	make || return 1
	make test || return 1
}

package() {
	cd "$builddir"
	make INSTALL_ROOT="$pkgdir"/ install || return 1
	install -d "$pkgdir"/etc/php7/conf.d || return 1
	echo "extension=$_pkgreal.so" > "$pkgdir"/etc/php7/conf.d/$_pkgreal.ini
}

md5sums="f58ee1596ade978832f033f2e1662579  php7-couchbase-2.2.3.tgz"
sha256sums="5c998e9c98e51a783a5d74ec36aa6ac740a4a958dd8c206ed9e9d1580234907f  php7-couchbase-2.2.3.tgz"
sha512sums="d1feeb33a8ce450919731d17f84b170eaa68da104cedfe8ffa56f4e2e6062e250077d00babaca4872cc5bf271509daee2ca83e35cfb4b8ceef4b402cc20c1bf3  php7-couchbase-2.2.3.tgz"
