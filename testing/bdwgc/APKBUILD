# Contributor: TBK <alpine@jjtc.eu>
# Maintainer: TBK <alpine@jjtc.eu>
pkgname=bdwgc
_pkgname=gc
pkgver=7.4.6
pkgrel=0
pkgdesc="The Boehm-Demers-Weiser conservative garbage collector"
url="http://www.hboehm.info/gc/"
arch="all"
license="boehm-gc"
makedepends="libatomic_ops-dev pkgconf"
subpackages="$pkgname-doc $pkgname-dev"
source="https://github.com/ivmai/$pkgname/releases/download/v$pkgver/$_pkgname-$pkgver.tar.gz"
builddir="$srcdir/$_pkgname-$pkgver"

build() {
	cd "$builddir"

	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--with-libatomic-ops=yes

	make
}

check() {
	cd "$builddir"

	make check
}

package() {
	cd "$builddir"

	make DESTDIR="$pkgdir" install
}

sha512sums="6ccac6c0158b3f555ac9163d6942b0c5c1e14c61f421506b81ee483256d5c52f383dca5757b1c816820887a2985619e262deb3a9381a69e1403e5a8cc6e26a1f  gc-7.4.6.tar.gz"
