# Contributor: Milan P. Stanić <mps@arvanta.net>
# Maintainer: Milan P. Stanić <mps@arvanta.net>
pkgname=keyboard-backlight
pkgver=1.4.0_git20220127
pkgrel=0
_commitid=7e46ce7813c02ace994d6b546ab2f98b867f442e
pkgdesc="keyboard backlight control"
url="https://github.com/alexmohr/keyboard-backlight"
arch="aarch64 x86_64 riscv64 loongarch64 ppc64le s390x" # doesn't build on 32bit arches
license="MIT"
makedepends="cmake samurai linux-headers"
source="$pkgname-$pkgver.tar.gz::https://github.com/alexmohr/keyboard-backlight/archive/$_commitid.tar.gz
	"
builddir="$srcdir/$pkgname-$_commitid"

build() {
	if [ "$CBUILD" != "$CHOST" ]; then
		local crossopts="-DCMAKE_SYSTEM_NAME=Linux -DCMAKE_HOST_SYSTEM_NAME=Linux"
	fi
	cmake -B build \
		-DCMAKE_INSTALL_PREFIX=/usr \
		$crossopts
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
c4336c3e53f74c12335c6f7ded3ced60dc4ec696716150b7bdc5c35f7a33059f5b9f244d00e4cefdcce2f5ff2a73e0465ed11d8d2e412fb0c9ebae7a07a1d833  keyboard-backlight-1.4.0_git20220127.tar.gz
"
