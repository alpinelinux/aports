maintainer="Aelin <aelin@postmarketos.org>"
pkgname=rmtfs
pkgver=1.2
pkgrel=0
pkgdesc="Qualcomm Remote Filesystem Service Implementation"
url="https://github.com/linux-msm/rmtfs"
arch="all"
license="BSD-3-Clause"
makedepends="
	eudev-dev
	qrtr-dev
	"
subpackages="
	$pkgname-doc
	$pkgname-openrc
	$pkgname-systemd
	$pkgname-udev
	"
source="https://github.com/linux-msm/rmtfs/archive/v$pkgver/rmtfs-v$pkgver.tar.gz
	rmtfs.confd
	rmtfs.initd
	udev.rules
	"
options="!check" # no tests

build() {
	make rmtfs
}

package() {
	DESTDIR="$pkgdir" make prefix=/usr install

	install -Dm755 "$srcdir"/rmtfs.initd \
		"$pkgdir"/etc/init.d/rmtfs
	install -Dm644 "$srcdir"/rmtfs.confd \
		"$pkgdir"/etc/conf.d/rmtfs
	install -Dm644 "$srcdir"/udev.rules \
		"$pkgdir"/usr/lib/udev/rules.d/65-rmtfs.rules
	install -Dm644 LICENSE \
		"$pkgdir"/usr/share/licenses/$pkgname/COPYING
}

sha512sums="
9ddf2f1f4490180c54576ca2965e5a78ff972adae89925a919906f9bfaee8cdf08bbe7247dc78c63d6c2d41b08a65ecb200d8de5a3d2503405627d543f291f02  rmtfs-v1.2.tar.gz
48d6fed02ecc6ae967f4040f1aec1b57df7851306e30bc03fe570233690b0eaf14aa2fc478aeac3f96189b7c5d8f5e846690967faf7de32ba8cefba03acd50c3  rmtfs.confd
712672f289b8b44072732a1ad6eceb567f0c5bc0e21c936381bc9e7175ae2fb7cf75cee86cec9989d50ff5b6b32354f1886eb7e2a4b48689b9eba4d2c5a8a670  rmtfs.initd
cb2435c159d81d3a40d30e1355c82a3d560dc2df7d05fee95085bc80e492ac93a728258f2f1b463c04a964979760990c8c9176b22cb585cbec19ab285cd45440  udev.rules
"
