# Contributor: Bradley J Chambers <brad.chambers@gmail.com>
# Maintainer: Bradley J Chambers <brad.chambers@gmail.com>
pkgname=hexer
pkgver=1.4.0
pkgrel=0
pkgdesc="LAS and OGR hexagonal density and boundary surface generation"
url="https://github.com/hobu/hexer"
arch="all"
license="LGPL2+"
options="!check"
depends="libgcc libstdc++ musl gdal"
makedepends="cmake gdal-dev"
install=""
subpackages="$pkgname-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/hobu/$pkgname/archive/$pkgver.tar.gz
        10-missing-includes.patch
        20-backtrace-guards.patch"
builddir="$srcdir/$pkgname-$pkgver"

build() {
        mkdir -p "$builddir"
        cd "$builddir"

        mkdir build && cd build
        cmake .. \
                -DCMAKE_INSTALL_PREFIX=/usr \
                -DCMAKE_BUILD_TYPE=Release
        make
}

package() {
        cd "$builddir"/build
        make DESTDIR="$pkgdir" install
}

prepare() {
        default_prepare
}

sha512sums="4db94af7fe0a2cc3cd26202c4ec88fadd88408c92d14e11ac117af51ee267aa87cd82aa18b29867f318d272f644be60a826e7fb3c72908baba4124499f39579c  hexer-1.4.0.tar.gz
971434a5c7b817296ecf7fa44222c0b7db909bef0c8bf130daef6b9db0ee68bab7aa8ef59aae1e6eda1daa801e4fbe2a5a88f22083d4c885de5a1e05310f9a0a  10-missing-includes.patch
1a649668279d16b13ebcb4046a437b9dfffb95bfab88bb1e06a3235aa9989702b9efb57f0c8ac836e2ec911902814584a73d59c310031e98c01c6dc36036cb67  20-backtrace-guards.patch"
