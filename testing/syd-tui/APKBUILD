# Contributor: Robin Candau <robincandau@protonmail.com>
# Maintainer: Robin Candau <robincandau@protonmail.com>
pkgname=syd-tui
pkgver=0.2.2
pkgrel=0
pkgdesc="A terminal user interface for sydbox"
url="https://gitlab.exherbo.org/sydbox/sydbox/-/tree/main/tui"
# s390x: limited by sydbox
arch="all !s390x"
license="GPL-3.0-only"
depends="sydbox"
makedepends="cargo cargo-auditable"
source="$pkgname-$pkgver.tar.gz::https://gitlab.exherbo.org/sydbox/sydbox/-/archive/syd-tui-$pkgver/sydbox-syd-tui-$pkgver.tar.gz"
builddir="$srcdir/sydbox-$pkgname-$pkgver/tui"
options="net !check" # cargo crates, no test suite

prepare() {
	default_prepare
	cargo fetch --locked --target="$CTARGET"
}

build() {
	cargo auditable build --release --locked
}

package() {
	install -Dm 755 "target/release/$pkgname" "$pkgdir/usr/bin/$pkgname"
}

sha512sums="
abc437ab41153b599a29232c96cd52e61cf7e67a339ffebcb569d21dab928eea7411a5589d8567382068d3a5103eaf496156546bc97efd07aa2acfed4f249fb8  syd-tui-0.2.2.tar.gz
"
