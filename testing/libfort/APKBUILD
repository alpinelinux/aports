# Maintainer: Pete Dietl <petedietl@gmail.com>
pkgname=libfort
pkgver=0.1.4
pkgrel=0
pkgdesc="A simple crossplatform library to create formatted text tables."
url="https://github.com/seleznevae/libfort"
arch="all"
license="MIT"
makedepends="cmake"
subpackages="$pkgname-dev"
source="$pkgname-$pkgver.tar.gz::https://codeload.github.com/seleznevae/libfort/tar.gz/v$pkgver"

build() {
	mkdir build && cd build
	if [ "$CBUILD" != "$CHOST" ]; then
		CMAKE_CROSSOPTS="-DCMAKE_SYSTEM_NAME=Linux -DCMAKE_HOST_SYSTEM_NAME=Linux"
	fi

	cmake .. \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DBUILD_SHARED_LIBS=ON \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_CXX_FLAGS="$CXXFLAGS" \
		-DCMAKE_C_FLAGS="$CFLAGS" \
		${CMAKE_CROSSOPTS}
	make
}

check() {
	cd build
	make test
}

package() {
	cd build
	make DESTDIR="$pkgdir" install
}
sha512sums="f812a26713933de52a1c808d88e050dce4c325cc2cc042ad0c368d7ddcb94344ee6f77c77fb063e3ee6ff6765865207ab8a788351f59e725b7b1ea4da4a428a5  libfort-0.1.4.tar.gz"
