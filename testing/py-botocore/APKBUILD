# Maintainer: Valery Kartel <valery.kartel@gmail.com>
# Contributor: Valery Kartel <valery.kartel@gmail.com>
pkgname=py-botocore
pkgver=1.4.85
pkgrel=0
_python="2 3"
_pyname=${pkgname#py-}
pkgdesc="The low-level, core functionality of Boto3"
url="https://github.com/boto/boto"
arch="noarch"
license="apache2"
depends="py-dateutil py-jmespath"
depends_dev=""
makedepends="py-setuptools"
install=""
subpackages=""
source="$_pyname-$pkgver.tar.gz::https://github.com/boto/$_pyname/archive/$pkgver.tar.gz"
for v in $_python; do
	makedepends="$makedepends python$v-dev"
	subpackages="$subpackages py$v-$_pyname:package"
done
builddir="$srcdir"/$_pyname-$pkgver

build() {
	cd "$builddir"
	for v in $_python; do
		python$v setup.py build || return 1
	done
}

package() {
	local v=${subpkgname:2:1}
	if [ "$v" ]; then
		cd "$builddir"
		pkgdesc="$pkgdesc (for python$v)"
		depends="${depends//py-/py$v-} python$v"
		[ "$v" == "2" ] && replaces=$pkgname
		install_if="$pkgname=$pkgver-r$pkgrel python$v"
		python$v setup.py install --prefix=/usr --root="$subpkgdir" || return 1
	else
		mkdir -p "$pkgdir"
	fi
}
md5sums="b137db3b4c6b0b961d2bf6b40a4a9b3d  botocore-1.4.85.tar.gz"
sha256sums="2687f27fa0a9540ada4a1b82c5a6657ed5e03fb0eebc6b20adbe9db256a70a49  botocore-1.4.85.tar.gz"
sha512sums="0b5f6edaa5b6d67bccb18523b14d80ead79a1274f49667c30d7d7dc7361d7c4124c3c1336b37fb6bebf0eb0b17ebb6d067ec0621f9da2a7705979f427068849c  botocore-1.4.85.tar.gz"
