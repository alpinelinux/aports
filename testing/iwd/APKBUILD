# Contributor: Simon Frankenberger <simon-alpine@fraho.eu>
pkgname=iwd
pkgver=0.13
pkgrel=0
pkgdesc="Wireless daemon for Linux"
url="https://git.kernel.org/pub/scm/network/wireless/iwd.git"
arch="all"
license="GPL-2.0"
makedepends="dbus-dev libell-dev linux-headers readline-dev"
source="https://cdn.kernel.org/pub/linux/network/wireless/iwd-${pkgver}.tar.xz"
options="!check" #Todo: fix tests
builddir="$srcdir/$pkgname-$pkgver"

prepare() {
	cd "$builddir"
	./configure \
		--prefix=/usr \
		--disable-systemd-service \
		--enable-external-ell
}

build() {
	cd "$builddir"
	make
}

check() {
	cd "$builddir"
	make check
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="91be8a15d986fba6939cc05be896b59e6986e1b20a56b2058d1a572d5f894861058f3075567e4dec193cef5b6b73a407c8114391d83792564efea8b5c989cc06  iwd-0.13.tar.xz"
