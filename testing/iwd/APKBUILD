# Contributor: Simon Frankenberger <simon-alpine@fraho.eu>
pkgname=iwd
pkgver=0.14
pkgrel=0
pkgdesc="Wireless daemon for Linux"
url="https://git.kernel.org/pub/scm/network/wireless/iwd.git"
arch="all"
license="GPL-2.0"
makedepends="dbus-dev libell-dev linux-headers readline-dev"
source="https://cdn.kernel.org/pub/linux/network/wireless/iwd-${pkgver}.tar.xz"
options="!check" #Todo: fix tests
builddir="$srcdir/$pkgname-$pkgver"

prepare() {
	cd "$builddir"
	./configure \
		--prefix=/usr \
		--disable-systemd-service \
		--enable-external-ell
}

build() {
	cd "$builddir"
	make
}

check() {
	cd "$builddir"
	make check
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="91713b3cbe8830abb95705e67c7b66f1ced368fe83eeaad36170da9df22b965e97485068e9342e09291aee669890de8f328e33fc3f092ba45097f523d83c7484  iwd-0.14.tar.xz"
