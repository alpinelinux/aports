maintainer="Bart Ribbers <bribbers@disroot.org>"
pkgname=kontainer
pkgver=1.3.0
pkgrel=0
pkgdesc="Qt-based Distrobox GUI"
url="https://github.com/DenysMb/Kontainer"
# armhf blocked by qt6-qtdeclarative
arch="all !armhf"
license="GPL-2.0-only"
depends="distrobox"
makedepends="
	extra-cmake-modules
	kcoreaddons-dev
	ki18n-dev
	kiconthemes-dev
	kio-dev
	kirigami-addons-dev
	kirigami-dev
	qqc2-desktop-style-dev
	qt6-qtbase
	qt6-qtdeclarative-dev
	samurai
	"
subpackages="$pkgname-lang"
source="$pkgname-$pkgver.tar.gz::https://github.com/DenysMb/Kontainer/archive/refs/tags/$pkgver.tar.gz"
options="!check" # No tests
builddir="$srcdir/Kontainer-$pkgver"

build() {
	cmake -B build \
		-DCMAKE_BUILD_TYPE=None \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib
	cmake --build build
}

check() {
	ctest --test-dir build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
2fb83c00835f0ada488f69db410c942f779510845774e4fa7a3a574976c6d1945b8906343c0ea1fb63b0d41bdb88ce6a9be1642b85bdae3383e4f32f37333707  kontainer-1.3.0.tar.gz
"
