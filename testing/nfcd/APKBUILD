maintainer="Achill Gilgenast <achill@achill.org>"
pkgname=nfcd
pkgver=1.2.4
pkgrel=0
pkgdesc="NFC daemon providing access to NFC hardware via D-Bus interfaces"
url="https://github.com/sailfishos/nfcd"
arch="all"
license="BSD-3-Clause"
makedepends="
	file-dev
	glib-dev
	libdbusaccess-dev
	libglibutil-dev
	libnfcdef-dev
	"
subpackages="$pkgname-dev $pkgname-systemd"
source="$pkgname-$pkgver.tar.gz::https://github.com/sailfishos/nfcd/archive/refs/tags/$pkgver.tar.gz
	usr-dbus.patch
	"

build() {
	make
	make -C tools
}

check() {
	make test
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
d9128ce8336930ab9483be8ffb9c83154111a975227ee6ba3bab0aa37586b3ed840f1e4e731d299c6ea40c5db5769341685c7b688bc175780247c0ccddf347c1  nfcd-1.2.4.tar.gz
4288358161f83e259ae17fcf21abd940c79fb0f6cf5d05269da588be5e559fcc2fc8c452058f65090cc3c4caeda914cb6aac84007302ed97de7132a34b2fa0a8  usr-dbus.patch
"
