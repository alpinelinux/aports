maintainer="Achill Gilgenast <achill@achill.org>"
pkgname=nfcd
pkgver=1.2.3
pkgrel=1
pkgdesc="NFC daemon providing access to NFC hardware via D-Bus interfaces"
url="https://github.com/sailfishos/nfcd"
arch="all"
license="BSD-3-Clause"
makedepends="
	file-dev
	glib-dev
	libdbusaccess-dev
	libglibutil-dev
	libnfcdef-dev
	"
subpackages="$pkgname-dev $pkgname-systemd"
source="$pkgname-$pkgver.tar.gz::https://github.com/sailfishos/nfcd/archive/refs/tags/$pkgver.tar.gz
	usr-dbus.patch
	"

build() {
	make
	make -C tools
}

check() {
	make test
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
7e138495e86033eab5b0d6e48d83c96d3284287b4ed736a140e2bfd2536e5f031100e386bd69e42de2e2c2039677d088c22a9ef929677774ae5058b6839d79fd  nfcd-1.2.3.tar.gz
4288358161f83e259ae17fcf21abd940c79fb0f6cf5d05269da588be5e559fcc2fc8c452058f65090cc3c4caeda914cb6aac84007302ed97de7132a34b2fa0a8  usr-dbus.patch
"
