# Contributor: Jonas <spameier+alpine@proton.me>
# Maintainer: Jonas <spameier+alpine@proton.me>
pkgname=quickemu
pkgver=4.9.8
pkgrel=0
pkgdesc="Quickly create and run optimised Windows, macOS and Linux virtual machines"
# no edk2 on other architectures
arch="aarch64 x86_64 loongarch64 riscv64"
url="https://github.com/quickemu-project/quickemu"
license="MIT"
# deps from https://github.com/quickemu-project/quickemu/wiki/01-Installation#any-linux-installing-from-source
depends="
	bash
	coreutils
	curl
	edk2
	gawk
	grep
	jq
	mesa-utils
	pciutils
	procps-ng
	python3
	qemu
	qemu-bridge-helper
	qemu-modules
	sed
	socat
	spice-gtk-tools
	swtpm
	unzip
	usbutils
	util-linux
	uuidgen
	xdg-user-dirs
	xorriso
	xrandr
	"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/quickemu-project/quickemu/archive/refs/tags/$pkgver.tar.gz"
options="!check"

package() {
	# main package
	install -Dm755 quickemu quickget quickreport -t "$pkgdir"/usr/bin/

	# docs
	install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/"$pkgname"/
	install -Dm644 docs/quickemu.1 docs/quickget.1 -t "$pkgdir"/usr/share/man/man1/
	install -Dm644 docs/quickemu_conf.5 -t "$pkgdir"/usr/share/man/man5/
}

sha512sums="
755200664cd36c41ef7249f324c94c679f98ec94e07c0822a08b85510d62cacd92ad2370f5e15a24a96ce366ae43fc50faafa2df6628a00a8288bd91ca3bbb36  quickemu-4.9.8.tar.gz
"
