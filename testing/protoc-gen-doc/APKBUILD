maintainer="Leon White <badfunkstripe@gmail.com>"
pkgname=protoc-gen-doc
pkgver=1.5.1
pkgrel=0
pkgdesc="protoc plugin to generate documentation from comments in .proto files"
url="https://github.com/pseudomuto/protoc-gen-doc"
arch="all"
license="MIT"
depends="protoc"
makedepends="go"
source="$pkgname-$pkgver.tar.gz::https://github.com/pseudomuto/protoc-gen-doc/archive/refs/tags/v$pkgver.tar.gz"
builddir="$srcdir/protoc-gen-doc-$pkgver/cmd/protoc-gen-doc"
options="net" # download Go modules
subpackages="$pkgname-doc"

build() {
	go build -v .
}

check() {
	go test ./...
}

package() {
	install -Dm755 protoc-gen-doc -t "$pkgdir"/usr/bin/
	install -Dm644 "$srcdir"/protoc-gen-doc-$pkgver/LICENSE.md "$pkgdir"/usr/share/licenses/$pkgname/LICENSE.md
}

sha512sums="
2d38d276c5593ab3b1b2939213524a071aa6df92d641fc892e9393a3c4bbf5b7ae35b6bf890707344e32ff2285184b76466685fad084625f0c9a0dc6d9f7f22c  protoc-gen-doc-1.5.1.tar.gz
"
