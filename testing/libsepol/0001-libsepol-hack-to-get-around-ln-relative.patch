From 829b7d71a496c680915672fbbf0380448fa0d033 Mon Sep 17 00:00:00 2001
From: Tycho Andersen <tycho@docker.com>
Date: Wed, 15 Mar 2017 15:54:28 -0700
Subject: [PATCH] libsepol: hack to get around ln --relative

This can't go upstream because it depends on python.

Signed-off-by: Tycho Andersen <tycho@docker.com>
---
 src/Makefile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/Makefile b/src/Makefile
index 819d261..b92ade1 100644
--- a/src/Makefile
+++ b/src/Makefile
@@ -70,7 +70,7 @@ install: all
 	install -m 755 $(LIBSO) $(SHLIBDIR)
 	test -d $(LIBDIR)/pkgconfig || install -m 755 -d $(LIBDIR)/pkgconfig
 	install -m 644 $(LIBPC) $(LIBDIR)/pkgconfig
-	ln -sf --relative $(SHLIBDIR)/$(LIBSO) $(LIBDIR)/$(TARGET)
+	ln -sf $(shell python -c "import os.path; print os.path.relpath('$(SHLIBDIR)', '$(LIBDIR)')")/$(LIBSO) $(LIBDIR)/$(TARGET)
 
 relabel:
 	/sbin/restorecon $(SHLIBDIR)/$(LIBSO)
-- 
2.11.1

