# Contributor: Jean-Louis Fuchs <ganwell@fangorn.ch>
# Maintainer: Jean-Louis Fuchs <ganwell@fangorn.ch>
pkgname=lablgtk
pkgver=2.18.5
pkgrel=0
pkgdesc="LablGtk - an OCaml interface to GTK+ 2.x"
url="http://lablgtk.forge.ocamlcore.org/"
arch="all"
license="GPL"
depends_dev="lablgtk"
depends="ocaml-findlib camlp4 ocaml gtk+-dev gtkspell-dev librsvg-dev
	gtksourceview2-dev"
makedepends="$depends"
install=""
subpackages="$pkgname-doc $pkgname-dev"
source="https://forge.ocamlcore.org/frs/download.php/1627/lablgtk-$pkgver.tar.gz"
builddir="$srcdir/lablgtk-$pkgver"

build() {
	cd "$builddir"
	./configure --prefix=/usr || return 1
	make world || return 1
	make opt || return 1
	make doc || return 1
}


doc() {
    pkgdesc="$pkgdesc (documentation)"
    _docdir="$subpkgdir"/usr/share/doc/$pkgname/
    mkdir -p "$_docdir"
    cp -r "$builddir"/doc/html/* "$_docdir"
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install || return 1
	rm -f "$pkgdir"/usr/lib/ocaml/ld.conf
}

md5sums="43eb7062439f7ddd0d8ad96c3e3b87dd  lablgtk-2.18.5.tar.gz"
sha256sums="2bf251db21c077fdd26c035ea03edd8fe609187f908e520e87a8ffdd9c36d233  lablgtk-2.18.5.tar.gz"
sha512sums="7b6ba1a4dfa82cc3bbc502082ff4fccc23cc06ee4f30d01a2e423f3f99e945a4befe450d230b5aa19c5b810e9f46f2838655099d49da2db7c8a2e52eac213024  lablgtk-2.18.5.tar.gz"
