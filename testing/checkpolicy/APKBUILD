# Maintainer: Tycho Andersen <tycho@docker.com>
pkgname=checkpolicy
pkgver=2.6
pkgrel=0
pkgdesc="SELinux policy checker"
url="http://www.selinuxproject.org"
arch="all"
license="GPLv2"
depends=""
makedepends="libsepol-dev bison flex flex-dev"
install=""
subpackages="$pkgname-doc"
source="https://github.com/SELinuxProject/selinux/archive/checkpolicy-$pkgver.tar.gz
	0001-remove-apple-ifdef.patch
"
builddir="$srcdir/selinux-checkpolicy-$pkgver/checkpolicy"

build() {
	cd "$builddir"
	make || return 1
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install || return 1
}

sha512sums="24f617d1fbc17422ede258836cf7f90cf6ef1f018fe3848bcafd69a768b47e7fa2de31452f3ad76b15de4ef962b5d5c7313a42b718b9d905b096b2361f1a9b12  checkpolicy-2.6.tar.gz
20a13c1863ee6535da6fa65041e45576f8265400db4b0292e2e1a4aaa7bf6a400f8918e309867112775a449a8c931278f785218a029e3f11e2a1784a3d8fc73a  0001-remove-apple-ifdef.patch"
