# Maintainer: Andr√© Klitzing <aklitzing@gmail.com>
pkgname=clazy
pkgver=1.5
pkgrel=0
pkgdesc="Qt oriented code checker based on clang framework"
url="https://github.com/KDE/clazy"
arch="all"
license="GPLv2"
makedepends="llvm-dev clang-dev cmake"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/KDE/$pkgname/archive/v$pkgver.tar.gz"
builddir="$srcdir/"$pkgname-$pkgver

build() {
	cd "$builddir"
	mkdir -p build && cd build
	cmake -DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=Release \
		..
	make
}

check() {
	cd "$builddir/build"
	chmod 755 clazy
	chmod 755 clazy-standalone
	./clazy --version
	./clazy-standalone --version
}

package() {
	cd "$builddir/build"
	make DESTDIR="$pkgdir" install
}

sha512sums="4ce3a3226b2a73a808d16ccbbd15c92a26765df27c5732c12ee2d6abe396ec4fc9f3fcf6c9676a3edac2f3972db7a506ddece4ed347f5bddebb6d82d8980b16a  clazy-1.5.tar.gz"
