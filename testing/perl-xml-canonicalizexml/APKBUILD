# Automatically generated by apkbuild-cpan, template 2
# Contributor: Timothy Legge <timlegge@gmail.com>
# Maintainer: Timothy Legge <timlegge@gmail.com>
pkgname=perl-xml-canonicalizexml
_pkgreal=XML-CanonicalizeXML
pkgver=0.10
pkgrel=4
pkgdesc="Perl extension for inclusive (1.0 and 1.1) and exclusive canonicalization of XML using libxml2"
url="https://metacpan.org/release/XML-CanonicalizeXML/"
arch="all"
license="GPL-1.0-or-later OR Artistic-1.0-Perl"
makedepends="libxml2-dev perl-dev"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/S/SJ/SJZASADA/XML-CanonicalizeXML-$pkgver.tar.gz"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl -I. Makefile.PL INSTALLDIRS=vendor
	make
}

check() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make test
}

package() {
	make DESTDIR="$pkgdir" install
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

sha512sums="80a724b4bf11b6a69ae245f775735d286a700d4036d086cffbe47b498e486a42a68b1fc41cfa0bfdfe2c019218d4b623af321f98bdf3d9565a54443db7b2698a  XML-CanonicalizeXML-0.10.tar.gz"
