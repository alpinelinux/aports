# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Contributor: Kevin Daudt <kdaudt@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=copyq
_pkgname=CopyQ
pkgver=13.0.0
pkgrel=1
pkgdesc="Clipboard manager with searchable and editable history"
url="https://github.com/hluk/CopyQ"
arch="all !armhf"
license="GPL-3.0-or-later"
makedepends="
	cmake
	extra-cmake-modules
	kguiaddons-dev
	knotifications-dev
	kstatusnotifieritem-dev
	libxfixes-dev
	libxtst-dev
	qt6-qtbase-dev
	qt6-qtbase-private-dev
	qt6-qtdeclarative-private-dev
	qt6-qtsvg-dev
	qt6-qttools-dev
	qt6-qtwayland-dev
	samurai
	"
options="!check" # upstream does not provide check
subpackages="$pkgname-doc $pkgname-bash-completion"
source="$pkgname-$pkgver.tar.gz::https://github.com/hluk/$_pkgname/archive/v$pkgver.tar.gz
qt610.patch"
builddir="$srcdir/$_pkgname-$pkgver"

build() {
	cmake -B build -G Ninja -DWITH_PRIVATE_API=OFF \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DWITH_QT6=ON
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
0962ed9e1a53782e36b4c5156e4a89a3057ce1ff54016c27a1c353272c0493a01b7d4403ab92c09ba39f0a13963057fcb7408cd3e30f8f7d17472c4148e400e6  copyq-13.0.0.tar.gz
198e8f77ee6fcded80fa61704c64cf0600664607f93eaa4d81622dcc8c72d7efc9d7587f3d31ef6402e2e4b1e83e19e837703e92eda3758a2127d08d81c8c5a7  qt610.patch
"
