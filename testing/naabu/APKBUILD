# Contributor: Jonas <spameier+alpine@proton.me>
# Maintainer: Jonas <spameier+alpine@proton.me>
pkgname=naabu
pkgver=2.4.0
pkgrel=0
pkgdesc="Fast port scanner written in go with a focus on reliability and simplicity"
url="https://docs.projectdiscovery.io/tools/naabu"
arch="aarch64 s390x x86_64" # test only succeed on these archs
license="MIT"
makedepends="go libpcap-dev"
subpackages="$pkgname-doc"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/projectdiscovery/naabu/archive/refs/tags/v$pkgver.tar.gz
	10-set-GOFLAGS.patch
	"
options="net !check" # go dependencies, bogus host discovery

build() {
	make build
}

check() {
	make test
}

package() {
	install -Dm755 "$builddir/naabu" -t "$pkgdir/usr/bin/"
	install -Dm644 LICENSE.md "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

sha512sums="
f10719ae0bfb63eaeb899068785fa38cb31213f69ede4e6fd7fb71b942699bf9c1ca7fbc6d9d8a5e2c65d730fa81433796750848b0f913a1344a6f838263399d  naabu-2.4.0.tar.gz
131db3140c201a5c92ffa607e1e43e078653680345e23ec986ad416315ec2b253933333e8ae7722ed6b2ec26c81a7f1d18c2e71456d64fd65eaa532917af0a47  10-set-GOFLAGS.patch
"
