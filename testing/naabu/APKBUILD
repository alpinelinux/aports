# Contributor: Jonas <spameier+alpine@proton.me>
# Maintainer: Jonas <spameier+alpine@proton.me>
pkgname=naabu
pkgver=2.3.6
pkgrel=0
pkgdesc="Fast port scanner written in go with a focus on reliability and simplicity"
url="https://docs.projectdiscovery.io/tools/naabu"
arch="aarch64 s390x x86_64" # test only succeed on these archs
license="MIT"
makedepends="go libpcap-dev"
subpackages="$pkgname-doc"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/projectdiscovery/naabu/archive/refs/tags/v$pkgver.tar.gz
	10-set-GOFLAGS.patch
	"
options="net !check" # go dependencies, bogus host discovery

build() {
	make build
}

check() {
	make test
}

package() {
	install -Dm755 "$builddir/naabu" -t "$pkgdir/usr/bin/"
	install -Dm644 LICENSE.md "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

sha512sums="
f4da5472716cef7b4385beaf02e0133c4d81953ba17275a62da53c9f5b940674ced3818bd79b7506324abe31478dd1647fa16e27834f08fd52b31bcfaa792080  naabu-2.3.6.tar.gz
d4fef15d8ac731d2b0c7796527ace43f34bb15f1dfaa107e078f6a8074fcd3bf2e831e9610280215a3bfe8bfb7846a056655d4be157a4d41e9b4af2c9d564d53  10-set-GOFLAGS.patch
"
