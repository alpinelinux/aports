# Contributor: Jonas <spameier+alpine@proton.me>
# Maintainer: Jonas <spameier+alpine@proton.me>
pkgname=naabu
pkgver=2.3.7
pkgrel=1
pkgdesc="Fast port scanner written in go with a focus on reliability and simplicity"
url="https://docs.projectdiscovery.io/tools/naabu"
arch="aarch64 s390x x86_64" # test only succeed on these archs
license="MIT"
makedepends="go libpcap-dev"
subpackages="$pkgname-doc"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/projectdiscovery/naabu/archive/refs/tags/v$pkgver.tar.gz
	10-set-GOFLAGS.patch
	"
options="net !check" # go dependencies, bogus host discovery

build() {
	make build
}

check() {
	make test
}

package() {
	install -Dm755 "$builddir/naabu" -t "$pkgdir/usr/bin/"
	install -Dm644 LICENSE.md "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

sha512sums="
f479328a1853eb4d4e592bcb114d61d627ae9e86d4a41a62b508fbb5587590b89d027de02ff9814807bd6b3f5ed62a6b8a0f08ffab8cad3c1d238ab211d3b460  naabu-2.3.7.tar.gz
131db3140c201a5c92ffa607e1e43e078653680345e23ec986ad416315ec2b253933333e8ae7722ed6b2ec26c81a7f1d18c2e71456d64fd65eaa532917af0a47  10-set-GOFLAGS.patch
"
