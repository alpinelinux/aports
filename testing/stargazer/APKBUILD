# Contributor: Alexander Georgievskiy <galeksandrp@gmail.com>
# Maintainer:
pkgname=stargazer
_pkgname=stg
pkgver=2.408
pkgrel=0
pkgdesc="A billing system for small home and office networks"
url="http://www.$_pkgname.dp.ua"
arch="all"
license="GPL2+"
depends=""
makedepends="expat-dev linux-headers"
install=""
subpackages="$pkgname-dev"
source="http://www.$_pkgname.dp.ua/download/server/$pkgver/$_pkgname-$pkgver.tar.gz"
builddir="$srcdir/$_pkgname-$pkgver/projects/$pkgname"
options="!check"

prepare() {
	default_prepare || return 1

	cd "$builddir"

	sed 's/.*capture\/ipq_linux//' -i build
}

build() {
	cd "$builddir"

	./build || return 1
}

package() {
	cd "$builddir"
	
	mkdir -p "$pkgdir/usr/sbin"

	make PREFIX="$pkgdir" install
}
md5sums="755d35cc9bfbcf6374b5e2a73638b8f0  stg-2.408.tar.gz"
sha256sums="f2de88cba1a07b10dba266df262ba719cdeb8efc169ce52711519d81b3c36fc1  stg-2.408.tar.gz"
sha512sums="200e08cfd629dbacda31ffd3134c2908a1ad58604421cc288ad0ec1bdcd60fe021d51fed50fdc2517bb7c2b61ef23b0b9c71a606babd09bc7804cb899e0b7f75  stg-2.408.tar.gz"
