# Maintainer: George Hopkins <george-hopkins@null.net>
pkgname=mongrel2
pkgver=1.11.0
pkgrel=0
pkgdesc="Language agnostic web server"
url="http://mongrel2.org/"
arch="all"
license="BSD-3-Clause"
depends=""
makedepends="libucontext-dev sqlite sqlite-dev zeromq-dev"
install=""
subpackages=""
source="https://github.com/mongrel2/mongrel2/releases/download/v$pkgver/$pkgname-v$pkgver.tar.bz2"
builddir="$srcdir/$pkgname-v$pkgver"

build() {
	cd "$builddir"
	make OPTLIBS="-lucontext"
}

check() {
	cd "$builddir"
	make tests
}

package() {
	cd "$builddir"
	make PREFIX=/usr DESTDIR="$pkgdir" install
}

sha512sums="488a8e4f48823a4d8c385033ad59c6197d04040d850821afa11c2f31e23c8ea473453c1459168e83636004d9885bbf107fca031f51dda88156d1cac721c614d0  mongrel2-v1.11.0.tar.bz2"
