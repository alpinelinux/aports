# Maintainer: Olivia Thiderman <olivia@thiderman.org>
maintainer="Olivia Thiderman <olivia@thiderman.org>"
pkgname=catppuccin-whiskers
pkgver=2.5.1
pkgrel=0
pkgdesc="Catppuccin theme port creation tool"
url="https://whiskers.catppuccin.com/"
# Build does not work on riscv64
arch="all !riscv64"
license="MIT"
subpackages="$pkgname-doc"
makedepends="
	cargo
	cargo-auditable
	"
source="https://github.com/catppuccin/whiskers/archive/v$pkgver/whiskers-v$pkgver.tar.gz"
builddir="$srcdir"/whiskers-$pkgver

prepare() {
	default_prepare

	cargo fetch --target="$CTARGET" --locked
}

build() {
	cargo auditable build --frozen --release
}

check() {
	cargo test --frozen
}

package() {
	install -Dm755 target/release/whiskers -t "$pkgdir"/usr/bin/
	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}
sha512sums="
a40b077282a0c7df64f862b1ed0ad6e1ba41bf413504114daf7efedda593a7e3e10b8119f0c03777b9019b62e9831dfd9b148c7d0901f4b8b0afa1f1d212360b  whiskers-v2.5.1.tar.gz
"
