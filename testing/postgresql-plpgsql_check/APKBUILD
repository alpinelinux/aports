# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=postgresql-plpgsql_check
_pkgname=plpgsql_check
pkgver=1.2.1
pkgrel=0
pkgdesc="Additional tools for plpgsql functions validation"
url="https://github.com/okbob/plpgsql_check"
arch="all"
license="BSD"
depends="postgresql"
makedepends="postgresql-dev"
source="$_pkgname-$pkgver.tar.gz::https://github.com/okbob/$_pkgname/archive/v$pkgver.tar.gz"
builddir="$srcdir/$_pkgname-$pkgver"
options="!check"  # XXX: installcheck requires running PostgreSQL

build() {
	cd "$builddir"
	make USE_PGXS=1 all
}

package() {
	cd "$builddir"
	make USE_PGXS=1 DESTDIR="$pkgdir" install
}

sha512sums="bf41a9e89b387d172780264707a5e33d30ffecda76ed29d7077c477f3c70a554a86e41a8fb8f9accb773e6e1d4f0e5744b6d012db00cf2e20ded2b350ec5121d  plpgsql_check-1.2.1.tar.gz"
