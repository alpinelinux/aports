# Contributor: Sören Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Sören Tempel <soeren+alpine@soeren-tempel.net>
pkgname=android-tools
pkgver=9.0.0_p3
_realver=${pkgver/_p/_r}
pkgrel=1
pkgdesc="Android platform tools"
url="https://sites.google.com/a/android.com/tools/"
arch="x86 x86_64 armhf aarch64"
license="Apache-2.0 MIT"
depends=""
depends_dev=""
options="!check" # upstream doesn't have a test suite
makedepends="pcre2-dev linux-headers libusb-dev gtest-dev go perl cmake"
source="https://github.com/nmeum/$pkgname/releases/download/$_realver/$pkgname-$_realver.tar.xz
	0001-suppress-warnings-to-allow-building-for-armhf-and-aarch64.patch"
builddir="$srcdir/$pkgname-$_realver"

build() {
	cd "$builddir"

	mkdir build && cd build
	cmake \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_CXX_FLAGS="$CXXFLAGS" \
		-DCMAKE_C_FLAGS="$CFLAGS" \
		..
	make
}

package() {
	cd "$builddir/build"
	make DESTDIR="$pkgdir" install
}

sha512sums="6e4e3064ba667cc5511b0819206348164f64a7127eef8c21198d434032e4a2342794581c043c2754584055f3e09a70ee81a495915e42d26e3076c6349e71fe23  android-tools-9.0.0_r3.tar.xz
64d385c4aebe1a778f12c87bcfa68277b5c66e60de27256ff505382e984b284e7a05254995b84bf98c42f70f372de63d52888adee4a35440ae5a1b6eb2ab4c3c  0001-suppress-warnings-to-allow-building-for-armhf-and-aarch64.patch"
