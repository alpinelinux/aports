# Maintainer: DÃ­az Urbaneja Diego <sodomon2@gmail.com>
pkgname=ioquake
pkgver=1.36
pkgrel=0
pkgdesc="The de-facto OSS Quake 3 distribution. You need the .pk3 files to play."
url="http://ioquake3.org/"
arch="x86_64 x86"
license="GPL"
depends="sdl mesa openal-soft"
makedepends="sdl-dev mesa-dev openal-soft-dev nasm"
options="!check"
source="$pkgname-$pkgver.zip::https://github.com/ioquake/ioq3/archive/master.zip
 ioquake3.desktop
 quake3.png
 ioquake3"
builddir="$srcdir/ioq3-master"

build() {
cd "$builddir"
  make
}

package() {
cd "$builddir"
    mkdir -p $pkgdir/usr/bin
    cp -Rp "$srcdir"/ioquake3 "$pkgdir"/usr/bin/ioquake3
    
    mkdir -p $pkgdir/usr/share/ioquake3
    cp -Rp build/release-linux-x86_64/ioquake3.x86_64 "$pkgdir"/usr/share/ioquake3/ioquake3.x86_64
    cp -Rp build/release-linux-x86_64/renderer_opengl1_x86_64.so "$pkgdir"/usr/share/ioquake3/renderer_opengl1_x86_64.so
    cp -Rp build/release-linux-x86_64/renderer_opengl2_x86_64.so "$pkgdir"/usr/share/ioquake3/renderer_opengl2_x86_64.so
    
    mkdir -p $pkgdir/usr/share/applications
    install -Dm644 "$srcdir"/ioquake3.desktop "$pkgdir"/usr/share/applications/ioquake3.desktop 
    
    mkdir -p $pkgdir/usr/share/pixmaps
    mv "$srcdir"/quake3.png "$pkgdir"/usr/share/pixmaps/quake3.png
}

sha512sums="d89cd391c39490f7ae1f9db993dbec3e9d0b9833c85ce0500f1cb6f0aee79927994f22cb5941e0d51a62ff6aa703768dc60b42d6f2330fab14227d9e5b8a5f67  ioquake-1.36.zip
e4ed42c8108d017422734ea4079884925e985bf2642c3934bcf5e8dcd4a965c2dff07a7fe787f707056e00fc7f1ca037fce495df3ef296e864eee7adcea9344a  ioquake3.desktop
70c5725fe1ff673506057937d60ac45873087ad8b326758a977376b6286c9d61de68a146a88ecb29ee1346c002a338573760490030e53736c93bdc971dc070b5  quake3.png
0d20f1476ce1c08df6c1002ec75bba875f33273f5087d0aa661489555a691a86306a9041b18f6c2675a3ddfd32fc17331f56185fea094d93ff01b6f0333cc51b  ioquake3"
