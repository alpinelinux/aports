# Contributor: Dmitry Romanenko <dmitry@romanenko.in>
# Maintainer: Dmitry Romanenko <dmitry@romanenko.in>
pkgname=gometalinter
pkgver=2.0.12
pkgrel=0
pkgdesc="Concurrently run Go lint tools and normalise their output"
url="https://github.com/alecthomas/gometalinter"
arch="all"
license="MIT"
makedepends="gcc musl-dev go"
depends=""
source="$pkgname-$pkgver.tar.gz::https://github.com/alecthomas/gometalinter/archive/v$pkgver.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	export GOPATH="$startdir"
	go build -v
	#$builddir/gometalinter-$pkgver --install # Broken
}

check() {
	cd "$builddir"
	export GOPATH="$startdir"
	go get -t -v . ./regressiontests
	go test -v . ./regressiontests
}

package() {
	install -Dm755 "$builddir"/gometalinter-$pkgver "$pkgdir"/usr/bin/gometalinter
}

sha512sums="82f6b85f00f26c2f7811629b4f2215f32b521b8062fed382b9499f9591eaf2630332168e58f465268f6080f87fa2a434cdefceb0cd750d7e852e3d1c1ea89945  gometalinter-2.0.12.tar.gz"
