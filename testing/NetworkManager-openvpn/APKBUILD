# Maintainer: Colin Reeder <colin@vpzom.click>
pkgname=NetworkManager-openvpn
pkgver=1.8.8
pkgrel=0
pkgdesc="OpenVPN support for NetworkManager"
url="https://gitlab.gnome.org/GNOME/NetworkManager-openvpn"
arch="all"
license="GPL-2.0+"
depends="libintl glib gtk+3.0 network-manager-applet libsecret networkmanager"
depends_dev="gettext-dev glib-dev gtk+3.0-dev network-manager-applet-dev libsecret-dev networkmanager-dev"
makedepends="$depends_dev intltool perl pkgconf"
install=""
subpackages="$pkgname-dev $pkgname-lang"
source="https://download.gnome.org/sources/NetworkManager-openvpn/1.8/NetworkManager-openvpn-$pkgver.tar.xz"
sha512sums="8ed7612bcf727b540a74807ccc7ea7460dba3923a052e8716338bf2c852b6c027fd7547793af1b032a3c2348f9ffc579d1071aad2833baa37784bb5a17af1574  NetworkManager-openvpn-1.8.8.tar.xz"
builddir="$srcdir/NetworkManager-openvpn-$pkgver"

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

check() {
	cd "$builddir"
	make check
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

