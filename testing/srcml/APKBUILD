# Maintainer: Yijun Yu <y.yu@open.ac.uk>
pkgname=srcml
pkgver=0.9.5
pkgrel=0
pkgdesc="convert source code into XML"
url="http://www.srcml.org/"
arch="all"
license="GPL"
depends="libarchive libxml2 libxslt curl boost openssl"
depends_dev="libarchive-dev libxml2-dev libxslt-dev curl-dev boost-dev openssl-dev"
makedepends="$depends_dev cmake"
install=""
subpackages="$pkgname-dev"
source="srcML-src.tar.gz::http://131.123.42.38/lmcrs/beta/srcML-src.tar.gz
	linux.patch"
builddir="$srcdir/srcML-src"
options="!check !fhs"
build() {
	mkdir -p "$builddir"/build
	cd "$builddir"/build
        cmake .. \
                -DCMAKE_INSTALL_PREFIX=/usr \
                -DCMAKE_BUILD_TYPE=Release
	make -j 8
}

package() {
	cd "$builddir"/build
	make install DESTDIR="$pkgdir"
}

sha512sums="56ea83ab23b4aa16da6671826d0902eee4607062c75c5323e655cb80282d4b878c807446d491a9f071e9471d33c80855a1742ab3b9a0eb4c5644e04e7da1faa6  srcML-src.tar.gz
5de843e688955b496c35731f0a97b7dbcb2b936558e7ffd409b8c83c1e6fa7d2819d36a5d991e80349f1ff4fc32fa0295d12e9607e1ea7e6fcc53caa3ae786b8  linux.patch"
