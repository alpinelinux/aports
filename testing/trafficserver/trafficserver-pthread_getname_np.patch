diff --git a/src/tscore/BufferWriterFormat.cc b/src/tscore/BufferWriterFormat.cc
index d5152e6..c83c49a 100644
--- a/src/tscore/BufferWriterFormat.cc
+++ b/src/tscore/BufferWriterFormat.cc
@@ -993,13 +993,11 @@ BWF_ThreadID(ts::BufferWriter &w, ts::BWFSpec const &spec)
 void
 BWF_ThreadName(ts::BufferWriter &w, ts::BWFSpec const &spec)
 {
-#if defined(__FreeBSD_version)
-  bwformat(w, spec, "thread"sv); // no thread names in FreeBSD.
-#else
-  char name[32]; // manual says at least 16, bump that up a bit.
+  char name[32] = "thread"; // manual says at least 16, bump that up a bit.
+#if defined(HAVE_PTHREAD_GETNAME_NP)
   pthread_getname_np(pthread_self(), name, sizeof(name));
-  bwformat(w, spec, std::string_view{name});
 #endif
+  bwformat(w, spec, std::string_view{name});
 }
 
 static bool BW_INITIALIZED __attribute__((unused)) = []() -> bool {
diff --git a/configure.ac b/configure.ac
index dc9b69e..da79663 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1141,6 +1141,7 @@ dnl specifically for pthread_yield() here. In addition, ASAN hijacks pthread_cre
 dnl we can't use that anymore.
 AC_SEARCH_LIBS([pthread_yield], [pthread], [], [])
 AC_CHECK_FUNCS([pthread_mutexattr_settype])
+AC_CHECK_FUNCS([pthread_getname_np])
 
 dnl XXX The following check incorrectly causes the build to succeed
 dnl on Darwin. We should be using AC_SEARCH_LIBS, but rest_init is
