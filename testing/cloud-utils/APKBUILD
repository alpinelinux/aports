# Contributor: "Vladimir Avinkin <mouzfun@gmail.com>"
# Maintainer: "Vladimir Avinkin <mouzfun@gmail.com>"
pkgname=cloud-utils
pkgver=0.30
pkgrel=0
pkgdesc="This package provides a useful set of utilities for interacting with a cloud"
url="https://launchpad.net/cloud-utils/"
arch="noarch"
license="GPL-3.0"
depends="bash python3 sfdisk sgdisk util-linux qemu-img mtools cdrkit coreutils"
install=""
subpackages="$pkgname-doc"
source="https://launchpad.net/$pkgname/trunk/0.3/+download/$pkgname-$pkgver.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	make
}

check() {
	cd "$builddir"
        # the other tests require root permissions
        PATH=$PATH:$builddir/bin TMPDIR="$srcdir" ./test/test-growpart-fsimage
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="62274b80ada530e5cac32b34e9f9cd4994bf81b336da039f10035beeae6a01f11aaa24fd2ba436001844fca7542cce2527711c8ae87a5b53f4cab505dcb07f28  cloud-utils-0.30.tar.gz"
