# Contributor: Carlo Landmeter <clandmeter@gmail.com>
# Maintainer:
pkgname=lxcfs
pkgver=2.0.3
pkgrel=0
pkgdesc="FUSE filesystem for LXC"
url="https://linuxcontainers.org/lxcfs"
arch="all"
license="Apache 2.0"
depends=""
makedepends="fuse-dev linux-pam-dev linux-headers"
install=""
subpackages="$pkgname-dev $pkgname-pam"
source="https://linuxcontainers.org/downloads/lxcfs/lxcfs-$pkgver.tar.gz"
builddir="$srcdir/lxcfs-$pkgver"

build() {
	cd "$builddir"
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info || return 1
        make || return 1
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install || return 1
}

pam() {
	pkgdesc="$pkgdesc (pam plugin)"
	mkdir -p "$subpkgdir"/lib
	mv "$pkgdir"/lib/security "$subpkgdir"/lib/ || return 1
}

md5sums="8d79c575d0dc5d127776370eceb0f58b  lxcfs-2.0.3.tar.gz"
sha256sums="dd94e19bff202cb9fe2aa7d244b2cccf53cf5d7f6dd76c815e1161e3ba4ce0df  lxcfs-2.0.3.tar.gz"
sha512sums="1bca2dc88a4551c90e9760ad8d3c7548126d7803040ddab3ac24fda2d602ec0d34ebf78bbd2b4cd5941edba3ccfe135e86d257f0dc2b89617c7ca876b3dda4bb  lxcfs-2.0.3.tar.gz"
