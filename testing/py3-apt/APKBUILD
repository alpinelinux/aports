# Maintainer: qaqland <qaq@qaq.land>
pkgname=py3-apt
pkgver=3.1.0
pkgrel=0
pkgdesc="a wrapper to use features of apt from python"
url="https://tracker.debian.org/pkg/python-apt"
arch="all"
license="GPL-2.0-or-later"
depends="
	apt
	dpkg-dev
	"
makedepends="
	apt-dev
	intltool
	musl-libintl
	py3-distutils-extra
	py3-setuptools
	python3-dev
	"
subpackages="$pkgname-pyc $pkgname-lang"
source="https://salsa.debian.org/apt-team/python-apt/-/archive/$pkgver/python-apt-$pkgver.tar.gz "
builddir="$srcdir/python-apt-$pkgver"
options="!check" # test needs debian

# secfixes:
#   3.1.0-r0:
#     - CVE-2025-6966

build() {
	python3 setup.py config
	python3 setup.py build
}

package() {
	python3 setup.py install --root "$pkgdir"

	rm -r "$pkgdir"/usr/share/python-apt
}

sha512sums="
f76d625b422069889f932b9353f2a536d36fb14fd83a73dc2923a78f39936f47e347cf1ea456c64137079ea990a13655248fc780beac93629c1b1999721f492f  python-apt-3.1.0.tar.gz
"
