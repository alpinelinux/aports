From b05a28f5bdd13a6a3b3b8465cdc5195567ed909a Mon Sep 17 00:00:00 2001
From: LN Liberda <lauren@selfisekai.rocks>
Date: Wed, 21 Jan 2026 20:55:45 +0100
Subject: [PATCH] Fix native.js

---
 native.js | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/native.js b/native.js
index e49848245..8a37f19f4 100644
--- a/native.js
+++ b/native.js
@@ -34,10 +34,11 @@ const bindingsByPlatformAndArch = {
 	linux: {
 		arm: { base: 'linux-arm-gnueabihf', musl: 'linux-arm-musleabihf' },
 		arm64: { base: 'linux-arm64-gnu', musl: 'linux-arm64-musl' },
+		ia32: { musl: 'linux-i586-musl' },
 		loong64: { base: 'linux-loong64-gnu', musl: 'linux-loong64-musl' },
 		ppc64: { base: 'linux-ppc64-gnu', musl: 'linux-ppc64-musl' },
 		riscv64: { base: 'linux-riscv64-gnu', musl: 'linux-riscv64-musl' },
-		s390x: { base: 'linux-s390x-gnu', musl: null },
+		s390x: { base: 'linux-s390x-gnu', musl: 'linux-s390x-musl' },
 		x64: { base: 'linux-x64-gnu', musl: 'linux-x64-musl' }
 	},
 	openbsd: {
@@ -93,7 +94,7 @@ const requireWithFriendlyError = id => {
 };
 
 const { parse, parseAsync, xxhashBase64Url, xxhashBase36, xxhashBase16 } = requireWithFriendlyError(
-	existsSync(path.join(__dirname, localName)) ? localName : `@rollup/rollup-${packageBase}`
+	existsSync(path.join(__dirname, localName)) ? localName : '.' + localName
 );
 
 function getPackageBase() {
