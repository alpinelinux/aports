# Maintainer: qaqland <qaq@qaq.land>
pkgname=microsocks
pkgver=1.0.5
pkgrel=0
pkgdesc="multithreaded, small, efficient SOCKS5 server"
url="https://github.com/rofl0r/microsocks"
arch="all"
license="MIT"
subpackages="$pkgname-doc $pkgname-openrc"
source="https://github.com/rofl0r/microsocks/archive/v$pkgver/microsocks-$pkgver.tar.gz
	microsocks.initd
	microsocks.confd
	"
options="!check" # upstream has no testsuit

build() {
	make all
}

package() {
	make DESTDIR="$pkgdir" prefix=/usr install

	install -Dm644 README.md -t "$pkgdir"/usr/share/doc/$pkgname
	install -Dm644 COPYING -t "$pkgdir"/usr/share/licenses/$pkgname

	install -m755 -D "$srcdir"/microsocks.initd "$pkgdir"/etc/init.d/$pkgname
	install -m644 -D "$srcdir"/microsocks.confd "$pkgdir"/etc/conf.d/$pkgname

}


sha512sums="
1180e007f586108b299f4861e8bf94e06a35fa986af90ce66844ef002c06557803825a1b5e73d08bd7a5463337d6bfe0c913bc69b3342e3932b582f05b522ab2  microsocks-1.0.5.tar.gz
940e36414ecb514ae73858c1d3890fe21b291ecbeca86ee283df85e6d6629d710689399856df4ec4848a4400759d1fc1d3c9ca8abda3c4bfcf31d13000aa17f9  microsocks.initd
b5c41442ccf45f2ee6def9a09d753a4ff1620bd8e312d324bee4f6f09ea492249717fc47a950f6f4bc84bab0c72471caa47b78ca3cc8744fd763d71e825e3b57  microsocks.confd
"
