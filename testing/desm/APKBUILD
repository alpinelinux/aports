# Maintainer: DÃ­az Urbaneja Diego <sodomon2@gmail.com>
pkgname=desm
pkgver=9.12
pkgrel=0
pkgdesc="A Nintendo DS Emulator"
url="https://github.com/boomba300/desm"
arch="x86_64"
license="GPL2"
depends="alsa-lib glu sdl gtk+2.0 libpcap"
makedepends="mesa alsa-lib-dev glu-dev sdl-dev libpcap-dev"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.zip::https://github.com/boomba300/$pkgname/archive/master.zip"
builddir="$srcdir/$pkgname-master/desmume/src/frontend/posix"

prepare() {
	default_prepare
	cd "$builddir"
	./autogen.sh
}

build() {
	cd "$builddir" 
  ./configure \
    --enable-wifi \
    --enable-glx \
    --prefix=/usr 
  make
}

check() {
	cd "$builddir"
  make check
}

package() {
	cd "$builddir"
  make DESTDIR="$pkgdir" install
}

sha512sums="d3cf088acd5f0b17b7927a541a6e0104418100acd409cc4f10df2381b2d3909e6b5f2e179dc8036b6cfda45ef0e69ffbdd022e22845e9bfb27df6d8a4f5f93f9  desm-9.12.zip"
