# Contributor: Michael Pirogov <vbnet.ru@gmail.com>
# Maintainer: Michael Pirogov <vbnet.ru@gmail.com>
pkgname="ssh-honeypot"
pkgver="0.1.0"
_commit=b7baa9a6963e723ee0779a6cef0447739870ace3
pkgrel=0
pkgdesc="Fake sshd that logs ip addresses, usernames, and passwords."
url="https://github.com/droberson/ssh-honeypot"
arch="all"
license="MIT"
depends="openssh-keygen"
makedepends="clang json-c0.12-dev libssh-dev"
options="!check"
subpackages="$pkgname-openrc"
source="$pkgname-$pkgver.zip::https://github.com/droberson/ssh-honeypot/archive/$_commit.zip
	$pkgname.initd
	$pkgname.confd"
builddir="$srcdir/$pkgname-$_commit"


package() {
	mkdir -p $pkgdir/usr/bin/ $pkgdir/usr/share/ssh-honeypot
	make PREFIX=/usr DESTDIR="$pkgdir" -C "$builddir"
	install -m 755 -D bin/$pkgname $pkgdir/usr/bin/$pkgname
	install -m 755 -D "$srcdir"/$pkgname.initd $pkgdir/etc/init.d/$pkgname
	install -m 644 -D "$srcdir"/$pkgname.confd $pkgdir/etc/conf.d/$pkgname
}


sha512sums="67edfac31421bb8ecbbff08b9dcc3169372da59f4dd83a21149af666b98c42c3a924f8dd6a5091d5928a258915c1f6a7611dbef872432e793fc42e786fd30201  ssh-honeypot-0.1.0.zip
d425aa4cb4a0235d50404af7d478c0bc54971e29236ae77140c14fc41b5b1047401fb3ed92df2965186a6c9bfa32e82680d0b977d50875d9dc1e61c17c208ac5  ssh-honeypot.initd
e93b93117afa5f5ad93bce12e5846718bb25d24ace47bbcee1bbb72af51b0cc9fc7558a5650e4778330e5ad22d1807183ebc93101e7e16dfc6f7e391ba4aca6d  ssh-honeypot.confd"
