# Contributor: Leonardo Arena <rnalrd@alpinelinux.org>
# Maintainer: Simon Frankenberger <simon-alpine@fraho.eu>
pkgname=ophcrack
pkgver=3.8.0
pkgrel=0
pkgdesc="Windows password cracker based on rainbow tables"
url="http://ophcrack.sourceforge.net/"
arch="all"
license="GPL"
makedepends="$depends_dev expat-dev openssl-dev qt5-qtbase-dev qt5-qtcharts-dev"
source="https://downloads.sourceforge.net/project/ophcrack/ophcrack/$pkgver/ophcrack-$pkgver.tar.bz2"
#options="!check"

builddir="$srcdir"/$pkgname-$pkgver

prepare() {
	cd "$builddir"
	update_config_sub
}

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--target=$CTARGET \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info
	make
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="c66276b72299744d3e0c9fc14220c7f568e383bd324c1ede228bda5d51da78db817388421c9f5f8cd2f18687e7e53cfb0c65bcc0354b3d55ac16324c61f62dbd  ophcrack-3.8.0.tar.bz2"
