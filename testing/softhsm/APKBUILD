# Contributor: Frank Felhoffer <silveraid@hackme.ca>
# Maintainer: Frank Felhoffer <silveraid@hackme.ca>
pkgname=softhsm
pkgver=2.3.0
pkgrel=0
pkgdesc="cryptographic store accessible through a PKCS #11"
url="http://www.softhsm.org/"
arch="all"
license="BSD2"
depends="openssl"
makedepends="openssl-dev automake autoconf libtool file"
install=""
subpackages="$pkgname-doc"
source="softhsm-$pkgver.tar.gz::https://github.com/opendnssec/SoftHSMv2/archive/$pkgver.tar.gz"
builddir="$srcdir/SoftHSMv2-2.3.0"

prepare() {
        cd "$builddir"
        sh autogen.sh || return 1
}

build() {
        cd "$builddir"
        ./configure \
                --prefix=/usr \
                --sysconfdir=/etc \
                --localstatedir=/var \
                || return 1
        make -j8 || return 1
}

package() {
        cd "$builddir"
        make -j1 DESTDIR="$pkgdir/" install
}

sha512sums="d5b09a3e28f9cb441a9c74fdd0253466462c480165c1f0def263e48751ec978f82d621c51cfca54ba926ad32a5b33cfd3baba4386338352b54ecc66e9ea052cf  softhsm-2.3.0.tar.gz"

