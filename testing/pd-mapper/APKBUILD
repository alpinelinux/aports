maintainer="Luca Weiss <luca@lucaweiss.eu>"
pkgname=pd-mapper
pkgver=1.1
pkgrel=0
pkgdesc="Qualcomm Protection domain mapper"
url="https://github.com/linux-msm/pd-mapper"
arch="all"
license="BSD-3-Clause"
makedepends="
	qrtr-dev
	xz-dev
	"
source="https://github.com/linux-msm/pd-mapper/archive/v$pkgver/pd-mapper-v$pkgver.tar.gz
	pd-mapper.initd
	"
subpackages="$pkgname-doc $pkgname-openrc $pkgname-systemd"
options="!check" # No test suite

build() {
	make prefix="/usr"
}

package() {
	make prefix="/usr" DESTDIR="$pkgdir" install

	install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
	install -Dm755 "$srcdir"/pd-mapper.initd "$pkgdir"/etc/init.d/pd-mapper
}

sha512sums="
d870933f1000adf6701d5dde29bc528aa9a60686179cf696322bf0663833c5ed7a085882c79aa8cd4231baba3906299da1c0160c118c163ea4b2954a0e19e9cc  pd-mapper-v1.1.tar.gz
67aaec50737782c68e2e639b9dfb5b4803850b50c4260983975ac466b4b59d775e57542eccac1af5fffddeed8403f7b991194544c96b7c4aba7b0c1a666eb262  pd-mapper.initd
"
