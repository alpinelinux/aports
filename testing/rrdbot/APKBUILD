# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=rrdbot
pkgver=0.9.7
pkgrel=2
pkgdesc="An SNMP polling daemon which writes the polled values to an RRD database"
url="http://thewalter.net/stef/software/rrdbot/"
arch="all"
license="BSD"
depends=""
makedepends="rrdtool-dev"
install="$pkgname.pre-install $pkgname.post-install"
subpackages="$pkgname-doc"
source="http://thewalter.net/stef/software/rrdbot/rrdbot-$pkgver.tar.gz
	rrdbotd.initd
	rrdbotd.confd
	"

# append extra dependencies to -dev subpackage
# remove if not used.
# depends_dev="somepackage-dev"

builddir="$srcdir"/$pkgname-$pkgver

prepare() {
	default_prepare || return 1
	update_config_guess || return 1
}

build() {
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		|| return 1
	make || return 1
}

package() {
	make DESTDIR="$pkgdir" install || return 1
	install -m755 -D "$srcdir"/rrdbotd.initd \
		"$pkgdir"/etc/init.d/rrdbotd || return 1
	install -m644 -D "$srcdir"/rrdbotd.confd \
		"$pkgdir"/etc/conf.d/rrdbotd || return 1
}

sha512sums="a694cd84eaa344297bd89ee70ab18cc5710a6e1f9e134bfcc175a0f196ccfb957027c54730b756a8336dc9eda2fc777a0c2094449361b08f71f52b8b384b8744  rrdbot-0.9.7.tar.gz
7c5b2df322a30f12ce482defaedc6f404bd27c3b849eda6ce2d31ccd5139087262aa5b9ff35ac5226a9fc2a0cd52d250f81afad8d23142a005c87c819d9ab04a  rrdbotd.initd
f11f0d192cd7823307c2ce4ddc7b3fff5190f72d3f65a5524b487021a95a222aca1fd36ab1eb58ed533e7acd555bfb70f0c8a13db20338ea31527f3151fd2bd7  rrdbotd.confd"
