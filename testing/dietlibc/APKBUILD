# Contributor: Sören Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Sören Tempel <soeren+alpine@soeren-tempel.net>
pkgname=dietlibc
pkgver=0.33
pkgrel=3
pkgdesc="a libc optimized for small size"
url="https://www.fefe.de/dietlibc/"
arch=""
license="GPL"
depends="dietlibc-dev"
depends_dev=""
makedepends=""
install=""
subpackages="$pkgname-dev $pkgname-doc"
source="https://www.fefe.de/$pkgname/$pkgname-$pkgver.tar.bz2"

builddir="$srcdir"/$pkgname-$pkgver
build() {
	make prefix=/usr/$pkgname \
		-C "$builddir"
}

package() {
	make prefix=/usr/$pkgname DESTDIR="$pkgdir" \
		BINDIR=/usr/bin MAN1DIR=/usr/share/man/man1 \
		-C "$builddir" install

	local file
	for file in AUTHOR BUGS CAVEAT CHANGES COPYING FAQ PORTING \
			README README.security SECURITY THANKS TODO; do
		install -Dm644 "$builddir"/$file \
			"$pkgdir"/usr/share/doc/$pkgname/$file
	done
}

sha512sums="3e4cc8d9987a497adb2f777cbd578aa46a44f786a6ed86b0e2489d1f72ffd915920828b3dfb46d62d25f4b6a1cc2cbf7cc806ca0fe56ebc1af49152f5d4950a3  dietlibc-0.33.tar.bz2"
