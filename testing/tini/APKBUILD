# Maintainer: Danilo BÃ¼rger <danilo@feastr.de>

pkgname=tini
pkgver=0.8.3
pkgrel=0
pkgdesc="A tiny but valid init for containers"
url="https://github.com/krallin/tini"
arch="all"
license="MIT"
depends=""
depends_dev=""
makedepends="$depends_dev cmake"
install=""
subpackages=""
source="$pkgname-$pkgver.tar.gz::https://github.com/krallin/tini/archive/v$pkgver.tar.gz"

_builddir="$srcdir"/$pkgname-$pkgver

build() {
    cd "$_builddir"
    export CFLAGS="-DPR_SET_CHILD_SUBREAPER=36 -DPR_GET_CHILD_SUBREAPER=37"
    cmake . || return 1
    make || return 1
}

package() {
    cd "$_builddir"
    install -D -m755 tini "$pkgdir"/usr/bin/tini || return 1
}

md5sums="26c93a9126dba7fd177515917c84a677  tini-0.8.3.tar.gz"
sha256sums="eaf664bbfab2ff45d0e077d5e261f4fc772deed28ac0da6211dbb39c1991f9f0  tini-0.8.3.tar.gz"
sha512sums="d4c5b7b0f1cbb3fa731f4e443e640a986164917b1abdf89ec40cc200a2c41b3ce10fd7528ec05936ede626bfa3dd2ac0c04c528541fe0f76ba5bf362a96c041e  tini-0.8.3.tar.gz"
