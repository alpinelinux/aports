# Contributor: Pedro Lucas Porcellis <porcellis@eletrotupi.com>
# Maintainer: Pedro Lucas Porcellis  <porcellis@eletrotupi.com>
pkgname=clapboard
pkgver=1.1.1
pkgrel=0
pkgdesc="Clapboard is a simple clipboard manager for Wayland, built in Rust"
url="https://github.com/bjesus/clapboard"
arch="all"
license="GPL-3.0-or-later"
depends="wl-clipboard"
makedepends="
	cargo
	cargo-auditable
	wayland-dev
	wayland-protocols
	"
source="$pkgname-$pkgver.tar.gz::https://github.com/bjesus/clapboard/archive/refs/tags/v$pkgver.tar.gz"

prepare() {
	default_prepare

	cargo fetch --target="$CHOST" --locked
}

build() {
	cargo auditable build \
		--frozen \
		--release
}

check() {
	cargo test \
		--frozen
}

package() {
	install -Dm755 target/release/clapboard -t "$pkgdir"/usr/bin/
}

sha512sums="
4b2f0017e0c0f64c4fb7bb8a67a56dce5a6f13c2a43f9d2c3509bdd1f5194ae82a83136a3906f9107239acf7f9fd02a31edd6c9a5d5eaa31bbd5eff2d0088a8d  clapboard-1.1.1.tar.gz
"
