# Contributor: Daniel Sabogal <dsabogalcc@gmail.com>
# Maintainer:
pkgname=global
pkgver=6.6.2
pkgrel=0
pkgdesc="A source code tag system"
url="http://www.gnu.org/software/global"
arch="all"
license="GPL"
depends=""
makedepends="libltdl perl"
subpackages="$pkgname-doc"
source="https://ftp.gnu.org/gnu/global/$pkgname-$pkgver.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	./configure \
		--prefix=/usr \
		--localstatedir=/var \
		--with-exuberant-ctags=/usr/bin/ctags \
		--disable-gtagscscope
	make
}

check() {
	cd "$builddir"
	./global/global --version
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir/" install

	install -d "$pkgdir"/usr/share/emacs/site-lisp
	install -d "$pkgdir"/usr/share/vim/vimfiles/plugin
	mv "$pkgdir"/usr/share/gtags/gtags.el "$pkgdir"/usr/share/emacs/site-lisp/gtags.el
	mv "$pkgdir"/usr/share/gtags/gtags.vim "$pkgdir"/usr/share/vim/vimfiles/plugin/gtags.vim
	mv "$pkgdir"/usr/share/gtags/gtags-cscope.vim "$pkgdir"/usr/share/vim/vimfiles/plugin/gtags-cscope.vim
}

sha512sums="5b9e77852ecafd5215f925a1b2c7d78c742f4e9329ba473196e41c29cc45af1b7e8290a62bd35c945c64b1da96f44d9e819a151ad0cb08e269ece6c5f75a1ebd  global-6.6.2.tar.gz"
