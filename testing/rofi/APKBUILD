# Contributor: Mizuki Arisu <mizukiarisu@waifu.club>
# Maintainer: Mizuki Arisu <mizukiarisu@waifu.club>
pkgname=rofi
pkgver=1.5.1
pkgrel=0
pkgdesc="A window switcher, application launcher and dmenu replacement"
url="https://github.com/DaveDavenport/rofi/"
arch="x86_64"
license="MIT"
makedepends="autoconf automake bison check-dev flex freetype git librsvg-dev libx11 libxcb libxdg-basedir libxft libxkbcommon-dev meson pango-dev startup-notification-dev xcb-util-dev xcb-util-wm xcb-util-wm-dev xcb-util-xrm xcb-util-xrm-dev"
subpackages="$pkgname-doc"
source="https://github.com/DaveDavenport/$pkgname/releases/download/$pkgver/$pkgname-$pkgver.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	autoreconf -i
	./configure \
		--prefix=/usr \
		--sysconfdir=/etc
	make
}

check() {
	cd "$builddir"
	LC_ALL=C make check
}

package() {
	cd "$builddir"
	make install install-man DESTDIR="$pkgdir"

	install -Dm644 COPYING "$pkgdir/usr/share/licenses/rofi/COPYING"
	install -dm755 "$pkgdir/usr/share/doc/rofi/examples"
	install -Dm755 Examples/*.sh "$pkgdir/usr/share/doc/rofi/examples"
}

sha512sums="c01836985f52bc79611033008b6cd23c0ce655b7af039c587870b401ca76f4e92755b69fc9167357a93b4c335bca8e10ff6fcd2d62845336f9024b409f63272f  rofi-1.5.1.tar.gz"
