# Contributor: August Klein <amatcoder@gmail.com>
# Maintainer: August Klein <amatcoder@gmail.com>
pkgname=mednafen
pkgver=0.9.38.7
pkgrel=0
pkgdesc="A command-line multi-system emulator"
url="http://mednafen.sourceforge.net"
arch="all"
license="GPL-2.0"
depends=""
makedepends="alsa-lib-dev libsndfile-dev mesa-dev glu-dev paxmark sdl-dev zlib-dev"
subpackages="$pkgname-lang"
source="http://mednafen.fobby.net/releases/files/$pkgname-$pkgver.tar.bz2
	01-fix_textrels.patch
	02-fix_x86_inline_asm.patch
	03-sdl_by_default.patch
	gcc6-fix.patch
	"

builddir="$srcdir"/$pkgname

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr
	make
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install

	rm -rf "$pkgdir"/usr/lib/charset.alias
	paxmark -m "$pkgdir"/usr/bin/mednafen
}

sha512sums="759c83928ef7a9e856dc7f546542ab1e7cbe944d0184a7693ce3b1466220233eb40c2b215100920920754eb5a93587bd8e2d8150e00ec9c93da1d518107e0d76  mednafen-0.9.38.7.tar.bz2
797a4e0d5a768a9052b226d9395d9d03d3c59a6faf67958e09169d1e603fc59f468a68e958d60661b03ff4faf0b0275d66559f517efdfd523f07eb03618cb620  01-fix_textrels.patch
424a6727117f4e0ad022b2fe2726a85c43a8a529770e74dada7e7810a6542741c0a2f7ad767e0d0471c5201c26242ab5380b7c82d25f74aa533c4508ded71811  02-fix_x86_inline_asm.patch
856d16f4c044c3787abdd3d65c6b72b6e42c88d7195f097cb6767fde6e0027d756cacc1fd54279a90a6a1bd164cecb8baaf1ff66787ca38d64bdd3eb6583738b  03-sdl_by_default.patch
9418e09053b2506401fdab8cbd18132f699cb90723551630ecdbeb0fceda4d4fc630bad659aea5f2d15ebe1268c1a52f14c2dbd68ed7a8d02d2258ee8160c517  gcc6-fix.patch"
