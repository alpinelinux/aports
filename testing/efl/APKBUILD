# Contributor: Bob Hampton <bobh@optimizations.com>
# Maintainer: Bob Hampton <bobh@optimizations.com>
pkgname=efl
pkgver=1.20.6
pkgrel=0
pkgdesc="Enlightenment Foundation Libraries"
url="https://www.enlightenment.org"
arch="x86_64"
license="BSD LGPL2.1 GPL2"
depends="bullet3"
makedepends="bullet3
doxygen openssl-dev
giflib-dev
jpeg-dev
poppler-dev
libraw-dev
libspectre-dev
tiff-dev
gstreamer-dev
gst-plugins-base-dev
lua5.2-dev
eudev-dev
dbus-dev
pulseaudio-dev
libsndfile-dev
libxcursor-dev
libxcomposite-dev
libxinerama-dev
libxrandr-dev
libxcb-dev
libxtst-dev
libxscrnsaver-dev"
install=""
subpackages="$pkgname-doc"
source="https://download.enlightenment.org/rel/libs/efl/$pkgname-$pkgver.tar.xz"
builddir="$srcdir/$pkgname-$pkgver"
options="suid"

build() {
	cd "$builddir"
	./configure --prefix=/usr --sysconfdir=/etc \
	--disable-systemd \
	--disable-cocoa \
	--disable-nls \
	--disable-cxx-bindings \
	--enable-always-build-examples \
	--disable-elua \
	--enable-lua-old \
	--with-x
	make -j12
	make doc
}

package() {
	cd "$builddir"
	make -j1 DESTDIR="$pkgdir" install
	install -Dm644 COPYING "$pkgdir"/usr/share/licenses/$pkgname/COPYING
	install -Dm644 COMPLIANCE "$pkgdir"/usr/share/licenses/$pkgname/COMPLIANCE
}

doc() {
	subpkgdir=`pwd`/pkg/"$pkgname"-doc
	_docs="AUTHORS INSTALL NEWS README"
	for _doc in $_docs; do
		install -Dm644 "$srcdir/$pkgname-$pkgver"/$_doc \
				"$subpkgdir"/usr/share/doc/"$pkgname"/$_doc
	done
	
	mkdir -p "$subpkgdir"/usr/share/doc/"$pkgname"
	cd "$subpkgdir"/usr/share/doc/"$pkgname"
	tar jxvf "$builddir"/"$pkgname-$pkgver"-doc.tar.bz2
}

sha512sums="e80c3b1d9d5a42fcdd25abec14ec3098d5b3f38b57f8abe8b05f8cfe6a13db43fb2a07ceda7d52cb3469382c2ac0edab0c9f0f12b4a94ffc27051adc0e05a160  efl-1.20.6.tar.xz"
