# Contributor: Guy Godfroy <guy.godfroy@gugod.fr>
# Maintainer: Guy Godfroy <guy.godfroy@gugod.fr>
pkgname=nitro-init
_pkgname=nitro
pkgver=0.7
pkgrel=0
pkgdesc="Tiny but flexible init system and process supervisor"
url="https://git.vuxu.org/nitro/"
arch="all"
license="0BSD"
subpackages="$pkgname-doc"
source="$_pkgname-$pkgver.tar.gz::https://git.vuxu.org/nitro/snapshot/nitro-$pkgver.tar.gz"
builddir="$srcdir/$_pkgname-$pkgver/"
checkdepends="reap ruby"

build() {
	make
}

check() {
	make check
}

package() {
	install -Dm755 nitro "$pkgdir"/usr/sbin/nitro
	install -Dm755 nitroctl "$pkgdir"/usr/bin/nitroctl
	install -Dm644 nitroctl.1 -t "$pkgdir"/usr/share/man/man1/
	install -Dm644 nitro.8 -t "$pkgdir"/usr/share/man/man8/
	install -Dm644 halt.8 -t "$pkgdir"/usr/share/man/man8/
}

sha512sums="
4c492e472c8169898da3b51bce6b79676bce67d5ba1af49d2b5e4209312c50b7f86e3acd4284c06bab0fc27a8734fe1fab45c567075ba7dac0220a818796dc6a  nitro-0.7.tar.gz
"
