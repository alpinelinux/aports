# Contributor: Guy Godfroy <guy.godfroy@gugod.fr>
# Maintainer: Guy Godfroy <guy.godfroy@gugod.fr>
pkgname=nitro-init
_pkgname=nitro
pkgver=0.7.1
pkgrel=0
pkgdesc="Tiny but flexible init system and process supervisor"
url="https://git.vuxu.org/nitro/"
arch="all"
license="0BSD"
subpackages="$pkgname-doc"
source="$_pkgname-$pkgver.tar.gz::https://git.vuxu.org/nitro/snapshot/nitro-$pkgver.tar.gz"
builddir="$srcdir/$_pkgname-$pkgver/"
checkdepends="reap ruby"

build() {
	make
}

check() {
	make check
}

package() {
	install -Dm755 nitro "$pkgdir"/usr/sbin/nitro
	install -Dm755 nitroctl "$pkgdir"/usr/bin/nitroctl
	install -Dm644 nitroctl.1 -t "$pkgdir"/usr/share/man/man1/
	install -Dm644 nitro.8 -t "$pkgdir"/usr/share/man/man8/
	install -Dm644 halt.8 -t "$pkgdir"/usr/share/man/man8/
}

sha512sums="
761d64dffdc15d9329d0f7093fbe05a523601e2da4f5a64294146ce7bb4888ae80f4a7d77184d37093dad6e1153aeabf077ac36f23817567476ff95e5e4cebb5  nitro-0.7.1.tar.gz
"
