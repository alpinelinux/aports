# Contributor: Jonathan Neuschäfer <j.neuschaefer@gmx.net>
# Maintainer: Jonathan Neuschäfer <j.neuschaefer@gmx.net>
pkgname=codespell
pkgver=1.12.0
pkgrel=0
pkgdesc="Check code for common misspellings"
url="https://github.com/lucasdemarchi/codespell"
arch="noarch"
license="GPL-2.0-only"
depends="python3 py3-chardet py3-setuptools"
makedepends="python3-dev py3-nose py3-setuptools help2man"
install=""
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/lucasdemarchi/$pkgname/archive/v$pkgver.tar.gz
        0001-disable-run-test.patch"

build() {
	cd "$builddir"
	python3 setup.py build
	make
}

check() {
	cd "$builddir"
	nosetests
}

package() {
	cd "$builddir"
	python3 setup.py install --prefix=/usr --root="$pkgdir"
	install -Dm644 codespell.1 "$pkgdir/usr/share/man/man1/codespell.1"
}

sha512sums="978d206ec30b6ecf38daf7910f02357dd5c74aa4edf43449044fa6300bd31579266f7e05565c8b6b8a3835b95f83e715c2c0f93e63080d016337707089944053  codespell-1.12.0.tar.gz
78486a558a76d1cf66c60d7268797f5386e960cc680a170a10916c22331159e16980db4c9f51b0e6d325df2dcd5f1508a1519f54ee4f310311bc35de67040b85  0001-disable-run-test.patch"
