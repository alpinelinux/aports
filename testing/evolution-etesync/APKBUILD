# Maintainer: Samuel Kalbfleisch <contact+alpine@mallory.re>
pkgname=evolution-etesync
pkgver=1.1.2
pkgrel=0
pkgdesc="EteSync plugin for Evolution"
url="https://gitlab.gnome.org/GNOME/evolution-etesync"
# s390x and riscv64 blocked by libetebase/rust/cargo
arch="all !s390x !riscv64"
license="LGPL-2.1-or-later"
makedepends="cmake ninja evolution evolution-dev evolution-data-server-dev libetebase libetebase-dev intltool"
source="
$pkgname-$pkgver.tar.gz::https://gitlab.gnome.org/GNOME/evolution-etesync/-/archive/$pkgver/evolution-etesync-$pkgver.tar.gz
"
subpackages="$pkgname-lang"
options="!check" # no tests

build() {
	cmake -B build \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DBUILD_SHARED_LIBS=True \
		-DCMAKE_BUILD_TYPE=None .
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

sha512sums="
353a21560226aff2a6756ceac7fb45518034b84f9628be7b495da78fb921b33ce09601330dc4ddada84912358d4080b16d74f2255b6a301a1430ded646138233  evolution-etesync-1.1.2.tar.gz
"
