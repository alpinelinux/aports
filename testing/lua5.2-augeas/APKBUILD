# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=lua5.2-augeas
pkgver=0.1.2
pkgrel=1
pkgdesc="Lua bindings for Augeas"
url="http://git.alpinelinux.org/cgit/lua-augeas/"
arch="all"
license="LGPL"
depends=
makedepends="lua5.2-dev augeas-dev"
install=
subpackages=
source="http://git.alpinelinux.org/cgit/lua-augeas.git/snapshot/lua-augeas-$pkgver.tar.bz2
	0001-support-for-Lua-5.2.patch"

_luaver=5.2
_builddir="$srcdir"/lua-augeas-$pkgver
prepare() {
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	make LUAPC=lua5.2 || return 1
}

package() {
	cd "$_builddir"
	install -D augeas.so "$pkgdir"/usr/lib/lua/$_luaver/augeas.so
}

md5sums="20581b3eb4cc38491dec561ab9a9c156  lua-augeas-0.1.2.tar.bz2
31296c5db6d0cf66c368f5c41b9147c1  0001-support-for-Lua-5.2.patch"
sha256sums="1a4c273bdfad0106645fee85bcea2115b76ef7bab87cfad07c0c04eb331a85e3  lua-augeas-0.1.2.tar.bz2
9ad43ff0492e0fa7d253fb55f62b5aee8e53374907fa11e16ba6b165dd4622df  0001-support-for-Lua-5.2.patch"
sha512sums="3ccbb32d4d71a9d390e814084a91fc26d51f25d31a1ff3a1e9927c494d196fdbc3954ae763b18e3b6e938bba9090773e4ac5fdb93ebc6d3293dc6be351485459  lua-augeas-0.1.2.tar.bz2
35ce609c0f34d88b3cd3a2edc6b7bc4332de9b06ad9b57a2fcc54c655399ad8e426b224e064d86146ccc1258ae7cb58a33d6187e7d5f396888a1d5a61637c940  0001-support-for-Lua-5.2.patch"
