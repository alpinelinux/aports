# Contributor: Henrik Feldt <henrik@haf.se>
# Maintainer:
pkgname=fsharp
pkgver=3.1.1.32
pkgrel=0
pkgdesc="The Open Edition of the F# compiler, core library and tools"
url="https://github.com/fsharp/fsharp"
arch="x86_64"
license="ASL 2.0"
depends="mono"
depends_dev="mono-dev"
makedepends="$depends_dev autoconf automake libtool"
install="$pkgname.pre-install $pkgname.post-install"
subpackages="$pkgname-dev $pkgname-doc"
source="fsharp-${pkgver}.tar.gz::https://github.com/fsharp/fsharp/archive/${pkgver}.tar.gz"

_builddir="$srcdir"/fsharp-${pkgver%%_*}
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./autogen.sh \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--localstatedir=/var \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make -j1 DESTDIR="$pkgdir" install || return 1
	rm -f "$pkgdir"/usr/lib/*.la
}

md5sums="6fa9a52ffe8b6d0a26330a8d6ac8f17e  fsharp-3.1.1.32.tar.gz"
sha256sums="cdb966e271195bd7f7016fa1555e8f16184a0b3d8fb09acaee95020f7a7b789a  fsharp-3.1.1.32.tar.gz"
sha512sums="3c5d8ce557e8a5e339da3290b0a3816e4d9daad7025c51bb4f77f5fba6fd506e879b25fb565e54bdb4f28ed6cfd0b25d3ee5a86a239df46709421c9a175c1239  fsharp-3.1.1.32.tar.gz"
