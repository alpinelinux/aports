# Contributor: Fabio Ribeiro <fabiorphp@gmail.com>
# Maintainer: Fabio Ribeiro <fabiorphp@gmail.com>
pkgname=php7-redis
_pkgreal=redis
_pkgrepo=phpredis
_pkgbranch=php7
pkgver=3.0.0
pkgrel=0
pkgdesc="PHP extension for interfacing with Redis (Dev PHP7)"
url="https://github.com/$_pkgrepo/$_pkgrepo/tree/$_pkgbranch"
arch="x86_64 armhf"
license="PHP"
depends="php7-session"
pecldepends="php7-dev autoconf"
makedepends="$pecldepends"
install=""
subpackages=""
source="$_pkgrepo-$pkgver.tar.gz::https://github.com/$_pkgrepo/$_pkgrepo/archive/$_pkgbranch.tar.gz"
builddir="$srcdir/$_pkgrepo-$_pkgbranch"

build() {
	cd "$builddir"
	phpize7 || return 1
	./configure --prefix=/usr --with-php-config=php-config7 || return 1
	make || return 1
}

package() {
	cd "$builddir"
	make INSTALL_ROOT="$pkgdir"/ install || return 1
	install -d "$pkgdir"/etc/php7/conf.d || return 1
	echo "extension=$_pkgreal.so" > "$pkgdir"/etc/php7/conf.d/20_$_pkgreal.ini
}

md5sums="4ceb9fcfaf005f12e49c7410a4620f4c  phpredis-3.0.0.tar.gz"
sha256sums="030997370bb1906793989c89550d9cafd4fa35dccbad7040b2339301aa961dba  phpredis-3.0.0.tar.gz"
sha512sums="51f9492189443b851ec721cb0285a82426130162ab8ce2cd7ea26b1b7757a8c893d00b91f4dbb8dd1fd6bcef828ca98c4378c24faf59afa8df5b9c92a81798d5  phpredis-3.0.0.tar.gz"
