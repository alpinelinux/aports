# Contributor: shrizza <shrizza@gmail.com>
# Maintainer: shrizza <shrizza@gmail.com>
pkgname="avara"
pkgver="0_git20191006"
pkgrel=0
pkgdesc="Port of the original 1996 Mac OS game from Ambrosia Software"
url="https://github.com/avaraline/Avara"
arch="all"
license="MIT"
depends=""
makedepends="clang clang-dev directfb-dev glu-dev sdl2_net-dev sdl2_mixer-dev sdl2"
options="!check"
install=""
subpackages="$pkgname-doc"
source="avara https://github.com/avaraline/Avara/archive/b8700db.zip"
builddir="$srcdir/Avara-b8700db3c696b9813b511b06a92c9faab55b282a"

build() {
	make || return 1
}

package() {
	mkdir -p "$pkgdir/usr/bin/"
	install -Dm755 ../avara "$pkgdir/usr/bin/"
	mkdir -p "$pkgdir/var/games/$pkgname/"
	cp -r build/Avara "$pkgdir/var/games/$pkgname/"
	cp -r build/bsps "$pkgdir/var/games/$pkgname/"
	cp -r build/levels "$pkgdir/var/games/$pkgname/"
	cp -r build/rsrc "$pkgdir/var/games/$pkgname/"
	cp -r build/shaders "$pkgdir/var/games/$pkgname/"
	mkdir -p "$pkgdir/usr/share/doc/$pkgname/"
	install -Dm644 CONTRIBUTORS.md "$pkgdir/usr/share/doc/$pkgname/"
	install -Dm644 README.md "$pkgdir/usr/share/doc/$pkgname/"
	mkdir -p "$pkgdir/usr/share/licenses/$pkgname"
	install -Dm644 LICENSE.txt "$pkgdir/usr/share/licenses/$pkgname/"
}

sha512sums="e8a5267c74e1d102d33e7f7b113bb8fed89018f4360321a8028a9051cbd9667c5eaee1832cec32e69a73c4ce1c1e9026985c06926a87dd3111784c5d5e723c40  avara
03dfb9b173749fac97591053cd7d55976617eb4fb64bcb4286a1b511d18dcb557dcbb408bf4c4e5d5bf7c47f41b2134808613938a9535c51d5e486e123a9271c  b8700db.zip"
