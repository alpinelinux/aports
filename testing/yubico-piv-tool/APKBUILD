# Contributor: Christophe BERAUD-DUFOUR <christophe.berauddufour@gmail.com>
# Maintainer:
pkgname=yubico-piv-tool
pkgver=1.4.3
pkgrel=0
pkgdesc="PIV Tools for yubikey on RaspberryPi"
url="https://developers.yubico.com/yubico-piv-tool"
arch="all"
license="BSD"
depends="openssl acf-openssl libcrypto1.0 libressl2.5-libcrypto pcsc-lite ccid"
makedepends="libc-dev gcc libressl-dev libcrypto1.0 libressl2.5-libcrypto pcsc-lite-dev"
install=""
subpackages=""
source="https://developers.yubico.com/yubico-piv-tool/Releases/yubico-piv-tool-1.4.3.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"

prepare() {
	default_prepare || return
}

build() {
	cd "$builddir"
	./configure --build=armv7l-unknown-linux-gnueabihf \
	--host=armv7l-unknown-linux-gnueabihf \
	--prefix=/usr \
	-- sysconfdir=/etc \
	-- localstatedir=/var \
	-- disable-nls \
	make || return 1
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install || return 1
}

sha512sums="37e9691cf0ed7b9877ec2d51323f58801bf7b884fd3c64762a9421a017ca4ee2af7a1bb1b95b9657fdd8463dd9b93ae53de8ab390f71fb7635b332a5d2414632  yubico-piv-tool-1.4.3.tar.gz"
