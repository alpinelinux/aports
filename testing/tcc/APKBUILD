# Contributor:
# Maintainer: Hinata Yanagi <hinasssan@gmail.com>
pkgname=tcc
pkgver=2017.10.19
pkgrel=0
pkgdesc="Tiny C Compiler"
url="http://repo.or.cz/tinycc.git"
arch="all"
license="the GNU Lesser General Public License"
depends="musl-dev"
makedepends="gcc texinfo"
commit=fc0188ffbcf29f856caedee8cef07d88be01e439
source="http://repo.or.cz/tinycc.git/snapshot/${commit}.tar.gz"
subpackages="${pkgname}-doc"

builddir="$srcdir/"

build() {
	cd tinycc-*
	./configure --prefix=/usr --config-musl
	make
}

check() {
	cd "${builddir}tinycc-"*
	make test
}

package() {
	cd "${builddir}tinycc-"*
	make DESTDIR="${pkgdir}" install
}

sha512sums="2a32ec62fce539fb1168a21bd542aa370c7f6a9c7bc490bd9f86bb46b745a3db816c173f739e891631ec0b0ccbd89358226f7d5767ccbc3d7634890f83fbfa68  fc0188ffbcf29f856caedee8cef07d88be01e439.tar.gz"
