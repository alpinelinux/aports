--- a/src/shrpx_tls.cc
+++ b/src/shrpx_tls.cc
@@ -1978,7 +1978,7 @@
 #endif /* !WORDS_BIGENDIAN */

 StringRef get_x509_serial(BlockAllocator &balloc, X509 *x) {
-#if OPENSSL_1_1_API
+#if false
   auto sn = X509_get0_serialNumber(x);
   uint64_t r;
   if (ASN1_INTEGER_get_uint64(&r, sn) != 1) {
@@ -2031,7 +2031,7 @@
     return -1;
   }

-  unsigned char *s;
+  char *s;
   auto slen = BIO_get_mem_data(b, &s);
   auto tt = util::parse_openssl_asn1_time_print(
       StringRef{s, static_cast<size_t>(slen)});

