maintainer="Stefan Hansson <newbyte@postmarketos.org>"
pkgname=libmegapixels
pkgver=0.2.3
pkgrel=0
pkgdesc="Device abstraction for the Megapixels application"
url="https://libme.gapixels.me"
arch="all"
license="GPL-3.0-or-later"
makedepends="libconfig-dev linux-headers meson"
subpackages="$pkgname-dev"
source="https://gitlab.com/megapixels-org/libmegapixels/-/archive/$pkgver/libmegapixels-$pkgver.tar.gz"

build() {
	abuild-meson \
		output .
	meson compile -C output
}

check() {
	meson test --print-errorlogs -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

sha512sums="
7ba62991b8ad3f06ef0797d873874e5367eb2ac2793b72df7a668d9aa4cbff9719a9b83c73b6dc41bebc658a137a3a31aecea62e6dee775c7eda1a7354c57430  libmegapixels-0.2.3.tar.gz
"
