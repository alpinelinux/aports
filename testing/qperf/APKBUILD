# Maintainer: Matthieu Monnier <matthieu.monnier@enalean.com>
pkgname=qperf
pkgver=0.4.9
pkgrel=1
pkgdesc="Measuring network performance"
url="https://www.openfabrics.org"
arch="all"
makedepends="perl perl-doc"
subpackages="$pkgname-doc"
license="GPL-2.0"
source="https://www.openfabrics.org/downloads/qperf/$pkgname-$pkgver.tar.gz"

builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	./configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--localstatedir=/var
	make
}

check() {
	cd "$builddir"
	./src/qperf --help >> /dev/null
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="da22c76686b62262381f774fa107d0ec3b0695128628c55ed945c53a20f0854411e6d2b15d431a98177ce5be8332d2a1e54429d3d81c4c22f160d07e992aab3c  qperf-0.4.9.tar.gz"
