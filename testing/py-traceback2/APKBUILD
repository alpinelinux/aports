# Contributor: Stuart Cardall <developer@it-offshore.co.uk>
# Maintainer: Stuart Cardall <developer@it-offshore.co.uk>
pkgname=py-traceback2
_pkgname=${pkgname#py-*}
pkgver=1.4.0
pkgrel=0
pkgdesc="Backport of the Python3 stdlib traceback module"
url="https://github.com/testing-cabal/traceback2"
arch="noarch"
license="PSF"
depends="python"
makedepends="python-dev py-setuptools py-pbr"
options="!check" # temporarily disable as requires py-unittest2
#checkdepends="py-contextlib2 py-fixtures py-testtools py-unittest2 py-linecache2 py-extras"
source="$pkgname-$pkgver.tar.gz::https://github.com/testing-cabal/$_pkgname/archive/$pkgver.tar.gz"
builddir="$srcdir/$_pkgname-$pkgver"

build() {
	cd "$builddir"
	python setup.py build
}

package() {
	cd "$builddir"
	python setup.py install --prefix=/usr --root="$pkgdir"
}

check() {
	cd "$builddir"
	python -m unittest discover "$builddir"
}

sha512sums="33ef29ab051d5ddca1dc3e802cd0cbaf216067157b4e5bea4bb0481cd7a6758614fc551d614b5bcf3354757b315b9549bde9ff9c552980fb75ddb3aa31909d79  py-traceback2-1.4.0.tar.gz"
