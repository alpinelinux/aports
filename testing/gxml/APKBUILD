maintainer="Achill Gilgenast <achill@achill.org>"
pkgname=gxml
pkgver=0.20.4
pkgrel=0
pkgdesc="GObject API for manipulating XML and Serializable framework from GObject to XML"
url="https://gitlab.gnome.org/GNOME/gxml"
arch="all"
license="LGPL-2.1-or-later"
makedepends="
	libgee-dev
	libxml2-dev
	meson
	vala
	"
subpackages="
	$pkgname-dev
	$pkgname-devhelp::noarch
	$pkgname-lang
	"
source="https://gitlab.gnome.org/GNOME/gxml/-/archive/$pkgver/gxml-$pkgver.tar.gz"
options="!check" # https://gitlab.gnome.org/GNOME/gxml/-/issues/49

build() {
	abuild-meson \
		output .
	meson compile -C output
}

check() {
	meson test --print-errorlogs -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

sha512sums="
b6da70e259ff1df676758e9f61fe6fca24f2db68754d51e279999902a2b10d2a0d2c679d4749688cf8b8a7d8a52427b636cf09c57b21f9a83d46e4bc173fec0c  gxml-0.20.4.tar.gz
"
