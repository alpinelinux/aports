# Contributor: Aaron Hurt <ahurt@ena.com>
# Maintainer: Aaron Hurt <ahurt@ena.com>
pkgname=pacparser
pkgver=1.3.6
pkgrel=0
pkgdesc="A library to parse proxy auto-config (PAC) files"
url="http://pacparser.manugarg.com"
arch="all"
license="LGPL3+"
depends=""
makedepends="bash"
install=""
subpackages="$pkgname-doc $pkgname-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/pacparser/pacparser/archive/$pkgver.tar.gz
spidermonkey-make.patch"
builddir="$srcdir/$pkgname-$pkgver"

prepare() {
	find "$builddir" -name \*.git\* -delete
	default_prepare
}

build() {
	cd "$builddir"
	make -C src pactester || return 1
}

package() {
	cd "$builddir"
	make -C src install DESTDIR=$pkgdir LIB_PREFIX=$pkgdir/usr/lib > /dev/null 2>&1 || return 1
}

md5sums="a7b80fc8b8a4cd8d2060d23eb5f141d2  pacparser-1.3.6.tar.gz
64a7af13cc92ebdadcc5168343254a77  spidermonkey-make.patch"
sha256sums="c1f6f2ccd4fec329175f882102e47c57328e8e6e16aa9dbd4f8b859f9a028e83  pacparser-1.3.6.tar.gz
f5c804cf0cec9a1c650940cb92dd70c3b28c6525e40e5b517db0582112991130  spidermonkey-make.patch"
sha512sums="9ba0eaf0f7010363897933cfa7ab4bdbc7fab488deaeab90906d2638cb8523a013d6f9b41148dea679d76809cf1ae9b2b131c0a2937d431ec234dedcdda5bb39  pacparser-1.3.6.tar.gz
59020d80c6264224d997b08c49fab220648e783fbc4f7dd775160bbd9b93873e46161377528d34c40a10a8e8b73b0ec5ad10734492626ece8be472acb3776a64  spidermonkey-make.patch"
