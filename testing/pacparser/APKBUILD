# Contributor: Aaron Hurt <ahurt@ena.com>
# Maintainer: Aaron Hurt <ahurt@ena.com>
pkgname=pacparser
pkgver=1.3.6
pkgrel=0
pkgdesc="A library to parse proxy auto-config (PAC) files"
url="http://pacparser.manugarg.com"
arch="all"
license="LGPL3+"
depends=""
makedepends="bash"
install=""
subpackages="$pkgname-doc $pkgname-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/pacparser/pacparser/archive/$pkgver.tar.gz
spidermonkey-make.patch"
builddir="$srcdir/$pkgname-$pkgver"

prepare() {
	cd "$builddir"
	find . -name \*.git\* -delete
	patch -p0 -i "$srcdir/spidermonkey-make.patch"
}

build() {
	cd "$builddir"
	make -C src pactester || return 1
}

package() {
	cd "$builddir"
	make -C src install DESTDIR=$pkgdir LIB_PREFIX=$pkgdir/usr/lib > /dev/null 2>&1 || return 1
}

md5sums="a7b80fc8b8a4cd8d2060d23eb5f141d2  pacparser-1.3.6.tar.gz
37e42d25f35a3d767222f227d6224415  spidermonkey-make.patch"
sha256sums="c1f6f2ccd4fec329175f882102e47c57328e8e6e16aa9dbd4f8b859f9a028e83  pacparser-1.3.6.tar.gz
40832025c558d91ee5b7faa7e6950632a2949f48c1d09b8b79206561fb5bcc6d  spidermonkey-make.patch"
sha512sums="9ba0eaf0f7010363897933cfa7ab4bdbc7fab488deaeab90906d2638cb8523a013d6f9b41148dea679d76809cf1ae9b2b131c0a2937d431ec234dedcdda5bb39  pacparser-1.3.6.tar.gz
11e41aea6daf81fc72cd5a600dd0531d80c5f7762f837cb7606bff6e697939f01411210419c4a0be710a1f066a8d87908b02b9536d3509093796839d55be58b6  spidermonkey-make.patch"
