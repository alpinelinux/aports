# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=creduce
pkgver=2.6.0
pkgrel=0
pkgdesc="A C/C++ program reducer"
url="http://embed.cs.utah.edu/creduce/"
arch="all"
license="custom"
# util-linux provides lscpu
depends="clang indent perl perl-exporter-lite perl-file-which
	perl-getopt-tabular perl-regexp-common perl-sys-cpu perl-term-readkey
	util-linux"
makedepends="clang-dev>=3.8.0 flex llvm-dev>=3.8.0 zlib-dev"
source="http://embed.cs.utah.edu/creduce/$pkgname-$pkgver.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"

	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--libexecdir=/usr/lib/$pkgname \
		|| return 1
	make
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="e2a08127d2aea29b6934792eff4ff0d9f10952ca520671c60ef4b24a48522b19c48336d4b9d0b8e8c633dd8832b2a56d3d0daa311478e474e974c60a0ae381f1  creduce-2.6.0.tar.gz"
