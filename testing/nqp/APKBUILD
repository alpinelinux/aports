# Contributor: Curt Tilmes <Curt.Tilmes@nasa.gov>
# Maintainer: Curt Tilmes <Curt.Tilmes@nasa.gov>
pkgname=nqp
pkgver=2017.12
pkgrel=0
pkgdesc="Not Quite Perl"
url="https://github.com/perl6/nqp"
arch="all"
options="!archcheck" # Arch dependencies are embedded
license="Artistic-2.0"
depends="moarvm"
makedepends="perl perl-utils moarvm-dev"
install=""
subpackages=""
source="${pkgname}-${pkgver}.tar.gz::https://github.com/perl6/nqp/archive/${pkgver}.tar.gz"
builddir="$srcdir"/"$pkgname"-"$pkgver"

build() {
	cd "$builddir"
        perl Configure.pl --prefix=/usr --backends=moar
        make
}

check() {
        cd "$builddir"
        make test
}

package() {
	cd "$builddir"
        make DESTDIR="$pkgdir" install
}

sha512sums="3be6bb33495e7a544b62c62cef25ac4dab575fbd33725f19ca174da0a8c633a468eb695ba9f747d20338870797788cef71b668e463688ae065ff26fbbf693359  nqp-2017.12.tar.gz"
