# Contributor: Leo <thinkabit.ukim@gmail.com>
# Maintainer: Leo <thinkabit.ukim@gmail.com>
pkgname=meli
pkgver=0.0
pkgrel=0
pkgdesc="Terminal Mail User Agent"
url="https://meli.delivery/"
arch="x86_64" # Limited by cargo
license="GPL-3.0-or-later"
makedepends="cargo dbus-dev"
subpackages="$pkgname-doc"
source="https://git.meli.delivery/meli/meli/archive/pre-alpha-$pkgver.tar.gz"
builddir="$srcdir/$pkgname"

build() {
	cargo build --release --verbose
}

check() {
	cargo test all --release --verbose
}

package() {
	cargo install --path . --root="$pkgdir"/usr
	rm "$pkgdir"/usr/.crates.toml
	install -Dm644 meli.1 "$pkgdir"/usr/share/man/man1/meli.1
}

sha512sums="dad60f1d9f4c05399af0963cceb12319672ca9922da4870eaee563070c5a5a1c05930f50e9962857384ed10a1cf14e459f07f2d8763dfd8dfeaf22b680f444e7  pre-alpha-0.0.tar.gz"
