# Automatically generated by apkbuild-cpan, template 1
# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=perl-getopt-tabular
_pkgreal=Getopt-Tabular
pkgver=0.3
pkgrel=0
pkgdesc="Table-driven argument parsing for Perl 5"
url="http://search.cpan.org/dist/Getopt-Tabular/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends=""
cpanmakedepends=""
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/G/GW/GWARD/$_pkgreal-$pkgver.tar.gz"
builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	default_prepare || return 1

	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make && make test
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="5b24ed68318a749df3930d25b13dd436  Getopt-Tabular-0.3.tar.gz"
sha256sums="9bdf067633b5913127820f4e8035edc53d08372faace56ba6bfa00c968a25377  Getopt-Tabular-0.3.tar.gz"
sha512sums="a289d4861538ae542f7549364573cadd740538f73862d89dd49eaf6bed6f787ba2848246add171aed6aef4d7d36411d00bef70b76885aa948ce0e7fc8801652b  Getopt-Tabular-0.3.tar.gz"
