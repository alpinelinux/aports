# Contributor: Carl Chave <online@chave.us>, Andre F de Miranda <trixpan@users.noreply.github.com>
# Maintainer:
pkgname=squeezelite
pkgver=1.9.6.1196
pkgrel=0
pkgdesc="Lightweight headless squeezebox player for Logitech Media Server"
url="https://github.com/ralph-irving/squeezelite"
arch="all"
license="GPL-3.0-or-later3"
options="!check" # No test suite
depends="flac alsa-lib faad2 mpg123 libvorbis libmad"
makedepends="flac-dev alsa-lib-dev faad2-dev mpg123-dev libvorbis-dev libmad-dev"
install="$pkgname.pre-install $pkgname.post-install"
subpackages="$pkgname-doc $pkgname-openrc"
source="$pkgname-$pkgver.zip::https://github.com/ralph-irving/squeezelite/archive/2b508464dce2cbdb2a3089c58df2a6fbc36328c0.zip $pkgname.confd $pkgname.initd"
builddir="$srcdir/squeezelite-2b508464dce2cbdb2a3089c58df2a6fbc36328c0/"

build() {
    cd "$builddir"
    make
}

package() {
    cd "$builddir"
    install -Dm 755 squeezelite \
        "$pkgdir"/usr/bin/squeezelite
    install -Dm 644 doc/squeezelite.1 \
        "$pkgdir"/usr/share/man/man1/squeezelite.1
    install -Dm 644 "$srcdir"/squeezelite.confd \
        "$pkgdir"/etc/conf.d/squeezelite
    install -Dm 755 "$srcdir"/squeezelite.initd \
        "$pkgdir"/etc/init.d/squeezelite
}

sha512sums="2596a047d951f9d24bae4116dbc527b21de813eecbb2bbc6e5eae79b22a66c6550ad1fae42e3d102cefd526c13fd052bf2c2a05e89c7e602f952c90aafa4af42  squeezelite-1.9.6.1196.zip
ff552fcbbbf2b2291958fa1c61057f54ba0d9b19620666036dd1e19897b5d7bcc543c40699c3ee53b2eec7a38b9cf46cb9205c2048f7d5488c23085d9904f114  squeezelite.confd
319061dd592b82b2f7636d1f7e877787babd85ab54ab62dfe10ed3cb9958589bb26f382fea3e5f9665cce7b902835404ffec2a3cafe928048b9ea17158b0cf5c  squeezelite.initd"
