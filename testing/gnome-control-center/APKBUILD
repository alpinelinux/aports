# Contributor: Rasmus Thomsen <oss@cogitri.dev>
# Maintainer: Rasmus Thomsen <oss@cogitri.dev>
pkgname=gnome-control-center
pkgver=3.32.1
pkgrel=0
pkgdesc="GNOME control center"
url="https://gitlab.gnome.org/GNOME/gnome-control-center"
# limited by gnome-online-accounts
arch="all !armhf !armv7 !s390x"
license="GPL-2.0-or-later"
makedepends="
	clutter-dev
	clutter-gtk-dev
	gnome-desktop-dev
	gnome-settings-daemon-dev
	gnome-online-accounts-dev
	grilo-dev
	libgtop-dev
	gnome-bluetooth-dev
	colord-gtk-dev
	samba-dev
	accountsservice-dev
	libpwquality-dev
	networkmanager-dev
	network-manager-applet-dev
	modemmanager-dev
	krb5-dev
	itstool
	libxml2-utils
	libxslt
	docbook-xml
	docbook-xsl
	pulseaudio-dev
	udisks2-dev
	cups-dev
	meson
	libsecret-dev
	gsound-dev
	libgudev-dev
	polkit-dev
	libhandy-dev
	py3-setuptools"
options="!check" # needs unpackaged py-dbusmock
subpackages="$pkgname-dev $pkgname-lang"
source="https://download.gnome.org/sources/$pkgname/${pkgver%.*}/$pkgname-$pkgver.tar.xz"

build() {
	meson \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var \
		--buildtype=release \
		-Dcheese=false \
		-Dibus=false \
		. output
	ninja -C output
}

check() {
	ninja -C output test
}

package() {
	DESTDIR="$pkgdir" ninja -C output install
}

sha512sums="ef479c95b5d9eb287e252740821e561fb426905d31d975ac0ecae9bb4f03c1e409a43f3ccced484d697b486be64381bc50c51e10012f091f628035f6c31e8d65  gnome-control-center-3.32.1.tar.xz"
