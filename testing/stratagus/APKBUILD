# Maintainer:  DÃ­az Urbaneja Diego <sodomon2@gmail.com>
pkgname=stratagus
pkgver=2.4.2
pkgrel=0
pkgdesc="A free cross-platform real-time strategy gaming engine"
url="https://github.com/Wargus/stratagus"
arch="x86_64 x86"
license="GPL"
depends="mesa sdl libpng libmng libtheora sqlite tolua++"
makedepends="lua5.1-dev cmake make"
options="!check"
source="$pkgname-$pkgver.zip::https://github.com/Wargus/$pkgname/archive/v$pkgver.zip"
builddir="$srcdir/$pkgname-$pkgver"

build() {
cd "$builddir"
  cmake CMakeLists.txt \
  -DCMAKE_BUILD_TYPE=Release \
  -DCMAKE_INSTALL_PREFIX=/usr \
  -DGAMEDIR=/usr/bin \
  -DSBINDIR=/usr/bin \
  -DLUA_INCLUDE_DIR=/usr/include/lua5.1 \
  -Bbuild
  
  make -C build
}

package() {
cd "$builddir"/build
   make DESTDIR=${pkgdir} install
   
  mkdir -p ${pkgdir}/usr/include
    mv $srcdir/stratagus-2.4.2/gameheaders/stratagus-game-launcher.h $pkgdir/usr/include/stratagus-game-launcher.h 
    mv $srcdir/stratagus-2.4.2/gameheaders/stratagus-gameutils.h $pkgdir/usr/include/stratagus-gameutils.h
    mv $srcdir/stratagus-2.4.2/gameheaders/stratagus-tinyfiledialogs.h $pkgdir/usr/include/stratagus-tinyfiledialogs.h
}

sha512sums="982c0970f06cef198696a7cc4a405bc1deefdc2b792d29de38057b7dd013e947eb27a027bc2af2b31f3441154029693b70bc2594d364fa6b5bdf28de78ac7387  stratagus-2.4.2.zip"
