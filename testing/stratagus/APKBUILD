# Maintainer:  DÃ­az Urbaneja Diego <sodomon2@gmail.com>
pkgname=stratagus
pkgver=2.4.2
pkgrel=0
pkgdesc="A free cross-platform real-time strategy gaming engine"
url="https://github.com/Wargus/stratagus"
arch="x86_64 x86"
license="GPL"
depends="mesa sdl libpng libmng libtheora sqlite tolua++"
makedepends="lua5.1-dev cmake make"
options="!check"
source="$pkgname-$pkgver.zip::https://github.com/Wargus/$pkgname/archive/v$pkgver.zip"
builddir="$srcdir/$pkgname-$pkgver"

build() {
cd "$builddir"
  cmake CMakeLists.txt \
  -DCMAKE_BUILD_TYPE=Release \
  -DCMAKE_INSTALL_PREFIX=/usr \
  -DGAMEDIR=/usr/bin \
  -DSBINDIR=/usr/bin \
  -DLUA_INCLUDE_DIR=/usr/include/lua5.1 \
  -Bbuild
  
  make -C build
}

package() {
cd "$builddir"/build
   make DESTDIR=${pkgdir} install
   
  mkdir -p ${pkgdir}/usr/include
    mv $srcdir/stratagus-master/gameheaders/stratagus-game-launcher.h $pkgdir/usr/include/stratagus-game-launcher.h 
    mv $srcdir/stratagus-master/gameheaders/stratagus-gameutils.h $pkgdir/usr/include/stratagus-gameutils.h
    mv $srcdir/stratagus-master/gameheaders/stratagus-tinyfiledialogs.h $pkgdir/usr/include/stratagus-tinyfiledialogs.h
}

sha512sums="c463c49b643806fba20459ac938f5f6041f2cc5e754b664e8a9a467805110c59ecfbe568d70df871e86966cf0cd2eb4e28582f749a10fc7f60a90013b7075d89  stratagus-2.4.2.zip"
