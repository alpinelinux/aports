# -*- Makefile -*-

# don't build testcases to save time, they are not needed for the package
VBOX_WITH_TESTCASES     :=
# VBOX_WITH_TESTSUITE	:=
VBOX_WITH_VALIDATIONKIT :=

KBUILD_MSG_STYLE        := brief

## paths, origin, hardening
VBOX_WITH_HARDENING        := 2
VBOX_WITH_ORIGIN           :=

# use system xorg and gl headers
VBOX_USE_SYSTEM_XORG_HEADERS = 1
VBOX_USE_SYSTEM_GL_HEADERS = 1

# no legacy X.org - use KMS
VBOX_NO_LEGACY_XORG_X11 = 1

# alpinelinux path
VBOX_WITH_ORIGIN :=
VBOX_PATH_APP_PRIVATE_ARCH := /usr/lib/virtualbox
VBOX_PATH_SHARED_LIBS := $(VBOX_PATH_APP_PRIVATE_ARCH)
VBOX_WITH_RUNPATH := $(VBOX_PATH_APP_PRIVATE_ARCH)
VBOX_PATH_APP_PRIVATE := /usr/share/virtualbox
VBOX_PATH_APP_DOCS := /usr/share/doc/virtualbox
VBOX_PATH_PACKAGE_DOCS := $(VBOX_PATH_APP_DOCS)
VBOX_PATH_DOCBOOK := /usr/share/xml/docbook/xsl-stylesheets-1.79.1/
VBOX_PATH_DOCBOOK_DTD := /usr/share/xml/docbook/xml-dtd-4.5/

## don't build with -Werror
VBOX_WITH_WARNINGS_AS_ERRORS :=

# do not fail on warning
VBOX_GCC_WERR =
VBOX_GCC_WARN =

# fix gsoap missing zlib include and produce errors with --as-needed
VBOX_GSOAP_CXX_LIBS := gsoapssl++ z

# no update requests. updates are handled via apk
VBOX_WITH_UPDATE_REQUEST := 0
VBOX_WITH_REGISTRATION_REQUEST =

# build shared library
VBOX_GUI_WITH_SHARED_LIBRARY = 1

# hardcode builder name
USERNAME = builder@alpinelinux

# misc
VBOX_BLD_PYTHON = python3
TOOL_YASM_AS := yasm
